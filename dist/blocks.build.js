!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=31)}([function(e,t,n){"use strict";(function(e,r){function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(d.a)(t)}function i(e,t,n){var r=[],o=Object(u.a)(e,r,n);return r.length<2?n:o+t(r)}n.d(t,"a",function(){return o}),n.d(t,"b",function(){return m});var a=n(10),c=(n.n(a),n(11),n(14)),s=n(51),l=(n.n(s),n(5),n(16)),u=(n.n(l),n(15),n(17)),d=n(18),p=n(12),f={name:"@emotion/react",version:"11.4.0",main:"dist/emotion-react.cjs.js",module:"dist/emotion-react.esm.js",browser:{"./dist/emotion-react.cjs.js":"./dist/emotion-react.browser.cjs.js","./dist/emotion-react.esm.js":"./dist/emotion-react.browser.esm.js"},types:"types/index.d.ts",files:["src","dist","jsx-runtime","jsx-dev-runtime","isolated-hoist-non-react-statics-do-not-use-this-in-your-code","types/*.d.ts","macro.js","macro.d.ts","macro.js.flow"],sideEffects:!1,author:"mitchellhamilton <mitchell@mitchellhamilton.me>",license:"MIT",scripts:{"test:typescript":"dtslint types"},dependencies:{"@babel/runtime":"^7.13.10","@emotion/cache":"^11.4.0","@emotion/serialize":"^1.0.2","@emotion/sheet":"^1.0.1","@emotion/utils":"^1.0.0","@emotion/weak-memoize":"^0.2.5","hoist-non-react-statics":"^3.3.1"},peerDependencies:{"@babel/core":"^7.0.0",react:">=16.8.0"},peerDependenciesMeta:{"@babel/core":{optional:!0},"@types/react":{optional:!0}},devDependencies:{"@babel/core":"^7.13.10","@emotion/css":"11.1.3","@emotion/css-prettifier":"1.0.0","@emotion/server":"11.4.0","@emotion/styled":"11.3.0","@types/react":"^16.9.11",dtslint:"^0.3.0","html-tag-names":"^1.1.2",react:"16.14.0","svg-tag-names":"^1.1.1"},repository:"https://github.com/emotion-js/emotion/tree/main/packages/react",publishConfig:{access:"public"},"umd:main":"dist/emotion-react.umd.min.js",preconstruct:{entrypoints:["./index.js","./jsx-runtime.js","./jsx-dev-runtime.js","./isolated-hoist-non-react-statics-do-not-use-this-in-your-code.js"],umdName:"emotionReact"}},m=function(e,t){var n=arguments;if(null==t||!c.d.call(t,"css"))return a.createElement.apply(void 0,n);var r=n.length,o=new Array(r);o[0]=c.a,o[1]=Object(c.c)(e,t);for(var i=2;i<r;i++)o[i]=n[i];return a.createElement.apply(null,o)},h=!1,v=Object(c.e)(function(t,n){"production"===e.env.NODE_ENV||h||!t.className&&!t.css||(console.error("It looks like you're using the css prop on Global, did you mean to use the styles prop instead?"),h=!0);var r=t.styles,o=Object(d.a)([r],void 0,"function"===typeof r||Array.isArray(r)?Object(a.useContext)(c.b):void 0),i=Object(a.useRef)();return Object(a.useLayoutEffect)(function(){var e=n.key+"-global",t=new p.a({key:e,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),r=!1,a=document.querySelector('style[data-emotion="'+e+" "+o.name+'"]');return n.sheet.tags.length&&(t.before=n.sheet.tags[0]),null!==a&&(r=!0,a.setAttribute("data-emotion",e),t.hydrate([a])),i.current=[t,r],function(){t.flush()}},[n]),Object(a.useLayoutEffect)(function(){var e=i.current,t=e[0];if(e[1])return void(e[1]=!1);if(void 0!==o.next&&Object(u.b)(n,o.next,!0),t.tags.length){var r=t.tags[t.tags.length-1].nextElementSibling;t.before=r,t.flush()}n.insert("",o,t,!1)},[n,o.name]),null});"production"!==e.env.NODE_ENV&&(v.displayName="EmotionGlobal");var g=function t(n){for(var r=n.length,o=0,i="";o<r;o++){var a=n[o];if(null!=a){var c=void 0;switch(typeof a){case"boolean":break;case"object":if(Array.isArray(a))c=t(a);else{"production"!==e.env.NODE_ENV&&void 0!==a.styles&&void 0!==a.name&&console.error("You have passed styles created with `css` from `@emotion/react` package to the `cx`.\n`cx` is meant to compose class names (strings) so you should convert those styles to a class name by passing them to the `css` received from <ClassNames/> component."),c="";for(var s in a)a[s]&&s&&(c&&(c+=" "),c+=s)}break;default:c=a}c&&(i&&(i+=" "),i+=c)}}return i},y=Object(c.e)(function(t,n){var r=!1,o=function(){if(r&&"production"!==e.env.NODE_ENV)throw new Error("css can only be used during render");for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];var a=Object(d.a)(o,n.registered);return Object(u.b)(n,a,!1),n.key+"-"+a.name},s=function(){if(r&&"production"!==e.env.NODE_ENV)throw new Error("cx can only be used during render");for(var t=arguments.length,a=new Array(t),c=0;c<t;c++)a[c]=arguments[c];return i(n.registered,o,g(a))},l={css:o,cx:s,theme:Object(a.useContext)(c.b)},p=t.children(l);return r=!0,p});if("production"!==e.env.NODE_ENV&&(y.displayName="EmotionClassNames"),"production"!==e.env.NODE_ENV){if(!("undefined"!==typeof jest)){var b=window,w="__EMOTION_REACT_"+f.version.split(".")[0]+"__";b[w]&&console.warn("You are loading @emotion/react when it is already loaded. Running multiple instances may cause problems. This can happen if multiple versions are used, or if multiple builds of the same version are used."),b[w]=!0}}}).call(t,n(3),n(43))},function(e,t,n){e.exports=n(37)},function(e,t,n){"use strict";function r(e){if(e){if(e.indexOf("bilibili.com")>-1){var t=new RegExp(/(http(s)?:\/\/)?(www\.)?(player\.)?bilibili\.com\/video\/([^\/\?]*)/);if(t.test(e)){var n=t.exec(e);return n=n[5],["bilibili","//player.bilibili.com/player.html?high_quality=1&bvid="+n]}}if(e.indexOf("youku.com")>-1){var r=new RegExp(/(http(s)?:\/\/)?(v\.)?(player\.)?youku\.com\/(v_show)?(embed)?\/(id_)?([^\.\?]*)(\.html)?/);if(r.test(e)){var o=r.exec(e);return o=o[8],["youku","//player.youku.com/embed/"+o]}}if(e.indexOf("v.qq.com")>-1){var i=new RegExp(/(http(s)?:\/\/)?v.qq\.com\/x\/cover\/([^\/]*)\/([^\.]*)(\.html)/);if(i.test(e)){var a=i.exec(e);return a=a[4],["qq","//v.qq.com/txp/iframe/player.html?vid="+a]}if(i=new RegExp(/(http(s)?:\/\/)?v.qq\.com\/x\/page\/([^\.]*)(\.html)/),i.test(e)){var a=i.exec(e);return console.log(a),a=a[3],["qq","//v.qq.com/txp/iframe/player.html?vid="+a]}}if(e.indexOf("open.iqiyi.com")>-1)return["iqiyi",e]}return["unknown",e]}n.d(t,"e",function(){return a}),n.d(t,"d",function(){return c}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return l}),n.d(t,"f",function(){return u}),t.b=r;var o=wp.element,i=(o.useRef,o.useEffect,function(e){return"Normal"==e.status||"Normal"==e.Status}),a=function(e){return i(e)},c=function(e){return e.status||e.Status},s=function(e){return void 0==e||null==e?"":new Date(1e3*e).toISOString().substr(11,8)},l=function(e){if(void 0==e||0==e)return"Unknown";var t=["b","KB","MB","GB","TB"];if(0==e)return"0 b";var n=parseInt(Math.floor(Math.log(e)/Math.log(1024)).toString());return(e/Math.pow(1024,n)).toFixed(2)+" "+t[n]},u=function(e){e=new Date(e);var t=e.getHours(),n=e.getMinutes(),r=e.getSeconds();return n=n<10?"0"+n:n,e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"  "+t+":"+n+":"+r}},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function i(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){h&&f&&(h=!1,f.length?m=f.concat(m):v=-1,m.length&&c())}function c(){if(!h){var e=o(a);h=!0;for(var t=m.length;t;){for(f=m,m=[];++v<t;)f&&f[v].run();v=-1,t=m.length}f=null,h=!1,i(e)}}function s(e,t){this.fun=e,this.array=t}function l(){}var u,d,p=e.exports={};!function(){try{u="function"===typeof setTimeout?setTimeout:n}catch(e){u=n}try{d="function"===typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var f,m=[],h=!1,v=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new s(e,t)),1!==m.length||h||o(c)},s.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){"use strict";var r=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},o.apply(this,arguments)},__=wp.i18n.__,i=wp.element,a=i.useEffect,c=i.useRef,s=i.useMemo,l=i.useState,u=wp.components,d=u.Spinner,p=u.Placeholder;t.a=function(e,t){if(!e)throw new Error("Missing Aliplayer config");e=e.config;var n=l(!0),i=r(n,2),u=i[0],f=i[1],m=c(null);a(function(){if(h&&!m.current)if(e.oss&&e.oss.key){var t=e.oss;wp.apiFetch({path:wp.url.addQueryArgs("mine-cloudvod/v1/aliyun/oss/playurl",{object:t.key,bucket:t.bucket})}).then(function(t){f(!1),t.status&&(m.current=new window.Aliplayer(o(e,{id:h,source:t.data,oss:void 0}),function(e){console.log("The player is created")}))})}else e.source?setTimeout(function(){f(!1),m.current=new window.Aliplayer(o(e,{id:h}),function(e){console.log("The player is created")})},2e3):e.cos&&e.cos.key?wp.apiFetch({path:wp.url.addQueryArgs("mine-cloudvod/v1/qcloud/cos/playurl",{object:e.cos.key,bucket:e.cos.bucket})}).then(function(t){f(!1),t.status&&(m.current=new window.Aliplayer(o(e,{id:h,source:t.data,cos:void 0}),function(e){console.log("The player is created")}))}):wp.apiFetch({path:wp.url.addQueryArgs("mine-cloudvod/v1/aliyun/vod/playauth",{vid:e.vid,endpoint:mcv_alivod_config.endpoint})}).then(function(t){f(!1),t.hls&&!m.current?m.current=new window.Aliplayer(o(e,{id:h,playauth:"",vid:"",source:t.hls,encryptType:1}),function(e){console.log("The player is created")}):m.current||(m.current=new window.Aliplayer(o(e,{id:h,playauth:t.playauth}),function(e){console.log("The player is created")}))})},[h,e]);var h=s(function(){return"aliplayer-"+Math.floor(1e6*Math.random())},[]);return u?wp.element.createElement(p,{className:"mine-cloudvod__placeholder is-loading"},wp.element.createElement(d,null)," ",__("Aliplayer is initializing, please wait...","mine-cloudvod")):wp.element.createElement("div",{id:h})}},function(e,t,n){"use strict";var r=function(e){var t=new WeakMap;return function(n){if(t.has(n))return t.get(n);var r=e(n);return t.set(n,r),r}};t.a=r},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(0),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=r(["\n        cursor: pointer;\n        user-select: none;\n        display: inline-block;\n        position: relative;\n        margin-right: 20px;\n        font-weight: bold;\n        margin-bottom: 20px;\n        width: 220px;\n        flex: 0 0 220px;\n        border: 1px solid #e0e0e0;\n        border-radius: 4px;\n        overflow: hidden;\n      "],["\n        cursor: pointer;\n        user-select: none;\n        display: inline-block;\n        position: relative;\n        margin-right: 20px;\n        font-weight: bold;\n        margin-bottom: 20px;\n        width: 220px;\n        flex: 0 0 220px;\n        border: 1px solid #e0e0e0;\n        border-radius: 4px;\n        overflow: hidden;\n      "]),c=r(["\n          margin: 14px;\n        "],["\n          margin: 14px;\n        "]),s=r(["\n              text-overflow: ellipsis;\n              white-space: nowrap;\n              overflow: hidden;\n              width: 100%;\n              max-width: 100%;\n              display: inline-block;\n              line-height: 20px;\n              font-size: 13px;\n            "],["\n              text-overflow: ellipsis;\n              white-space: nowrap;\n              overflow: hidden;\n              width: 100%;\n              max-width: 100%;\n              display: inline-block;\n              line-height: 20px;\n              font-size: 13px;\n            "]),l=r(["\n              font-size: 12px;\n              opacity: 0.75;\n              margin-bottom: 7px;\n            "],["\n              font-size: 12px;\n              opacity: 0.75;\n              margin-bottom: 7px;\n            "]);t.a=function(e){var t=e.thumbnail,n=e.title,r=e.footer,u=e.before,d=e.after;return Object(o.b)("div",i({css:Object(o.a)(a)},e),!!u&&u,!!t&&t,Object(o.b)("div",{css:Object(o.a)(c)},!!n&&Object(o.b)("span",{css:Object(o.a)(s)},n),!!r&&Object(o.b)("div",{css:Object(o.a)(l)},r)),!!d&&d)}},function(e,t,n){"use strict";var r=n(0),o=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n          height: 100%;\n          background-color: var(--wp-admin-theme-color, #007cba);\n        "],["\n          height: 100%;\n          background-color: var(--wp-admin-theme-color, #007cba);\n        "]);t.a=function(e){var t=e.id,n=e.className,i=e.progress;return Object(r.b)("div",{className:n},Object(r.b)("div",{id:"mcv_progress_"+t,css:Object(r.a)(o),style:{width:i+"%"}}))}},function(e,t){jQuery(window).on("elementor/frontend/init",function(){"undefined"!==typeof elementor&&(elementor.channels.editor.on("mcv:video:edit",function(e){var t=e.elementSettingsModel.get("video_block");if(t){window.open("/wp-admin/post.php?post="+t+"&action=edit","_blank").focus()}}),elementor.channels.editor.on("editor:widget:presto_video:section_video:activated",function(e){e.model.get("settings").on("change",function(e){})}),elementor.channels.editor.on("mcv:video:create",function(){window.open("/wp-admin/post-new.php?post_type=mcv_video","_blank").focus()}))})},function(e,t,n){"use strict";var r=n(39),o=n(40),i=n(41),a=wp.data.registerStore;a("mine-cloudvod/vod",{reducer:r.a,selectors:o,actions:i})},function(e,t){e.exports=React},function(e,t,n){"use strict";(function(e){var r=n(12),o=n(44),i=(n(5),n(13),function(e){return e.length?e[e.length-1]:null}),a=function(e,t){var n=-1,r=44;do{switch(Object(o.p)(r)){case 0:38===r&&12===Object(o.j)()&&(t[n]=1),e[n]+=Object(o.g)(o.k-1);break;case 2:e[n]+=Object(o.e)(r);break;case 4:if(44===r){e[++n]=58===Object(o.j)()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=Object(o.f)(r)}}while(r=Object(o.i)());return e},c=function(e,t){return Object(o.d)(a(Object(o.b)(e),t))},s=new WeakMap,l=function(e){if("rule"===e.type&&e.parent&&e.length){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||s.get(n))&&!r){s.set(e,!0);for(var o=[],i=c(t,o),a=n.props,l=0,u=0;l<i.length;l++)for(var d=0;d<a.length;d++,u++)e.props[u]=o[l]?i[l].replace(/&\f/g,a[d]):a[d]+" "+i[l]}}},u=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},d=function(e){return!!e&&"comm"===e.type&&e.children.indexOf("emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason")>-1},p=function(e){return function(t,n,r){if("rule"===t.type){var o=t.value.match(/(:first|:nth|:nth-last)-child/g);if(o&&!0!==e.compat){var a=n>0?r[n-1]:null;if(a&&d(i(a.children)))return;o.forEach(function(e){console.error('The pseudo class "'+e+'" is potentially unsafe when doing server-side rendering. Try changing it to "'+e.split("-child")[0]+'-of-type".')})}}}},f=function(e){return 105===e.type.charCodeAt(1)&&64===e.type.charCodeAt(0)},m=function(e,t){for(var n=e-1;n>=0;n--)if(!f(t[n]))return!0;return!1},h=function(e){e.type="",e.value="",e.return="",e.children="",e.props=""},v=function(e,t,n){f(e)&&(e.parent?(console.error("`@import` rules can't be nested inside other rules. Please move it to the top level and put it before regular rules. Keep in mind that they can only be used within global styles."),h(e)):m(t,n)&&(console.error("`@import` rules can't be after other rules. Please put your `@import` rules before your other rules."),h(e)))},g=[o.l],y=function(t){var n=t.key;if("production"!==e.env.NODE_ENV&&!n)throw new Error("You have to configure `key` for your cache. Please make sure it's unique (and not equal to 'css') as it's used for linking styles to your cache.\nIf multiple caches share the same key they might \"fight\" for each other's style elements.");if("css"===n){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))})}var a=t.stylisPlugins||g;if("production"!==e.env.NODE_ENV&&/[^a-z-]/.test(n))throw new Error('Emotion key must only contain lower case alphabetical characters and - but "'+n+'" was passed');var c,s={},d=[];c=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;d.push(e)});var f,m=[l,u];"production"!==e.env.NODE_ENV&&m.push(p({get compat(){return _.compat}}),v);var h,y=[o.o,"production"!==e.env.NODE_ENV?function(e){e.root||(e.return?h.insert(e.return):e.value&&e.type!==o.a&&h.insert(e.value+"{}"))}:Object(o.m)(function(e){h.insert(e)})],b=Object(o.h)(m.concat(a,y)),w=function(e){return Object(o.n)(Object(o.c)(e),b)};f=function(t,n,r,o){h=r,"production"!==e.env.NODE_ENV&&void 0!==n.map&&(h={insert:function(e){r.insert(e+n.map)}}),w(t?t+"{"+n.styles+"}":n.styles),o&&(_.inserted[n.name]=!0)};var _={key:n,sheet:new r.a({key:n,container:c,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend}),nonce:t.nonce,inserted:s,registered:{},insert:f};return _.sheet.hydrate(d),_};t.a=y}).call(t,n(3))},function(e,t,n){"use strict";(function(e){function r(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function o(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}n.d(t,"a",function(){return i});var i=function(){function t(t){var n=this;this._insertTag=function(e){var t;t=0===n.tags.length?n.prepend?n.container.firstChild:n.before:n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(e,t),n.tags.push(e)},this.isSpeedy=void 0===t.speedy?"production"===e.env.NODE_ENV:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.before=null}var n=t.prototype;return n.hydrate=function(e){e.forEach(this._insertTag)},n.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(o(this));var n=this.tags[this.tags.length-1];if("production"!==e.env.NODE_ENV){var i=64===t.charCodeAt(0)&&105===t.charCodeAt(1);i&&this._alreadyInsertedOrderInsensitiveRule&&console.error("You're attempting to insert the following rule:\n"+t+"\n\n`@import` rules must be before all other types of rules in a stylesheet but other rules have already been inserted. Please ensure that `@import` rules are before all other rules."),this._alreadyInsertedOrderInsensitiveRule=this._alreadyInsertedOrderInsensitiveRule||!i}if(this.isSpeedy){var a=r(n);try{a.insertRule(t,a.cssRules.length)}catch(n){"production"===e.env.NODE_ENV||/:(-moz-placeholder|-ms-input-placeholder|-moz-read-write|-moz-read-only){/.test(t)||console.error('There was a problem inserting the following rule: "'+t+'"',n)}}else n.appendChild(document.createTextNode(t));this.ctr++},n.flush=function(){this.tags.forEach(function(e){return e.parentNode.removeChild(e)}),this.tags=[],this.ctr=0,"production"!==e.env.NODE_ENV&&(this._alreadyInsertedOrderInsensitiveRule=!1)},t}()}).call(t,n(3))},function(e,t,n){"use strict";function r(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}t.a=r},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return h}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return m}),n.d(t,"d",function(){return c}),n.d(t,"e",function(){return l});var r=n(10),o=(n.n(r),n(11)),i=(n(45),n(5),n(15),n(17)),a=n(18),c=Object.prototype.hasOwnProperty,s=Object(r.createContext)("undefined"!==typeof HTMLElement?Object(o.a)({key:"css"}):null),l=(s.Provider,function(e){return Object(r.forwardRef)(function(t,n){var o=Object(r.useContext)(s);return e(t,o,n)})}),u=Object(r.createContext)({}),d=function(e){return e.replace(/\$/g,"-")},p="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",f="__EMOTION_LABEL_PLEASE_DO_NOT_USE__",m=function(t,n){if("production"!==e.env.NODE_ENV&&"string"===typeof n.css&&-1!==n.css.indexOf(":"))throw new Error("Strings are not allowed as css prop values, please wrap it in a css template literal from '@emotion/react' like this: css`"+n.css+"`");var r={};for(var o in n)c.call(n,o)&&(r[o]=n[o]);if(r[p]=t,"production"!==e.env.NODE_ENV){var i=new Error;if(i.stack){var a=i.stack.match(/at (?:Object\.|Module\.|)(?:jsx|createEmotionProps).*\n\s+at (?:Object\.|)([A-Z][A-Za-z0-9$]+) /);a||(a=i.stack.match(/.*\n([A-Z][A-Za-z0-9$]+)@/)),a&&(r[f]=d(a[1]))}}return r},h=l(function(t,n,o){var s=t.css;"string"===typeof s&&void 0!==n.registered[s]&&(s=n.registered[s]);var l=t[p],d=[s],m="";"string"===typeof t.className?m=Object(i.a)(n.registered,d,t.className):null!=t.className&&(m=t.className+" ");var h=Object(a.a)(d,void 0,"function"===typeof s||Array.isArray(s)?Object(r.useContext)(u):void 0);if("production"!==e.env.NODE_ENV&&-1===h.name.indexOf("-")){var v=t[f];v&&(h=Object(a.a)([h,"label:"+v+";"]))}Object(i.b)(n,h,"string"===typeof l);m+=n.key+"-"+h.name;var g={};for(var y in t)!c.call(t,y)||"css"===y||y===p||"production"!==e.env.NODE_ENV&&y===f||(g[y]=t[y]);return g.ref=o,g.className=m,Object(r.createElement)(l,g)});"production"!==e.env.NODE_ENV&&(h.displayName="EmotionCssPropInternal")}).call(t,n(3))},function(e,t,n){"use strict";var r=n(16),o=n.n(r),i=function(e,t){return o()(e,t)};t.a=i},function(e,t,n){"use strict";function r(e){return i.isMemo(e)?l:u[e.$$typeof]||a}function o(e,t,n){if("string"!==typeof t){if(v){var i=h(t);i&&i!==v&&o(e,i,n)}var a=p(t);f&&(a=a.concat(f(t)));for(var s=r(e),l=r(t),u=0;u<a.length;++u){var g=a[u];if(!c[g]&&(!n||!n[g])&&(!l||!l[g])&&(!s||!s[g])){var y=m(t,g);try{d(e,g,y)}catch(e){}}}}return e}var i=n(46),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},c={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};u[i.ForwardRef]=s,u[i.Memo]=l;var d=Object.defineProperty,p=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,v=Object.prototype;e.exports=o},function(e,t,n){"use strict";function r(e,t,n){var r="";return n.split(" ").forEach(function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "}),r}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var o=function(e,t,n){var r=e.key+"-"+t.name;if(!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles),void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0);o=o.next}while(void 0!==o)}}},function(e,t,n){"use strict";(function(e){function r(t,n,i){if(null==i)return"";if(void 0!==i.__emotion_styles){if("production"!==e.env.NODE_ENV&&"NO_COMPONENT_SELECTOR"===i.toString())throw new Error("Component selectors can only be used in conjunction with @emotion/babel-plugin.");return i}switch(typeof i){case"boolean":return"";case"object":if(1===i.anim)return C={name:i.name,styles:i.styles,next:C},i.name;if(void 0!==i.styles){var a=i.next;if(void 0!==a)for(;void 0!==a;)C={name:a.name,styles:a.styles,next:C},a=a.next;var c=i.styles+";";return"production"!==e.env.NODE_ENV&&void 0!==i.map&&(c+=i.map),c}return o(t,n,i);case"function":if(void 0!==t){var s=C,l=i(t);return C=s,r(t,n,l)}"production"!==e.env.NODE_ENV&&console.error("Functions that are interpolated in css calls will be stringified.\nIf you want to have a css call based on props, create a function that returns a css call like this\nlet dynamicStyle = (props) => css`color: ${props.color}`\nIt can be called directly with props or interpolated in a styled call like this\nlet SomeComponent = styled('div')`${dynamicStyle}`");break;case"string":if("production"!==e.env.NODE_ENV){var u=[],p=i.replace(d,function(e,t,n){var r="animation"+u.length;return u.push("const "+r+" = keyframes`"+n.replace(/^@keyframes animation-\w+/,"")+"`"),"${"+r+"}"});u.length&&console.error("`keyframes` output got interpolated into plain string, please wrap it with `css`.\n\nInstead of doing this:\n\n"+[].concat(u,["`"+p+"`"]).join("\n")+"\n\nYou should wrap it with `css` like this:\n\ncss`"+p+"`")}}if(null==n)return i;var f=n[i];return void 0!==f?f:i}function o(t,n,o){var i="";if(Array.isArray(o))for(var a=0;a<o.length;a++)i+=r(t,n,o[a])+";";else for(var c in o){var s=o[c];if("object"!==typeof s)null!=n&&void 0!==n[s]?i+=c+"{"+n[s]+"}":f(s)&&(i+=m(c)+":"+h(c,s)+";");else{if("NO_COMPONENT_SELECTOR"===c&&"production"!==e.env.NODE_ENV)throw new Error("Component selectors can only be used in conjunction with @emotion/babel-plugin.");if(!Array.isArray(s)||"string"!==typeof s[0]||null!=n&&void 0!==n[s[0]]){var u=r(t,n,s);switch(c){case"animation":case"animationName":i+=m(c)+":"+u+";";break;default:"production"!==e.env.NODE_ENV&&"undefined"===c&&console.error(l),i+=c+"{"+u+"}"}}else for(var d=0;d<s.length;d++)f(s[d])&&(i+=m(c)+":"+h(c,s[d])+";")}}return i}n.d(t,"a",function(){return E});var i=n(49),a=n(50),c=n(13),s="You have illegal escape sequence in your template literal, most likely inside content's property value.\nBecause you write your CSS inside a JavaScript string you actually have to do double escaping, so for example \"content: '\\00d7';\" should become \"content: '\\\\00d7';\".\nYou can read more about this here:\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#ES2018_revision_of_illegal_escape_sequences",l="You have passed in falsy value as style object's key (can happen when in example you pass unexported component as computed key).",u=/[A-Z]|^ms/g,d=/_EMO_([^_]+?)_([^]*?)_EMO_/g,p=function(e){return 45===e.charCodeAt(1)},f=function(e){return null!=e&&"boolean"!==typeof e},m=Object(c.a)(function(e){return p(e)?e:e.replace(u,"-$&").toLowerCase()}),h=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(d,function(e,t,n){return C={name:t,styles:n,next:C},t})}return 1===a.a[e]||p(e)||"number"!==typeof t||0===t?t:t+"px"};if("production"!==e.env.NODE_ENV){var v=/(attr|counters?|url|(((repeating-)?(linear|radial))|conic)-gradient)\(|(no-)?(open|close)-quote/,g=["normal","none","initial","inherit","unset"],y=h,b=/^-ms-/,w=/-(.)/g,_={};h=function(e,t){if("content"===e&&("string"!==typeof t||-1===g.indexOf(t)&&!v.test(t)&&(t.charAt(0)!==t.charAt(t.length-1)||'"'!==t.charAt(0)&&"'"!==t.charAt(0))))throw new Error("You seem to be using a value for 'content' without quotes, try replacing it with `content: '\""+t+"\"'`");var n=y(e,t);return""===n||p(e)||-1===e.indexOf("-")||void 0!==_[e]||(_[e]=!0,console.error("Using kebab-case for css properties in objects is not supported. Did you mean "+e.replace(b,"ms-").replace(w,function(e,t){return t.toUpperCase()})+"?")),n}}var x,O=/label:\s*([^\s;\n{]+)\s*(;|$)/g;"production"!==e.env.NODE_ENV&&(x=/\/\*#\ssourceMappingURL=data:application\/json;\S+\s+\*\//g);var C,E=function(t,n,o){if(1===t.length&&"object"===typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var a=!0,c="";C=void 0;var l=t[0];null==l||void 0===l.raw?(a=!1,c+=r(o,n,l)):("production"!==e.env.NODE_ENV&&void 0===l[0]&&console.error(s),c+=l[0]);for(var u=1;u<t.length;u++)c+=r(o,n,t[u]),a&&("production"!==e.env.NODE_ENV&&void 0===l[u]&&console.error(s),c+=l[u]);var d;"production"!==e.env.NODE_ENV&&(c=c.replace(x,function(e){return d=e,""})),O.lastIndex=0;for(var p,f="";null!==(p=O.exec(c));)f+="-"+p[1];var m=Object(i.a)(c)+f;return"production"!==e.env.NODE_ENV?{name:m,styles:c,map:d,next:C,toString:function(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}}:{name:m,styles:c,next:C}}}).call(t,n(3))},function(e,t,n){"use strict";var r=n(0),o=wp.components,i=o.Flex,a=o.FlexBlock,c=o.Spinner;t.a=function(e){var t=e.className;return Object(r.b)(i,{className:t},Object(r.b)(a,{css:{textAlign:"center"}},Object(r.b)(c,null)))}},function(e,t,n){"use strict";var r=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),__=wp.i18n.__,o=wp.components.Button,i=wp.element,a=i.useState,c=i.useEffect,s=wp.data.useSelect;t.a=function(e){var t=e.onChoose,n=a(null),i=r(n,2),l=i[0],u=i[1],d=a(!1),p=r(d,2),f=p[0],m=p[1],h=s(function(e){return e("mine-cloudvod/vod").ui("selectedId")}),v=s(function(e){return e("mine-cloudvod/vod").videos()});return c(function(){u(h?v.find(function(e){return e.videoId===h}):null)},[v,h]),c(function(){if(l&&"Normal"==l.status)return void m(!0);m(l&&"Normal"==l.status)},[l]),wp.element.createElement(o,{isPrimary:!0,disabled:!f,onClick:function(){return t(l)}},f?__("Choose","mine-cloudvod"):__("Please Choose...","mine-cloudvod"))}},function(e,t,n){"use strict";var r=n(0),o=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n          height: 100%;\n          background-color: var(--wp-admin-theme-color, #007cba);\n        "],["\n          height: 100%;\n          background-color: var(--wp-admin-theme-color, #007cba);\n        "]);t.a=function(e){var t=e.id,n=e.className,i=e.progress;return Object(r.b)("div",{className:n},Object(r.b)("div",{id:"mcv_progress_"+t,css:Object(r.a)(o),style:{width:i+"%"}}))}},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(0),i=r(["\n        width: 100%;\n        height: 100%;\n        max-width: calc(100% - 32px);\n        max-height: calc(100% - 32px);\n\n        .components-modal__content {\n          position: relative;\n          display: flex;\n          flex-direction: column;\n        }\n      "],["\n        width: 100%;\n        height: 100%;\n        max-width: calc(100% - 32px);\n        max-height: calc(100% - 32px);\n\n        .components-modal__content {\n          position: relative;\n          display: flex;\n          flex-direction: column;\n        }\n      "]),a=r(['\n          @media screen and (min-width: 780px) {\n            margin: -24px;\n            display: grid;\n            flex: 1;\n            max-height: calc(100vh - 68px);\n            grid-template-columns: 1fr 1fr minmax(0px, 267px);\n            grid-template-rows: minmax(50px, auto) 1fr 60px;\n            grid-template-areas:\n              "header header sidebar"\n              "main main sidebar"\n              "footer footer footer";\n            overflow: hidden;\n          }\n        '],['\n          @media screen and (min-width: 780px) {\n            margin: -24px;\n            display: grid;\n            flex: 1;\n            max-height: calc(100vh - 68px);\n            grid-template-columns: 1fr 1fr minmax(0px, 267px);\n            grid-template-rows: minmax(50px, auto) 1fr 60px;\n            grid-template-areas:\n              "header header sidebar"\n              "main main sidebar"\n              "footer footer footer";\n            overflow: hidden;\n          }\n        ']),c=r(["\n            grid-area: header;\n            padding: 24px 24px 12px 24px;\n          "],["\n            grid-area: header;\n            padding: 24px 24px 12px 24px;\n          "]),s=r(["\n              display: flex;\n              align-items: center;\n\n              > * {\n                margin-right: 10px;\n              }\n            "],["\n              display: flex;\n              align-items: center;\n\n              > * {\n                margin-right: 10px;\n              }\n            "]),l=r(["\n            grid-area: main;\n            display: grid;\n            overflow: hidden;\n\n            .components-drop-zone__provider {\n              overflow: hidden;\n              display: grid;\n            }\n\n            .components-drop-zone {\n              z-index: 99;\n            }\n          "],["\n            grid-area: main;\n            display: grid;\n            overflow: hidden;\n\n            .components-drop-zone__provider {\n              overflow: hidden;\n              display: grid;\n            }\n\n            .components-drop-zone {\n              z-index: 99;\n            }\n          "]),u=r(["\n            display: none;\n            grid-area: sidebar;\n            padding: 0 16px;\n            z-index: 75;\n            background: #f3f3f3;\n            border-left: 1px solid #ddd;\n            overflow: auto;\n\n            @media screen and (min-width: 780px) {\n              display: block;\n            }\n\n            .sidebar-content {\n              padding: 16px 0;\n            }\n          "],["\n            display: none;\n            grid-area: sidebar;\n            padding: 0 16px;\n            z-index: 75;\n            background: #f3f3f3;\n            border-left: 1px solid #ddd;\n            overflow: auto;\n\n            @media screen and (min-width: 780px) {\n              display: block;\n            }\n\n            .sidebar-content {\n              padding: 16px 0;\n            }\n          "]),d=r(["\n            grid-area: footer;\n            border-top: 1px solid #ddd;\n            display: flex;\n            align-items: center;\n            justify-content: flex-end;\n            padding: 8px;\n          "],["\n            grid-area: footer;\n            border-top: 1px solid #ddd;\n            display: flex;\n            align-items: center;\n            justify-content: flex-end;\n            padding: 8px;\n          "]),__=wp.i18n.__,p=wp.components.Modal;t.a=function(e){var t=e.onClose,n=e.title,r=e.header,f=e.error,m=e.mainContent,h=e.sidebar,v=e.footer;return Object(o.b)(p,{title:n||__("Add Media","mine-cloudvod"),onRequestClose:t,shouldCloseOnClickOutside:!1,css:Object(o.a)(i),overlayClassName:"mine-cloudvod__modal-overlay"},Object(o.b)("div",{css:Object(o.a)(a),"data-cy":"media-modal"},Object(o.b)("div",{css:Object(o.a)(c)},Object(o.b)("div",{css:Object(o.a)(s)},r),f),Object(o.b)("div",{css:Object(o.a)(l)},m),Object(o.b)("div",{css:Object(o.a)(u)},h),Object(o.b)("div",{css:Object(o.a)(d)},v)))}},function(e,t,n){"use strict";t.a=function(e){var t=e.file,n=e.path,r=e.formData,o=e.onProgress,i=e.onComplete,a=e.onError,c=new XMLHttpRequest,s=void 0,l=void 0,u=new FormData;r.map(function(e){u.append(e.name,e.value)}),u.append("file",t),c.open("post",n,!0),c.onreadystatechange=function(){4==c.readyState&&200==c.status&&console.log("uploaded")},c.upload.onloadstart=function(){console.log("Start to upload"),s=(new Date).getTime(),l=0},c.upload.onprogress=function(e){console.log("Uploading......");var t=(e.loaded/e.total*100).toFixed(0);o(t);var n=(new Date).getTime(),r=(n-s)/1e3,i=e.loaded-l,a=i/r;s=(new Date).getTime(),l=e.loaded;var c="b/s";a/1024>1&&(c="kb/s",a/=1024),a/1024>1&&(c="mb/s",a/=1024),console.log(a.toFixed(2)+c)},c.upload.onload=function(){i(t)},c.upload.onerror=function(e){a(e)},c.send(u)}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var o=n(68),i=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=(wp.i18n.__,wp.element.useState),c=(wp.data.dispatch,function(e){var t=e.setAttributes,n=e.attributes,c=n.markers,s=a({title:"",time:""}),l=i(s,2),u=l[0],d=l[1],p=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=c.indexOf(e),o=c.map(function(e,t){return t!==r?e:Object.assign({},e,n)});t({markers:o})},f=function(e){var n=c.indexOf(e);t({markers:c.filter(function(e,t){return t!==n})})},m=function(){u.time&&u.title&&(t({markers:[].concat(r(c||[]),[{time:u.time,title:u.title}])}),d({title:"",time:""}))};return wp.element.createElement("div",null,function(){return(c||[]).sort(function(e,t){return parseInt(e.time)-parseInt(t.time)})}().map(function(e,t){return wp.element.createElement(o.a,{key:t+"-"+e.time,time:e.time,title:e.title,marker:e,update:function(t){p(e,t)},remove:function(){f(e)}})}),wp.element.createElement(o.a,{time:u.time,title:u.title,update:function(e){d(Object.assign({},u,e))},add:m}))});t.a=c},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function i(e){var t=e.tracks,n=e.onEditPress,r=void 0;return r=0===t.length?wp.element.createElement("p",null,__("Captions are .vtt files that help make your content more accesible to a wider range of users.","mine-cloudvod")):t.map(function(e,t){return wp.element.createElement("div",{key:t,className:"block-library-video-tracks-editor__track-list-track"},wp.element.createElement("span",null,e.label," "),wp.element.createElement(b,{isTertiary:!0,onClick:function(){return n(t)},"aria-label":u(__("Edit %s","mine-cloudvod"),e.label)},__("Edit","mine-cloudvod")))}),wp.element.createElement(h,{label:__("Captions","mine-cloudvod"),className:"block-library-video-tracks-editor__track-list"},r)}function a(e){var t=e.track,n=e.onChange,r=e.onClose,o=e.onRemove,i=t.src,a=void 0===i?"":i,c=t.label,s=void 0===c?"":c,l=t.lang,u=void 0===l?"":l,d=(t.kind,a.startsWith("blob:")?"":a.substring(a.lastIndexOf("/")+1));return wp.element.createElement(p,null,wp.element.createElement("div",{className:"block-library-video-tracks-editor__single-track-editor"},wp.element.createElement("span",{className:"block-library-video-tracks-editor__single-track-editor-edit-track-label"},__("Edit caption track","mine-cloudvod")),wp.element.createElement("span",null,__("File","mine-cloudvod"),": ",wp.element.createElement("b",null,d)),wp.element.createElement("div",{className:"block-library-video-tracks-editor__single-track-editor-label-language"},wp.element.createElement(w,{autoFocus:!0,onChange:function(e){return n(Object.assign({},t,{label:e}))},label:__("Caption title","mine-cloudvod"),value:s}),wp.element.createElement(w,{onChange:function(e){return n(Object.assign({},t,{lang:e}))},label:__("Language tag","mine-cloudvod"),value:u})),wp.element.createElement("div",{className:"block-library-video-tracks-editor__single-track-editor-buttons-container"},wp.element.createElement(b,{isSecondary:!0,onClick:function(){var e={},o=!1;""===s&&(e.label=__("English","mine-cloudvod"),o=!0),""===u&&(e.lang="en",o=!0),o&&n(Object.assign({},t,e)),r()}},__("Close","mine-cloudvod")),wp.element.createElement(b,{isDestructive:!0,isLink:!0,onClick:o},__("Remove caption","mine-cloudvod")))))}function c(e){var t=e.captions,n=void 0===t?[]:t,c=e.onChange,l=j(function(e){return e("core/block-editor").getSettings().mediaUpload},[]),u=S(null),d=s(u,2),C=d[0],A=d[1],R=S(),P=s(R,2),D=P[0],I=P[1];return l?wp.element.createElement(y,{contentClassName:"block-library-video-tracks-editor",renderToggle:function(e){var t=e.isOpen,n=e.onToggle;return wp.element.createElement(v,null,wp.element.createElement(g,{label:__("Captions","mine-cloudvod"),showTooltip:!0,"aria-expanded":t,"aria-haspopup":"true",onClick:n},__("Captions","mine-cloudvod")))},renderContent:function(e){return o(e),null!==C?wp.element.createElement(a,{track:n[C],onChange:function(e){var t=[].concat(r(n));t[C]=e,c(t)},onClose:function(){return A(null)},onRemove:function(){c(n.filter(function(e,t){return t!==C})),A(null)}}):wp.element.createElement("div",null,wp.element.createElement(p,null,wp.element.createElement(i,{tracks:n,onEditPress:A}),wp.element.createElement(h,{className:"block-library-video-tracks-editor__add-tracks-container",label:__("Add caption languages","mine-cloudvod")},wp.element.createElement(E,{onSelect:function(e){var t=e.url,o=n.length;c([].concat(r(n),[{src:t}])),A(o)},allowedTypes:T,render:function(e){var t=e.open;return wp.element.createElement(f,{icon:"media",onClick:t},__("Open Media Library","mine-cloudvod"))}}),wp.element.createElement(k,null,wp.element.createElement(m,{onChange:function(e){var t=e.target.files,o=n.length;l({allowedTypes:T,filesList:t,onFileChange:function(e){var t=s(e,1),i=t[0].url,a=[].concat(r(n));a[o]||(a[o]={}),a[o]=Object.assign({},n[o],{src:i}),c(a),A(o)}})},accept:".vtt,text/vtt",render:function(e){var t=e.openFileDialog;return wp.element.createElement(f,{icon:"upload",onClick:function(){t()}},__("Upload","mine-cloudvod"))}}))),wp.element.createElement(h,{className:"block-library-video-tracks-editor__add-tracks-container",label:__("Add External Subtitle","mine-cloudvod")},wp.element.createElement("form",{onSubmit:function(e){e.preventDefault();var t=n.length;c([].concat(r(n),[{src:D}])),A(t),I("")}},wp.element.createElement(_,{style:{width:"100%"}},wp.element.createElement(O,null,wp.element.createElement(w,{type:"url",placeholder:__("External Subtitle Link","mine-cloudvod"),value:D,onChange:function(e){return I(e)}})),wp.element.createElement(x,null,wp.element.createElement(b,{isPrimary:!0,style:{marginBottom:"8px"},type:"submit"},__("Add","mine-cloudvod")))),wp.element.createElement("p",null,__("Attention: External subtitles may cause cross-domain issues.","mine-cloudvod"))))))}}):null}n.d(t,"a",function(){return c});var s=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=wp.i18n,__=l.__,u=l.sprintf,d=wp.components,p=d.NavigableMenu,f=d.MenuItem,m=d.FormFileUpload,h=d.MenuGroup,v=d.ToolbarGroup,g=d.ToolbarButton,y=d.Dropdown,b=(d.SVG,d.Rect,d.Path,d.Button),w=d.TextControl,_=(d.SelectControl,d.Flex),x=d.FlexItem,O=d.FlexBlock,C=wp.blockEditor,E=C.MediaUpload,k=C.MediaUploadCheck,j=wp.data.useSelect,S=wp.element.useState,T=["text/vtt"]},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(0),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=r(["\n        cursor: pointer;\n        user-select: none;\n        display: inline-block;\n        position: relative;\n        margin-right: 20px;\n        font-weight: bold;\n        margin-bottom: 20px;\n        width: 220px;\n        flex: 0 0 220px;\n        border: 1px solid #e0e0e0;\n        border-radius: 4px;\n        overflow: hidden;\n      "],["\n        cursor: pointer;\n        user-select: none;\n        display: inline-block;\n        position: relative;\n        margin-right: 20px;\n        font-weight: bold;\n        margin-bottom: 20px;\n        width: 220px;\n        flex: 0 0 220px;\n        border: 1px solid #e0e0e0;\n        border-radius: 4px;\n        overflow: hidden;\n      "]),c=r(["\n          margin: 14px;\n        "],["\n          margin: 14px;\n        "]),s=r(["\n              position: absolute;\n              top: 8px;\n              right: 8px;\n            "],["\n              position: absolute;\n              top: 8px;\n              right: 8px;\n            "]),l=r(["\n              text-overflow: ellipsis;\n              white-space: nowrap;\n              overflow: hidden;\n              width: 100%;\n              max-width: 100%;\n              display: inline-block;\n              margin-bottom: 7px;\n              font-size: 13px;\n            "],["\n              text-overflow: ellipsis;\n              white-space: nowrap;\n              overflow: hidden;\n              width: 100%;\n              max-width: 100%;\n              display: inline-block;\n              margin-bottom: 7px;\n              font-size: 13px;\n            "]),u=r(["\n              font-size: 12px;\n              opacity: 0.75;\n              margin-bottom: 7px;\n            "],["\n              font-size: 12px;\n              opacity: 0.75;\n              margin-bottom: 7px;\n            "]);t.a=function(e){var t=e.thumbnail,n=e.title,r=e.footer,d=e.badge,p=e.before,f=e.after;return Object(o.b)("div",i({className:"mine-cloudvod__video-thumb",css:Object(o.a)(a)},e),!!p&&p,!!t&&t,Object(o.b)("div",{css:Object(o.a)(c)},!!d&&Object(o.b)("div",{css:Object(o.a)(s)},d),!!n&&Object(o.b)("span",{css:Object(o.a)(l)},n),!!r&&Object(o.b)("div",{css:Object(o.a)(u)},r)),!!f&&f)}},function(e,t,n){"use strict";var r=n(0),o=wp.components,i=o.Flex,a=o.FlexBlock,c=o.Spinner;t.a=function(e){var t=e.className;return Object(r.b)(i,{className:t},Object(r.b)(a,{css:{textAlign:"center"}},Object(r.b)(c,null)))}},function(e,t,n){"use strict";var r=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),__=wp.i18n.__,o=wp.components.Button,i=wp.element,a=i.useState,c=i.useEffect,s=wp.data.useSelect;t.a=function(e){var t=e.onChoose,n=a(null),i=r(n,2),l=i[0],u=i[1],d=a(!1),p=r(d,2),f=p[0],m=p[1],h=s(function(e){return e("mine-cloudvod/vod").ui("selectedId")}),v=s(function(e){return e("mine-cloudvod/vod").videos()});return c(function(){u(h?v.find(function(e){return e.Vid===h}):null)},[v,h]),c(function(){if(l&&"Normal"==l.Status)return void m(!0);m(l&&"Normal"==l.Status)},[l]),wp.element.createElement(o,{isPrimary:!0,disabled:!f,onClick:function(){return t(l)}},f?__("Choose","mine-cloudvod"):__("Please Choose...","mine-cloudvod"))}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(0),i=r(["\n        width: 100%;\n        height: 100%;\n        max-width: calc(100% - 32px);\n        max-height: calc(100% - 32px);\n\n        .components-modal__content {\n          position: relative;\n          display: flex;\n          flex-direction: column;\n        }\n      "],["\n        width: 100%;\n        height: 100%;\n        max-width: calc(100% - 32px);\n        max-height: calc(100% - 32px);\n\n        .components-modal__content {\n          position: relative;\n          display: flex;\n          flex-direction: column;\n        }\n      "]),a=r(['\n          @media screen and (min-width: 780px) {\n            margin: -24px;\n            display: grid;\n            flex: 1;\n            max-height: calc(100vh - 68px);\n            grid-template-columns: 1fr 1fr minmax(0px, 267px);\n            grid-template-rows: minmax(50px, auto) 1fr 60px;\n            grid-template-areas:\n              "header header sidebar"\n              "main main sidebar"\n              "footer footer footer";\n            overflow: hidden;\n          }\n        '],['\n          @media screen and (min-width: 780px) {\n            margin: -24px;\n            display: grid;\n            flex: 1;\n            max-height: calc(100vh - 68px);\n            grid-template-columns: 1fr 1fr minmax(0px, 267px);\n            grid-template-rows: minmax(50px, auto) 1fr 60px;\n            grid-template-areas:\n              "header header sidebar"\n              "main main sidebar"\n              "footer footer footer";\n            overflow: hidden;\n          }\n        ']),c=r(["\n            grid-area: header;\n            padding: 24px 24px 12px 24px;\n          "],["\n            grid-area: header;\n            padding: 24px 24px 12px 24px;\n          "]),s=r(["\n              display: flex;\n              align-items: center;\n\n              > * {\n                margin-right: 10px;\n              }\n            "],["\n              display: flex;\n              align-items: center;\n\n              > * {\n                margin-right: 10px;\n              }\n            "]),l=r(["\n            grid-area: main;\n            display: grid;\n            overflow: hidden;\n\n            .components-drop-zone__provider {\n              overflow: hidden;\n              display: grid;\n            }\n\n            .components-drop-zone {\n              z-index: 99;\n            }\n          "],["\n            grid-area: main;\n            display: grid;\n            overflow: hidden;\n\n            .components-drop-zone__provider {\n              overflow: hidden;\n              display: grid;\n            }\n\n            .components-drop-zone {\n              z-index: 99;\n            }\n          "]),u=r(["\n            display: none;\n            grid-area: sidebar;\n            padding: 0 16px;\n            z-index: 75;\n            background: #f3f3f3;\n            border-left: 1px solid #ddd;\n            overflow: auto;\n\n            @media screen and (min-width: 780px) {\n              display: block;\n            }\n\n            .sidebar-content {\n              padding: 16px 0;\n            }\n          "],["\n            display: none;\n            grid-area: sidebar;\n            padding: 0 16px;\n            z-index: 75;\n            background: #f3f3f3;\n            border-left: 1px solid #ddd;\n            overflow: auto;\n\n            @media screen and (min-width: 780px) {\n              display: block;\n            }\n\n            .sidebar-content {\n              padding: 16px 0;\n            }\n          "]),d=r(["\n            grid-area: footer;\n            border-top: 1px solid #ddd;\n            display: flex;\n            align-items: center;\n            justify-content: flex-end;\n            padding: 8px;\n          "],["\n            grid-area: footer;\n            border-top: 1px solid #ddd;\n            display: flex;\n            align-items: center;\n            justify-content: flex-end;\n            padding: 8px;\n          "]),__=wp.i18n.__,p=wp.components.Modal;t.a=function(e){var t=e.onClose,n=e.title,r=e.header,f=e.error,m=e.mainContent,h=e.sidebar,v=e.footer;return Object(o.b)(p,{title:n||__("Add Media","mine-cloudvod"),onRequestClose:t,css:Object(o.a)(i),overlayClassName:"mine-cloudvod__modal-overlay"},Object(o.b)("div",{css:Object(o.a)(a),"data-cy":"media-modal"},Object(o.b)("div",{css:Object(o.a)(c)},Object(o.b)("div",{css:Object(o.a)(s)},r),f),Object(o.b)("div",{css:Object(o.a)(l)},m),Object(o.b)("div",{css:Object(o.a)(u)},h),Object(o.b)("div",{css:Object(o.a)(d)},v)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(32)},function(e,t,n){"use strict";var r=n(33),o=n(34),i=(n.n(o),n(35),n(69),n(93),n(96)),a=(n.n(i),n(8)),c=(n.n(a),n(97),n(99),wp.element.render);jQuery(function(){jQuery.post(mcv_nonce.ajaxUrl,{action:"mcv_sync_endtime",nonce:mcv_nonce.et},function(e){"1"==e.status&&(window.mcv_nonce.endtime=new Date(e.data.endtime).getTime()/1e3)},"json")}),jQuery("body").append('<div id="mcv-plugin-app"></div>'),c(wp.element.createElement(r.a,null),document.getElementById("mcv-plugin-app"))},function(e,t,n){"use strict";var __=wp.i18n.__,r=wp.components,o=r.Modal,i=r.Button,a=wp.data,c=a.dispatch,s=a.useSelect;t.a=function(){var e=function(){c("mine-cloudvod/vod").setUI("proFeature",!1)};return s(function(e){return e("mine-cloudvod/vod").ui("proFeature")})?wp.element.createElement(o,{title:__("Pro Feature","mine-cloudvod"),onRequestClose:e},wp.element.createElement("h2",null,"Unlock Mine CloudVoD"),wp.element.createElement("p",null,__("Get this feature and more with the Pro version of Mine CloudVod!","mine-cloudvod")),wp.element.createElement(i,{href:mcv_nonce.buynow,target:"_blank",isPrimary:!0},__("Buy Now","mine-cloudvod")),wp.element.createElement(i,{href:"https://www.zwtt8.com/docs-category/mine-cloudvod/",target:"_blank"},__("Learn More","mine-cloudvod"))):""}},function(e,t){},function(e,t,n){"use strict";var r=n(36),__=wp.i18n.__,o=wp.blocks,i=o.registerBlockType,a=(o.unregisterBlockType,wp.plugins),c=(a.registerPlugin,a.unregisterPlugin,wp.data),s=(c.select,c.dispatch,wp.element.render,{title:{type:"array",source:"children",selector:"p"},source:{type:"string"},oss:{type:Object,default:{key:!1,bucket:!1}},width:{type:"string",default:"100%"},height:{type:"string",default:"500px"},videoId:{type:"string"},thumbnail:{type:"string"},autoplay:{type:Boolean},live:{type:Boolean,default:!1},slide:{type:Boolean,default:void 0},slidetext:{type:"string"},markers:{type:Array,default:[]},captions:{type:Array,items:{type:"object"},default:[]},countdown:{type:Date,default:new Date},countdowntips:{type:"string"}});i("mine-cloudvod/aliyun-vod",{title:__("ApsaraVideo VOD","mine-cloudvod"),description:__("Embed videos from aliyun vod.","mine-cloudvod"),icon:wp.element.createElement("svg",{width:"28",height:"28",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",fill:"none",class:"mine-block-icon"},wp.element.createElement("path",{d:"M606.933 594.645a18.688 18.688 0 0 1-9.6-16.618V442.688c0-6.89 3.606-13.163 9.6-16.619 5.974-3.413 13.142-3.413 19.136 0l117.27 67.627c5.973 3.413 9.557 9.728 9.557 16.597a19.03 19.03 0 0 1-9.557 16.598l-117.27 67.754a19.541 19.541 0 0 1-19.136 0"}),wp.element.createElement("path",{d:"M976.299 501.397a316.885 316.885 0 0 0-88.022-228.458 318.507 318.507 0 0 0-225.13-99.371c-111.211-2.773-214.998 51.968-275.968 145.579l-6.315 9.685-9.941-5.867a30.23 30.23 0 0 0-9.216-3.776 262.976 262.976 0 0 0-38.635-2.901c-142.87 0-259.093 116.224-259.093 259.05 0 142.849 116.224 259.073 259.093 259.073 92.928 0 176.853-48.512 223.424-127.872H461.44a190.293 190.293 0 0 1-138.155 59.2c-105.216 0-190.805-85.568-190.805-190.763s85.59-190.784 190.805-190.784c5.27 0 10.582 0.213 15.702 0.832l14.272 1.707-4.118 13.738a332.501 332.501 0 0 0-13.824 80.768l-0.17 12.822v85.226l89.45-90.24a229.675 229.675 0 0 1 71.339-162.304c44.715-42.773 103.381-65.28 165.184-64.106a229.44 229.44 0 0 1 162.005 71.338 229.824 229.824 0 0 1 64.15 165.184C884.587 621.696 784.34 721.835 662.4 725.205l-62.016 89.664 61.355-0.149c172.394-2.88 310.677-140.523 314.581-313.323"})),category:"mine",keywords:[__("ApsaraVideo VOD","mine-cloudvod"),__("mine cloudvod","mine-cloudvod"),__("VOD","mine-cloudvod")],attributes:s,edit:r.a,save:function(){return null}})},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(1),a=n.n(i),c=(n(9),n(42)),s=n(62),l=n(4),u=n(24),d=n(25),p=this,f=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=wp.components,h=m.Button,v=m.Disabled,g=(m.DropdownMenu,m.Spinner),y=m.Toolbar,b=m.withNotices,w=(m.Notice,m.BaseControl),_=m.Placeholder,x=m.ToggleControl,O=m.PanelBody,C=m.TextControl,E=m.DateTimePicker,k=wp.blockEditor,j=k.BlockControls,S=k.InspectorControls,T=(k.BlockAlignmentToolbar,k.MediaPlaceholder,k.MediaReplaceFlow,k.MediaUpload),A=k.MediaUploadCheck,__=(k.AlignmentToolbar,k.URLPopover,wp.i18n.__),R=wp.element,P=R.useState,D=R.Fragment,I=R.useEffect,B=wp.data.dispatch;t.a=b(function(e){function t(){confirm(__("Replace this "+(W?"OSS":"VoD")+" video?","mine-cloudvod"))&&(ee(W?"oss":"vod"),B("mine-cloudvod/vod").setUI("pageNo",1),M({videoId:"",oss:"",source:""}))}function n(e){M({thumbnail:e.url})}function i(){M({thumbnail:""})}function m(){return wp.data.dispatch("core/editor").lockPostSaving("mine-aliplayer")}function b(){return wp.data.dispatch("core/editor").unlockPostSaving("mine-aliplayer")}function k(e){M(Object.assign({videoId:e.videoId},e.coverURL?{thumbnail:e.coverURL}:{})),oe(!0),m(),ge(Object.assign({videoId:e.videoId,title:e.title},e.coverURL?{thumbnail:e.coverURL}:{})).catch(function(e){M({videoId:""}),console.error(e)}).finally(function(){b(),oe(!1)})}function R(e){oe(!0),m(),ye({key:e.key,bucket:e.bucket}).catch(function(e){M({oss:""}),console.error(e)}).finally(function(){b(),oe(!1)})}var N=e.attributes,M=e.setAttributes;e.noticeOperations;mcv_nonce.endtime<Date.parse(new Date)/1e3&&B("mine-cloudvod/vod").setUI("proFeature",!0);var U=N.source,L=N.width,F=N.height,z=N.videoId,H=N.thumbnail,V=N.autoplay,K=N.captions,q=N.slide,W=N.oss,$=N.live,X=N.countdown,G=N.slidetext,Q=N.countdowntips,Y=P(""),J=f(Y,2),Z=J[0],ee=J[1],te=P(!1),ne=f(te,2),re=ne[0],oe=ne[1],ie=P(!!X),ae=f(ie,2),ce=ae[0],se=ae[1],le=P({source:U||void 0,vid:z||void 0,oss:W.key?W:void 0,cover:H||void 0,width:L||"100%",height:"500px",autoplay:V||!1,isLive:$,rePlay:!1,playsinline:!0,preload:!0,controlBarVisibility:"hover",useH5Prism:!0,components:[{name:"RateComponent",type:AliPlayerComponent.RateComponent}]}),ue=f(le,2),de=ue[0],pe=ue[1];I(function(){void 0==q&&M({slide:!!window.mcv_aliplayer_config.slide})},[]),I(function(){if(U){var e;pe((e={source:U||void 0,vid:z||void 0,oss:W.key?W:void 0,cover:H||void 0,width:L||"100%",height:"500px",autoplay:V||!1,isLive:$,rePlay:!1,playsinline:!0,preload:!0,controlBarVisibility:"hover",useH5Prism:!0},o(e,"cover",H),o(e,"components",[{name:"RateComponent",type:AliPlayerComponent.RateComponent}]),e))}},[U,H,V,L,F,K,q,G]);var fe=function(e){return M({width:e})},me=function(e){return M({height:e})},he=function(e){return function(t){M(o({},e,t))}},ve=wp.element.createElement(D,null,wp.element.createElement(j,null,wp.element.createElement(d.a,{captions:K,onChange:function(e){M({captions:e})}}),wp.element.createElement(y,null,wp.element.createElement(h,{onClick:function(){return t()}},__("Replace")))),(!!z||!!W||!!U)&&wp.element.createElement(S,null,wp.element.createElement(O,{title:__("Video Markers","mine-cloudvod"),initialOpen:!1},wp.element.createElement(u.a,{setAttributes:M,attributes:N})),wp.element.createElement(O,{title:__("Aliplayer Settings","mine-cloudvod")},wp.element.createElement(x,{label:__("Autoplay","mine-cloudvod"),onChange:he("autoplay"),checked:V}),!!U&&wp.element.createElement(x,{label:__("Live","mine-cloudvod"),onChange:he("live"),checked:$}),wp.element.createElement(C,{type:"string",label:__("Width"),value:void 0!==L?L:"",placeholder:"100%",onChange:fe}),wp.element.createElement(C,{type:"string",label:__("Height"),value:void 0!==F?F:"",placeholder:"500px or auto",help:__("The auto will be adaptive height.","mine-cloudvod"),onChange:me}),wp.element.createElement(A,null,wp.element.createElement(w,{className:"editor-video-poster-control"},wp.element.createElement(w.VisualLabel,null,wp.element.createElement("p",null,__("Cover image","mine-cloudvod"))),wp.element.createElement("p",null,H?wp.element.createElement("img",{src:H}):""),wp.element.createElement(T,{title:__("Select cover image","mine-cloudvod"),onSelect:n,allowedTypes:["image"],render:function(e){var t=e.open;return wp.element.createElement(h,{isPrimary:!0,onClick:t},H?__("Replace","mine-cloudvod"):__("Select","mine-cloudvod"))}}),!!H&&wp.element.createElement(h,{onClick:i,isTertiary:!0},__("Remove","mine-cloudvod"))))),wp.element.createElement(O,{title:__("Slide","mine-cloudvod"),initialOpen:!1},wp.element.createElement(x,{label:__("Enable","mine-cloudvod"),onChange:he("slide"),checked:q,help:__("The global configuration is used by default and can be turned off individually.","mine-cloudvod")}),q&&wp.element.createElement(C,{type:"string",label:__("Scroll Text","mine-cloudvod"),value:void 0!==G?G:"",placeholder:__("Empty means to use global configuration.","mine-cloudvod"),onChange:function(e){return M({slidetext:e})},help:__("Can be dynamically replaced with these labels: {username} {userid} {userip} {useremail} {usernickname}","mine-cloudvod")})),wp.element.createElement(O,{title:__("Countdown Timer","mine-cloudvod"),initialOpen:!1},wp.element.createElement(x,{label:__("Enable","mine-cloudvod"),onChange:function(e){return se(e)},checked:ce}),ce&&wp.element.createElement(C,{type:"string",label:__("Text","mine-cloudvod"),value:void 0!==Q?Q:"",onChange:function(e){return M({countdowntips:e})},help:__("Enter the text you want to appear on the countdown page","mine-cloudvod")}),ce&&wp.element.createElement(E,{currentDate:X,onChange:function(e){return M({countdown:e})}})))),ge=function(){var e=r(a.a.mark(function e(t){var n=t.videoId,r=t.thumbnail,o=t.title;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return M({videoId:""}),e.abrupt("return");case 3:M({videoId:n,thumbnail:r,title:o}),ee("");case 5:case"end":return e.stop()}},e,p)}));return function(_x){return e.apply(this,arguments)}}(),ye=function(){var e=r(a.a.mark(function e(t){var n=t.key,r=t.bucket;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return M({oss:""}),e.abrupt("return");case 3:M({oss:{key:n,bucket:r}}),ee("");case 5:case"end":return e.stop()}},e,p)}));return function(t){return e.apply(this,arguments)}}();return z||W.key||U?(re&&wp.element.createElement(_,{className:"mine-cloudvod__placeholder is-loading"},wp.element.createElement(g,null)),wp.element.createElement(D,null,ve,wp.element.createElement("figure",{className:"wp-block-video"},wp.element.createElement(v,null,wp.element.createElement(l.a,{config:de}))))):wp.element.createElement("div",null,wp.element.createElement(_,{label:__("ApsaraVideo VOD","mine-cloudvod"),instructions:__("Upload or select Aliyun vod.","mine-cloudvod"),icon:wp.element.createElement("svg",{width:"28",height:"28",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",fill:"none",class:"mine-block-icon"},wp.element.createElement("path",{d:"M606.933 594.645a18.688 18.688 0 0 1-9.6-16.618V442.688c0-6.89 3.606-13.163 9.6-16.619 5.974-3.413 13.142-3.413 19.136 0l117.27 67.627c5.973 3.413 9.557 9.728 9.557 16.597a19.03 19.03 0 0 1-9.557 16.598l-117.27 67.754a19.541 19.541 0 0 1-19.136 0"}),wp.element.createElement("path",{d:"M976.299 501.397a316.885 316.885 0 0 0-88.022-228.458 318.507 318.507 0 0 0-225.13-99.371c-111.211-2.773-214.998 51.968-275.968 145.579l-6.315 9.685-9.941-5.867a30.23 30.23 0 0 0-9.216-3.776 262.976 262.976 0 0 0-38.635-2.901c-142.87 0-259.093 116.224-259.093 259.05 0 142.849 116.224 259.073 259.093 259.073 92.928 0 176.853-48.512 223.424-127.872H461.44a190.293 190.293 0 0 1-138.155 59.2c-105.216 0-190.805-85.568-190.805-190.763s85.59-190.784 190.805-190.784c5.27 0 10.582 0.213 15.702 0.832l14.272 1.707-4.118 13.738a332.501 332.501 0 0 0-13.824 80.768l-0.17 12.822v85.226l89.45-90.24a229.675 229.675 0 0 1 71.339-162.304c44.715-42.773 103.381-65.28 165.184-64.106a229.44 229.44 0 0 1 162.005 71.338 229.824 229.824 0 0 1 64.15 165.184C884.587 621.696 784.34 721.835 662.4 725.205l-62.016 89.664 61.355-0.149c172.394-2.88 310.677-140.523 314.581-313.323"}))},wp.element.createElement(D,null,wp.element.createElement(h,{isPrimary:!0,onClick:function(){return ee("vod")}},__("Add/Select AliyunVod Video","mine-cloudvod")),wp.element.createElement(h,{isPrimary:!0,onClick:function(){return ee("oss")}},__("Add/Select Aliyun OSS","mine-cloudvod")))),"vod"==Z?wp.element.createElement(c.a,{onClose:function(){return ee("")},onChoose:k}):null,"oss"==Z?wp.element.createElement(s.a,{onClose:function(){return ee("")},onChoose:R}):null)})},function(e,t,n){var r=function(){return this}()||Function("return this")(),o=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,i=o&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(38),o)r.regeneratorRuntime=i;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";function n(e,t,n,r){var i=t&&t.prototype instanceof o?t:o,a=Object.create(i.prototype),c=new f(r||[]);return a._invoke=l(e,n,c),a}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function o(){}function i(){}function a(){}function c(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function s(e){function t(n,o,i,a){var c=r(e[n],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"===typeof l&&y.call(l,"__await")?Promise.resolve(l.__await).then(function(e){t("next",e,i,a)},function(e){t("throw",e,i,a)}):Promise.resolve(l).then(function(e){s.value=e,i(s)},a)}a(c.arg)}function n(e,n){function r(){return new Promise(function(r,o){t(e,n,r,o)})}return o=o?o.then(r,r):r()}var o;this._invoke=n}function l(e,t,n){var o=E;return function(i,a){if(o===j)throw new Error("Generator is already running");if(o===S){if("throw"===i)throw a;return h()}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var s=u(c,n);if(s){if(s===T)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===E)throw o=S,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=j;var l=r(e,t,n);if("normal"===l.type){if(o=n.done?S:k,l.arg===T)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=S,n.method="throw",n.arg=l.arg)}}}function u(e,t){var n=e.iterator[t.method];if(n===v){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=v,u(e,t),"throw"===t.method))return T;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return T}var o=r(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,T;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=v),t.delegate=null,T):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,T)}function d(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function p(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(d,this),this.reset(!0)}function m(e){if(e){var t=e[w];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(y.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=v,t.done=!0,t};return r.next=r}}return{next:h}}function h(){return{value:v,done:!0}}var v,g=Object.prototype,y=g.hasOwnProperty,b="function"===typeof Symbol?Symbol:{},w=b.iterator||"@@iterator",_=b.asyncIterator||"@@asyncIterator",x=b.toStringTag||"@@toStringTag",O="object"===typeof e,C=t.regeneratorRuntime;if(C)return void(O&&(e.exports=C));C=t.regeneratorRuntime=O?e.exports:{},C.wrap=n;var E="suspendedStart",k="suspendedYield",j="executing",S="completed",T={},A={};A[w]=function(){return this};var R=Object.getPrototypeOf,P=R&&R(R(m([])));P&&P!==g&&y.call(P,w)&&(A=P);var D=a.prototype=o.prototype=Object.create(A);i.prototype=D.constructor=a,a.constructor=i,a[x]=i.displayName="GeneratorFunction",C.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},C.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,x in e||(e[x]="GeneratorFunction")),e.prototype=Object.create(D),e},C.awrap=function(e){return{__await:e}},c(s.prototype),s.prototype[_]=function(){return this},C.AsyncIterator=s,C.async=function(e,t,r,o){var i=new s(n(e,t,r,o));return C.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},c(D),D[x]="Generator",D[w]=function(){return this},D.toString=function(){return"[object Generator]"},C.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},C.values=m,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(p),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return i.type="throw",i.arg=e,n.next=t,r&&(n.method="next",n.arg=v),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=y.call(o,"catchLoc"),c=y.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&y.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,T):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),T},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),p(n),T}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;p(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:m(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=v),T}}}(function(){return this}()||Function("return this")())},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i=wp.data.combineReducers,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"SET_VIDEOS":return t.value;case"ADD_VIDEOS":return[].concat(o(e),o(t.value));case"ADD_VIDEO":return[].concat(o(e),[t.value]);case"REMOVE_VIDEO":return e.filter(function(e){return e.videoId!==t.value.videoId})}return e},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"SET_BUCKETS":return t.value}return e},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"SET_UPLOADS":return t.value;case"ADD_UPLOADS":return[].concat(o(e),o(t.value));case"ADD_UPLOAD":return[].concat(o(e),[t.value]);case"UPDATE_UPLOAD":return e.map(function(e,n){return e.id!==t.value.id?e:Object.assign({},e,t.value)});case"REMOVE_UPLOAD":return e.filter(function(e){return e!==t.value})}return e},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,videosFetched:!1,bucketsFetched:!1,createCollection:!1,selectedId:null},t=arguments[1];switch(t.type){case"SET_LOADING":return Object.assign({},e,{loading:t.value});case"SET_VIDEOS_FETCHED":return Object.assign({},e,{videosFetched:t.value});case"SET_BUCKETS_FETCHED":return Object.assign({},e,{bucketsFetched:t.value});case"SET_UI_ITEM":return Object.assign({},e,r({},t.item,t.value))}return e},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"ADD_ERROR":return[].concat(o(e),[t.value]);case"REMOVE_ERROR":return e.filter(function(e){return e!==t.value})}return e};t.a=i({videosReducer:a,uploadsReducer:s,UIReducer:l,errorReducer:u,bucketsReducer:c})},function(e,t,n){"use strict";function r(e){return e.videosReducer||[]}function o(e){return e.bucketsReducer||[]}function i(e){return e.uploadsReducer||[]}function a(e){return e.UIReducer.loading||!1}function c(e){return e.errorReducer||[]}function s(e){return e.UIReducer.videosFetched||!1}function l(e){return e.UIReducer.bucketsFetched||!1}function u(e,t){return e.UIReducer[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.videos=r,t.buckets=o,t.uploads=i,t.isLoading=a,t.errors=c,t.videosFetched=s,t.bucketsFetched=l,t.ui=u},function(e,t,n){"use strict";function r(e){return{type:"SET_VIDEOS",value:e}}function o(e){return{type:"SET_BUCKETS",value:e}}function i(e){return{type:"ADD_VIDEOS",value:e}}function a(e){return{type:"REMOVE_VIDEO",value:e}}function c(e){return{type:"SET_UPLOADS",value:e}}function s(e){return{type:"ADD_UPLOADS",value:e}}function l(e){return{type:"REMOVE_UPLOAD",value:e}}function u(e){return{type:"SET_VIDEOS_FETCHED",value:e}}function d(e){return{type:"SET_BUCKETS_FETCHED",value:e}}function p(e){return{type:"SET_LOADING",value:e}}function f(e,t){return{type:"SET_UI_ITEM",item:e,value:t}}function m(e){return{type:"ADD_ERROR",value:e}}function h(e){return{type:"REMOVE_ERROR",value:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setVideos=r,t.setBuckets=o,t.addVideos=i,t.removeVideo=a,t.setUploads=c,t.addUploads=s,t.removeUpload=l,t.setVideosFetched=u,t.setBucketsFetched=d,t.setLoading=p,t.setUI=f,t.addError=m,t.removeError=h},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(0),i=n(52),a=n(53),c=n(55),s=n(57),l=n(59),u=n(20),d=n(61),p=n(22),f=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=r(["\n           overflow: auto;\n           display: flex;\n           flex-direction: column;\n         "],["\n           overflow: auto;\n           display: flex;\n           flex-direction: column;\n         "]),h=r(["\n             padding: 12px 24px;\n             overflow: auto;\n             display: flex;\n             flex-direction: column;\n           "],["\n             padding: 12px 24px;\n             overflow: auto;\n             display: flex;\n             flex-direction: column;\n           "]),v=r(["\n                     margin: 0 0 20px 0;\n                   "],["\n                     margin: 0 0 20px 0;\n                   "]),g=r(["\n               display: flex;\n               align-items: stretch;\n             "],["\n               display: flex;\n               align-items: stretch;\n             "]),__=wp.i18n.__,y=wp.components,b=(y.Button,y.DropZone),w=y.DropZoneProvider,_=y.Notice,x=wp.element,O=x.useState,C=x.useEffect,E=(x.Fragment,wp.data),k=E.dispatch,j=E.useSelect;t.a=function(e){var t=e.onClose,n=e.onChoose,r=O(""),y=f(r,2),x=y[0],E=y[1],S=j(function(e){return e("mine-cloudvod/vod").uploads()}),T=j(function(e){return e("mine-cloudvod/vod").errors()}),A=j(function(e){return e("mine-cloudvod/vod").ui("currentCategory")});C(function(){k("mine-cloudvod/vod").setVideosFetched(!1),k("mine-cloudvod/vod").setVideos([])},[]);var R=function(){if(S.length){return void(confirm("Discard your uploads?")&&(t(),k("mine-cloudvod/vod").setUploads([])))}k("mine-cloudvod/vod").setUI("pageNo",1),t()},P=function(e){for(var t=0;t<e.length;t++)e[t].id=t+S.length;k("mine-cloudvod/vod").addUploads(e)},D=__("Select or Upload AliyunVod Video","mine-cloudvod"),I=new window.AliyunUpload.Vod({timeout:6e4,partSize:2097152,parallel:5,retryCount:3,retryDuration:2,region:mcv_alivod_config.endpoint,userId:mcv_alivod_config.userId,addFileSuccess:function(e){console.log("addFileSuccess: "+e.file.name),I._uploadList.length==S.length&&I.startUpload()},onUploadstarted:function(e){if(e.videoId){var t=ajaxurl;jQuery.post(t,{action:"mcv_alivod_upload",op:"refreshuvinfo",endpoint:this.region,nonce:mcv_alivod_config.nonce,FileName:e.file.name,VideoId:e.videoId},function(t){var n=t.UploadAuth,r=t.UploadAddress,o=t.VideoId;I.setUploadAuthAndAddress(e,n,r,o)},"json")}else{var n=ajaxurl;jQuery.post(n,{action:"mcv_alivod_upload",op:"getuvinfo",endpoint:this.region,nonce:mcv_alivod_config.nonce,FileName:e.file.name,FileSize:e.file.size,cateId:A.cateId},function(t){if(0==t.status)E(t.msg);else{var n=t.UploadAuth,r=t.UploadAddress,o=t.VideoId;I.setUploadAuthAndAddress(e,n,r,o)}},"json"),console.log("onUploadStarted:"+e.file.name+", endpoint:"+e.region+", bucket:"+e.bucket+", object:"+e.object)}},onUploadSucceed:function(e){jQuery.post(ajaxurl,{action:"mcv_alivod_upload",op:"uvsucceed",endpoint:this.region,nonce:mcv_alivod_config.nonce,FileName:e.file.name,VideoId:e.videoId,from:"block"},function(e){},"json"),console.log(e)},onUploadFailed:function(e,t,n){console.log("onUploadFailed: file:"+e.file.name+",code:"+t+", message:"+n)},onUploadCanceled:function(e,t,n){console.log("Canceled file: "+e.file.name+", code: "+t+", message:"+n)},onUploadProgress:function(e,t,n){var r=Math.ceil(100*n);jQuery("#mcv_progress_"+e.file.id).css("width",r+"%")},onUploadTokenExpired:function(e){var t=ajaxurl;jQuery.post(t,{action:"mcv_alivod_upload",op:"refreshuvinfo",endpoint:this.region,nonce:mcv_alivod_config.nonce,FileName:e.file.name,VideoId:e.videoId},function(e){var t=e.UploadAuth;I.resumeUploadWithAuth(t),console.log("upload expired and resume upload with uploadauth "+t)},"json")},onUploadEnd:function(e){k("mine-cloudvod/vod").setUploads([]),setTimeout(function(){k("mine-cloudvod/vod").setVideosFetched(!1)},2e3),console.log("onUploadEnd: uploaded all the files")}}),B=Object(o.b)(c.a,{afterUpload:Object(o.b)(d.a,{uploader:I,uploads:S,error:x})}),N=Object(o.b)(i.a,null),M=Object(o.b)(u.a,{onChoose:n});return Object(o.b)(p.a,{title:D,header:B,mainContent:function(){return Object(o.b)(w,{css:Object(o.a)(m)},Object(o.b)("div",{css:Object(o.a)(h)},!!T.length&&T.map(function(e){return Object(o.b)(_,{css:Object(o.a)(v),status:"error",onRemove:function(){return k("mine-cloudvod/vod").removeError(e)}},e)}),A?Object(o.b)(s.a,null):Object(o.b)(l.a,null),Object(o.b)("div",{css:Object(o.a)(g)},Object(o.b)(a.a,null)),Object(o.b)(b,{label:"Drop files",onFilesDrop:P})))}(),onClose:R,footer:M,sidebar:N})}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e,t){return(((t<<2^s(e,0))<<2^s(e,1))<<2^s(e,2))<<2^s(e,3)}function o(e){return e.trim()}function i(e,t){return(e=t.exec(e))?e[0]:e}function a(e,t,n){return e.replace(t,n)}function c(e,t){return e.indexOf(t)}function s(e,t){return 0|e.charCodeAt(t)}function l(e,t,n){return e.slice(t,n)}function u(e){return e.length}function d(e){return e.length}function p(e,t){return t.push(e),e}function f(e,t){return e.map(t).join("")}function m(e,t,n,r,o,i,a){return{value:e,root:t,parent:n,type:r,props:o,children:i,line:J,column:Z,length:a,return:""}}function h(e,t,n){return m(e,t.root,t.parent,n,t.props,t.children,0)}function v(){return ne}function g(){return ne=te>0?s(re,--te):0,Z--,10===ne&&(Z=1,J--),ne}function y(){return ne=te<ee?s(re,te++):0,Z++,10===ne&&(Z=1,J++),ne}function b(){return s(re,te)}function w(){return te}function _(e,t){return l(re,e,t)}function x(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function O(e){return J=Z=1,ee=u(re=e),te=0,[]}function C(e){return re="",e}function E(e){return o(_(te-1,S(91===e?e+2:40===e?e+1:e)))}function k(e){for(;(ne=b())&&ne<33;)y();return x(e)>2||x(ne)>3?"":" "}function j(e,t){for(;--t&&y()&&!(ne<48||ne>102||ne>57&&ne<65||ne>70&&ne<97););return _(e,w()+(t<6&&32==b()&&32==y()))}function S(e){for(;y();)switch(ne){case e:return te;case 34:case 39:return S(34===e||39===e?e:ne);case 40:41===e&&S(e);break;case 92:y()}return te}function T(e,t){for(;y()&&e+ne!==57&&(e+ne!==84||47!==b()););return"/*"+_(t,te-1)+"*"+Y(47===e?e:y())}function A(e){for(;!x(b());)y();return _(e,te)}function R(e){return C(P("",null,null,null,[""],e=O(e),0,[0],e))}function P(e,t,n,r,o,i,c,s,l){for(var d=0,f=0,m=c,h=0,v=0,_=0,x=1,O=1,C=1,S=0,R="",N=o,M=i,U=r,L=R;O;)switch(_=S,S=y()){case 34:case 39:case 91:case 40:L+=E(S);break;case 9:case 10:case 13:case 32:L+=k(_);break;case 92:L+=j(w()-1,7);continue;case 47:switch(b()){case 42:case 47:p(I(T(y(),w()),t,n),l);break;default:L+="/"}break;case 123*x:s[d++]=u(L)*C;case 125*x:case 59:case 0:switch(S){case 0:case 125:O=0;case 59+f:v>0&&u(L)-m&&p(v>32?B(L+";",r,n,m-1):B(a(L," ","")+";",r,n,m-2),l);break;case 59:L+=";";default:if(p(U=D(L,t,n,d,f,o,s,R,N=[],M=[],m),i),123===S)if(0===f)P(L,t,U,U,N,i,m,s,M);else switch(h){case 100:case 109:case 115:P(e,U,U,r&&p(D(e,U,U,0,0,o,s,R,o,N=[],m),M),o,M,m,s,r?N:M);break;default:P(L,U,U,U,[""],M,m,s,M)}}d=f=v=0,x=C=1,R=L="",m=c;break;case 58:m=1+u(L),v=_;default:if(x<1)if(123==S)--x;else if(125==S&&0==x++&&125==g())continue;switch(L+=Y(S),S*x){case 38:C=f>0?1:(L+="\f",-1);break;case 44:s[d++]=(u(L)-1)*C,C=1;break;case 64:45===b()&&(L+=E(y())),h=b(),f=u(R=L+=A(w())),S++;break;case 45:45===_&&2==u(L)&&(x=0)}}return i}function D(e,t,n,r,i,c,s,u,p,f,h){for(var v=i-1,g=0===i?c:[""],y=d(g),b=0,w=0,_=0;b<r;++b)for(var x=0,O=l(e,v+1,v=Q(w=s[b])),C=e;x<y;++x)(C=o(w>0?g[x]+" "+O:a(O,/&\f/g,g[x])))&&(p[_++]=C);return m(e,t,n,0===i?W:u,p,f,h)}function I(e,t,n){return m(e,t,n,q,Y(v()),l(e,2,-2),0)}function B(e,t,n,r){return m(e,t,n,$,l(e,0,r),l(e,r+1,-1),r)}function N(e,t){switch(r(e,t)){case 5103:return K+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return K+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return K+e+V+e+H+e+e;case 6828:case 4268:return K+e+H+e+e;case 6165:return K+e+H+"flex-"+e+e;case 5187:return K+e+a(e,/(\w+).+(:[^]+)/,K+"box-$1$2"+H+"flex-$1$2")+e;case 5443:return K+e+H+"flex-item-"+a(e,/flex-|-self/,"")+e;case 4675:return K+e+H+"flex-line-pack"+a(e,/align-content|flex-|-self/,"")+e;case 5548:return K+e+H+a(e,"shrink","negative")+e;case 5292:return K+e+H+a(e,"basis","preferred-size")+e;case 6060:return K+"box-"+a(e,"-grow","")+K+e+H+a(e,"grow","positive")+e;case 4554:return K+a(e,/([^-])(transform)/g,"$1"+K+"$2")+e;case 6187:return a(a(a(e,/(zoom-|grab)/,K+"$1"),/(image-set)/,K+"$1"),e,"")+e;case 5495:case 3959:return a(e,/(image-set\([^]*)/,K+"$1$`$1");case 4968:return a(a(e,/(.+:)(flex-)?(.*)/,K+"box-pack:$3"+H+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+K+e+e;case 4095:case 3583:case 4068:case 2532:return a(e,/(.+)-inline(.+)/,K+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(u(e)-1-t>6)switch(s(e,t+1)){case 109:if(45!==s(e,t+4))break;case 102:return a(e,/(.+:)(.+)-([^]+)/,"$1"+K+"$2-$3$1"+V+(108==s(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?N(a(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==s(e,t+1))break;case 6444:switch(s(e,u(e)-3-(~c(e,"!important")&&10))){case 107:return a(e,":",":"+K)+e;case 101:return a(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+K+(45===s(e,14)?"inline-":"")+"box$3$1"+K+"$2$3$1"+H+"$2box$3")+e}break;case 5936:switch(s(e,t+11)){case 114:return K+e+H+a(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return K+e+H+a(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return K+e+H+a(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return K+e+H+e+e}return e}function M(e,t){for(var n="",r=d(e),o=0;o<r;o++)n+=t(e[o],o,e,t)||"";return n}function U(e,t,n,r){switch(e.type){case X:case $:return e.return=e.return||e.value;case q:return"";case W:e.value=e.props.join(",")}return u(n=M(e.children,r))?e.return=e.value+"{"+n+"}":""}function L(e){var t=d(e);return function(n,r,o,i){for(var a="",c=0;c<t;c++)a+=e[c](n,r,o,i)||"";return a}}function F(e){return function(t){t.root||(t=t.return)&&e(t)}}function z(e,t,n,r){if(!e.return)switch(e.type){case $:e.return=N(e.value,e.length);break;case G:return M([h(a(e.value,"@","@"+K),e,"")],r);case W:if(e.length)return f(e.props,function(t){switch(i(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return M([h(a(t,/:(read-\w+)/,":"+V+"$1"),e,"")],r);case"::placeholder":return M([h(a(t,/:(plac\w+)/,":"+K+"input-$1"),e,""),h(a(t,/:(plac\w+)/,":"+V+"$1"),e,""),h(a(t,/:(plac\w+)/,H+"input-$1"),e,"")],r)}return""})}}n.d(t,"a",function(){return q}),n.d(t,"b",function(){return O}),n.d(t,"c",function(){return R}),n.d(t,"d",function(){return C}),n.d(t,"e",function(){return E}),n.d(t,"f",function(){return Y}),n.d(t,"g",function(){return A}),n.d(t,"h",function(){return L}),n.d(t,"i",function(){return y}),n.d(t,"j",function(){return b}),n.d(t,"k",function(){return te}),n.d(t,"l",function(){return z}),n.d(t,"m",function(){return F}),n.d(t,"n",function(){return M}),n.d(t,"o",function(){return U}),n.d(t,"p",function(){return x});var H="-ms-",V="-moz-",K="-webkit-",q="comm",W="rule",$="decl",X="@import",G="@keyframes",Q=Math.abs,Y=String.fromCharCode,J=1,Z=1,ee=0,te=0,ne=0,re=""},function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}t.a=r},function(e,t,n){"use strict";(function(t){"production"===t.env.NODE_ENV?e.exports=n(47):e.exports=n(48)}).call(t,n(3))},function(e,t,n){"use strict";function r(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case f:case m:case s:case u:case l:case v:return e;default:switch(e=e&&e.$$typeof){case p:case h:case b:case y:case d:return e;default:return t}}case c:return t}}}function o(e){return r(e)===m}var i="function"===typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,c=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,d=i?Symbol.for("react.provider"):60109,p=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.async_mode"):60111,m=i?Symbol.for("react.concurrent_mode"):60111,h=i?Symbol.for("react.forward_ref"):60112,v=i?Symbol.for("react.suspense"):60113,g=i?Symbol.for("react.suspense_list"):60120,y=i?Symbol.for("react.memo"):60115,b=i?Symbol.for("react.lazy"):60116,w=i?Symbol.for("react.block"):60121,_=i?Symbol.for("react.fundamental"):60117,x=i?Symbol.for("react.responder"):60118,O=i?Symbol.for("react.scope"):60119;t.AsyncMode=f,t.ConcurrentMode=m,t.ContextConsumer=p,t.ContextProvider=d,t.Element=a,t.ForwardRef=h,t.Fragment=s,t.Lazy=b,t.Memo=y,t.Portal=c,t.Profiler=u,t.StrictMode=l,t.Suspense=v,t.isAsyncMode=function(e){return o(e)||r(e)===f},t.isConcurrentMode=o,t.isContextConsumer=function(e){return r(e)===p},t.isContextProvider=function(e){return r(e)===d},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===a},t.isForwardRef=function(e){return r(e)===h},t.isFragment=function(e){return r(e)===s},t.isLazy=function(e){return r(e)===b},t.isMemo=function(e){return r(e)===y},t.isPortal=function(e){return r(e)===c},t.isProfiler=function(e){return r(e)===u},t.isStrictMode=function(e){return r(e)===l},t.isSuspense=function(e){return r(e)===v},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===m||e===u||e===l||e===v||e===g||"object"===typeof e&&null!==e&&(e.$$typeof===b||e.$$typeof===y||e.$$typeof===d||e.$$typeof===p||e.$$typeof===h||e.$$typeof===_||e.$$typeof===x||e.$$typeof===O||e.$$typeof===w)},t.typeOf=r},function(e,t,n){"use strict";(function(e){"production"!==e.env.NODE_ENV&&function(){function e(e){return"string"===typeof e||"function"===typeof e||e===b||e===E||e===_||e===w||e===j||e===S||"object"===typeof e&&null!==e&&(e.$$typeof===A||e.$$typeof===T||e.$$typeof===x||e.$$typeof===O||e.$$typeof===k||e.$$typeof===P||e.$$typeof===D||e.$$typeof===I||e.$$typeof===R)}function n(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case g:var n=e.type;switch(n){case C:case E:case b:case _:case w:case j:return n;default:var r=n&&n.$$typeof;switch(r){case O:case k:case A:case T:case x:return r;default:return t}}case y:return t}}}function r(e){return X||(X=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),o(e)||n(e)===C}function o(e){return n(e)===E}function i(e){return n(e)===O}function a(e){return n(e)===x}function c(e){return"object"===typeof e&&null!==e&&e.$$typeof===g}function s(e){return n(e)===k}function l(e){return n(e)===b}function u(e){return n(e)===A}function d(e){return n(e)===T}function p(e){return n(e)===y}function f(e){return n(e)===_}function m(e){return n(e)===w}function h(e){return n(e)===j}var v="function"===typeof Symbol&&Symbol.for,g=v?Symbol.for("react.element"):60103,y=v?Symbol.for("react.portal"):60106,b=v?Symbol.for("react.fragment"):60107,w=v?Symbol.for("react.strict_mode"):60108,_=v?Symbol.for("react.profiler"):60114,x=v?Symbol.for("react.provider"):60109,O=v?Symbol.for("react.context"):60110,C=v?Symbol.for("react.async_mode"):60111,E=v?Symbol.for("react.concurrent_mode"):60111,k=v?Symbol.for("react.forward_ref"):60112,j=v?Symbol.for("react.suspense"):60113,S=v?Symbol.for("react.suspense_list"):60120,T=v?Symbol.for("react.memo"):60115,A=v?Symbol.for("react.lazy"):60116,R=v?Symbol.for("react.block"):60121,P=v?Symbol.for("react.fundamental"):60117,D=v?Symbol.for("react.responder"):60118,I=v?Symbol.for("react.scope"):60119,B=C,N=E,M=O,U=x,L=g,F=k,z=b,H=A,V=T,K=y,q=_,W=w,$=j,X=!1;t.AsyncMode=B,t.ConcurrentMode=N,t.ContextConsumer=M,t.ContextProvider=U,t.Element=L,t.ForwardRef=F,t.Fragment=z,t.Lazy=H,t.Memo=V,t.Portal=K,t.Profiler=q,t.StrictMode=W,t.Suspense=$,t.isAsyncMode=r,t.isConcurrentMode=o,t.isContextConsumer=i,t.isContextProvider=a,t.isElement=c,t.isForwardRef=s,t.isFragment=l,t.isLazy=u,t.isMemo=d,t.isPortal=p,t.isProfiler=f,t.isStrictMode=m,t.isSuspense=h,t.isValidElementType=e,t.typeOf=n}()}).call(t,n(3))},function(e,t,n){"use strict";function r(e){for(var t,n=0,r=0,o=e.length;o>=4;++r,o-=4)t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24,t=1540483477*(65535&t)+(59797*(t>>>16)<<16),t^=t>>>24,n=1540483477*(65535&t)+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(o){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n^=255&e.charCodeAt(r),n=1540483477*(65535&n)+(59797*(n>>>16)<<16)}return n^=n>>>13,n=1540483477*(65535&n)+(59797*(n>>>16)<<16),((n^n>>>15)>>>0).toString(36)}t.a=r},function(e,t,n){"use strict";var r={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};t.a=r},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,n.apply(this,arguments)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}var i=n(1),a=n.n(i),c=n(2),s=n(0),l=this,u=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=r(["\n    margin-top: 5px;\n    word-break: break-all;\n  "],["\n    margin-top: 5px;\n    word-break: break-all;\n  "]),p=r(["\n            position: relative;\n          "],["\n            position: relative;\n          "]),f=r(["\n              ","\n              top: 8px;\n              right: 8px;\n              font-size: 11px;\n              color: #ffffff;\n              padding: 2px 10px;\n              border-radius: 9999px;\n            "],["\n              ","\n              top: 8px;\n              right: 8px;\n              font-size: 11px;\n              color: #ffffff;\n              padding: 2px 10px;\n              border-radius: 9999px;\n            "]),__=wp.i18n.__,m=wp.components,h=m.Button,v=m.BaseControl,g=m.Disabled,y=m.Card,b=m.CardBody,w=wp.element,_=w.useState,x=(w.useContext,w.useEffect),O=wp.data,C=O.dispatch,E=O.useSelect;t.a=function(){var e=_(!1),t=u(e,2),n=t[0],r=t[1],i=_(!1),m=u(i,2),w=m[0],O=m[1],k=_(null),j=u(k,2),S=j[0],T=j[1],A=E(function(e){return e("mine-cloudvod/vod").ui("selectedId")}),R=E(function(e){return e("mine-cloudvod/vod").videos()});x(function(){T(A?R.find(function(e){return e.videoId===A}):null)},[R,A]);var P=function(){var e=o(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wp.apiFetch({path:"mine-cloudvod/v1/aliyun/vod/delvideo",method:"DELETE",data:{videoId:S.videoId}});case 2:C("mine-cloudvod/vod").removeVideo(S),C("mine-cloudvod/vod").setUI("selectedId",null),O(!1),r(!1);case 6:case"end":return e.stop()}},e,l)}));return function(){return e.apply(this,arguments)}}(),D=Object(s.a)(d);if(!S)return"";var I=function(e){return e.coverURL};return S&&Object(s.b)("div",{className:"mine-cloudvod__media-modal-sidebar-content"},Object(s.b)(v,{css:Object(s.a)(p)},Object(s.b)(g,{key:S.videoId},Object(c.e)(S)&&I(S)&&Object(s.b)("img",{src:I(S),css:{maxWidth:"100%",maxHeight:"200px"}})),Object(s.b)(h,{isSmall:!0,isPrimary:!0,isBusy:!Object(c.e)(S),css:Object(s.a)(f,Object(c.e)(S)?"position: absolute;":"")},Object(c.d)(S))),Object(s.b)(v,null,Object(s.b)(v.VisualLabel,null,__("Name","mine-cloudvod")),Object(s.b)("h3",{css:D},S.title)),Object(s.b)(v,null,Object(s.b)(v.VisualLabel,null,__("Category","mine-cloudvod")),Object(s.b)("h3",{css:D},S.cateName)),Object(s.b)(v,null,Object(s.b)(v.VisualLabel,null,__("Size","mine-cloudvod")),Object(s.b)("h3",{css:D},Object(c.a)(S.size||0))),Object(s.b)(v,null,Object(s.b)(v.VisualLabel,null,__("Length","mine-cloudvod")),Object(s.b)("h3",{css:D},Object(c.c)(S.duration))),Object(s.b)(v,null,Object(s.b)(v.VisualLabel,null,__("Created","mine-cloudvod")),Object(s.b)("h3",{css:D},Object(c.f)(S.creationTime))),Object(s.b)(v,null,n?Object(s.b)(y,null,Object(s.b)(b,null,Object(s.b)("p",null,Object(s.b)("strong",null,__("Are you sure?","mine-cloudvod"))),Object(s.b)("p",null,__("Are you sure you want to delete this video?","mine-cloudvod")),Object(s.b)(h,{isDestructive:!0,disabled:w,isBusy:w,onClick:function(e){e.preventDefault(),P(),O(!0)}},__("Yes","mine-cloudvod")),Object(s.b)(h,{onClick:function(){return r(!1)}},__("Cancel","mine-cloudvod")))):Object(s.b)(h,{isDestructive:!0,onClick:function(){r(!n)}},__("Delete video","mine-cloudvod"))))}},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}var i=n(1),a=n.n(i),c=n(0),s=n(54),l=n(19),u=this,d=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=r(["\n          height: 100%;\n          text-align: center;\n        "],["\n          height: 100%;\n          text-align: center;\n        "]),f=r(["\n            text-align:center;\n          "],["\n            text-align:center;\n          "]),__=wp.i18n.__,m=wp.element,h=m.useState,v=m.useEffect,g=m.Fragment,y=wp.components,b=y.Flex,w=y.FormFileUpload,_=y.Notice,x=y.Button,O=wp.data,C=O.dispatch,E=O.useSelect;t.a=function(){var e=h(!1),t=d(e,2),n=t[0],r=t[1],i=h(""),m=d(i,2),y=m[0],O=m[1],k=h(0),j=d(k,2),S=j[0],T=j[1],A=h(""),R=d(A,2),P=R[0],D=R[1],I=h(!1),B=d(I,2),N=B[0],M=B[1],U=E(function(e){return e("mine-cloudvod/vod").videosFetched()}),L=E(function(e){return e("mine-cloudvod/vod").videos()}),F=E(function(e){return e("mine-cloudvod/vod").uploads()}),z=E(function(e){return e("mine-cloudvod/vod").ui("currentCategory")}),H=E(function(e){return e("mine-cloudvod/vod").ui("pageNo")});v(function(){U||V()},[U]);var V=function(){var e=o(a.a.mark(function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sync:!1},r=n.sync;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wp.apiFetch({path:wp.url.addQueryArgs("mine-cloudvod/v1/aliyun/vod/videos",{page:H,items_per_page:100,cateId:z?z.cateId:-1})});case 3:t=e.sent,C("mine-cloudvod/vod").setVideos(t.items),D(t.scrollToken),C("mine-cloudvod/vod").setUI("pageNo",H?H+1:2),T(t.totalItems),O(""),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),r||C("mine-cloudvod/vod").addError(e.t0.message);case 14:return e.prev=14,C("mine-cloudvod/vod").setVideosFetched(!0),e.finish(14);case 17:case"end":return e.stop()}},e,u,[[0,11,14,17]])}));return function(){return e.apply(this,arguments)}}(),K=function(){var e=o(a.a.mark(function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sync:!1},r=n.sync;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,M(!0),e.next=4,wp.apiFetch({path:wp.url.addQueryArgs("mine-cloudvod/v1/aliyun/vod/videos",{page:H,items_per_page:100,cateId:z?z.cateId:-1,st:P})});case 4:t=e.sent,C("mine-cloudvod/vod").addVideos(t.items),D(t.scrollToken),C("mine-cloudvod/vod").setUI("pageNo",H?H+1:2),O(""),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),r||C("mine-cloudvod/vod").addError(e.t0.message);case 14:return e.prev=14,M(!1),e.finish(14);case 17:case"end":return e.stop()}},e,u,[[0,11,14,17]])}));return function(){return e.apply(this,arguments)}}();return y?Object(c.b)(_,{status:"warning",isDismissible:!1},Object(c.b)("div",{css:{display:"flex",alignItems:"center"}},Object(c.b)(l.a,{css:{flex:1}}),y)):U?Object(c.b)(g,null,L&&L.length?Object(c.b)("div",null,Object(c.b)("h2",null,__("Videos","mine-cloudvod")),L.map(function(e){return Object(c.b)(s.a,{key:e.videoId,video:e,onClick:function(){r(n.videoId===e.videoId?{}:e)},selected:n.videoId===e.videoId})}),Object(c.b)("div",{css:Object(c.a)(f)},N&&Object(c.b)(l.a,{css:{flex:1,marginBottom:10}}),Object(c.b)("p",null,sprintf(__("Showing %1$s of %2$s media items","mine-cloudvod"),L.length,S)),L.length<S&&Object(c.b)(x,{isPrimary:!0,size:"small",onClick:function(e){e.preventDefault(),K()}},__("Load more")))):function(){return Object(c.b)(b,{align:"center",justify:"center",css:Object(c.a)(p)},Object(c.b)("div",null,Object(c.b)("h2",null,__("Drop video files here to upload","mine-cloudvod")),Object(c.b)("p",null,__("or browse for a video","mine-cloudvod")),Object(c.b)(w,{isSecondary:!0,accept:"video/mp4,video/x-m4v,video/*",onChange:function(e){if(e.target.files){for(var t=0;t<e.target.files.length;t++)e.target.files[t].id=t+F.length;C("mine-cloudvod/vod").addUploads(e.target.files),jQuery(e.target).val(null)}}},__("Upload New Video","mine-cloudvod"))))}()):Object(c.b)(l.a,{css:{flex:1}})}},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(0),i=n(6),a=n(2),c=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=r(["\n        font-size: 11px;\n        color: #ffffff;\n        padding: 2px 10px;\n        border-radius: 9999px;\n      "],["\n        font-size: 11px;\n        color: #ffffff;\n        padding: 2px 10px;\n        border-radius: 9999px;\n      "]),l=r(["\n            max-width: 100%;\n            object-fit: cover;\n            width: 100%;\n            height: 140px;\n            display: block;\n          "],["\n            max-width: 100%;\n            object-fit: cover;\n            width: 100%;\n            height: 140px;\n            display: block;\n          "]),u=r(["\n        display: flex;\n        align-items: center;\n      "],["\n        display: flex;\n        align-items: center;\n      "]),d=r(["\n          margin-right: 10px;\n          display: flex;\n          align-items: center;\n        "],["\n          margin-right: 10px;\n          display: flex;\n          align-items: center;\n        "]),p=r(["\n            width: 14px;\n            height: 14px;\n            font-size: 14px;\n            margin-right: 5px;\n            opacity: 0.5;\n          "],["\n            width: 14px;\n            height: 14px;\n            font-size: 14px;\n            margin-right: 5px;\n            opacity: 0.5;\n          "]),f=r(["\n          display: flex;\n          align-items: center;\n        "],["\n          display: flex;\n          align-items: center;\n        "]),m=r(["\n            opacity: 0.5;\n            width: 14px;\n            height: 14px;\n            font-size: 14px;\n            margin-right: 5px;\n          "],["\n            opacity: 0.5;\n            width: 14px;\n            height: 14px;\n            font-size: 14px;\n            margin-right: 5px;\n          "]),h=r(["\n        ","\n        border: 1px solid\n          ",";\n      "],["\n        ","\n        border: 1px solid\n          ",";\n      "]),v=wp.components,g=v.Icon,y=v.Button,b=wp.element,w=b.useEffect,_=b.useState,x=wp.data,O=x.useSelect,C=x.dispatch;t.a=function(e){var t=e.video,n=_(),r=c(n,2),v=r[0],b=r[1],x=O(function(e){return e("mine-cloudvod/vod").ui("selectedId")});w(function(){b(x?x===t.videoId:null)},[x]);return Object(o.b)(i.a,{onClick:function(){C("mine-cloudvod/vod").setUI("selectedId",t.videoId)},css:Object(o.a)(h,v&&"box-shadow: 0 0 0 0px #fff, 0 0 0 3px var(--wp-admin-theme-color, #007cba);",v?"var(--wp-admin-theme-color, #007cba)":"#e0e0e0"),thumbnail:function(){var e=t.coverURL;if(e)return Object(o.b)("img",{css:Object(o.a)(l),src:e})}(),badge:function(){return Object(o.b)(y,{isSmall:!0,isPrimary:!0,isBusy:!Object(a.e)(t),css:Object(o.a)(s)},Object(a.d)(t))}(),title:t.title,footer:function(){return Object(o.b)("div",{css:Object(o.a)(u)},Object(o.b)("span",{css:Object(o.a)(d)},Object(o.b)(g,{css:Object(o.a)(p),icon:"clock",size:14}),Object(o.b)("span",null,Object(a.c)(t.duration))),Object(o.b)("span",{css:Object(o.a)(f)},Object(o.b)(g,{css:Object(o.a)(m),icon:"database",size:14}),Object(o.b)("span",null,Object(a.a)(t.size))))}(),after:""})}},function(e,t,n){"use strict";var r=n(0),o=n(56),__=wp.i18n.__,i=wp.components,a=i.Flex,c=i.FlexBlock,s=i.FlexItem,l=(i.Button,i.FormFileUpload),u=wp.data,d=u.dispatch;u.useSelect;t.a=function(e){var t=(e.uploads,e.afterUpload);return Object(r.b)(a,null,Object(r.b)(c,null,Object(r.b)(a,{justify:"flex-start"},Object(r.b)(l,{id:"mcv-oss-upload-form",multiple:!0,isPrimary:!0,accept:"video/mp4,video/x-m4v,video/*",onChange:function(e){if(e.target.files){for(var t=0;t<e.target.files.length;t++)e.target.files[t].id=t+e.target.files.length;d("mine-cloudvod/vod").addUploads(e.target.files),jQuery(e.target).val(null)}}},__("Upload Videos","mine-cloudvod")),Object(r.b)(o.a,null),t)),Object(r.b)(s,null))}},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}var o=n(1),i=n.n(o),a=n(0),c=this,s=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n              margin-bottom: 15px;\n            "],["\n              margin-bottom: 15px;\n            "]),__=wp.i18n.__,u=wp.components,d=u.Button,p=u.TextControl,f=u.Modal,m=u.BaseControl,h=wp.element,v=h.useState,g=h.Fragment,y=wp.data,b=y.dispatch,w=y.useSelect;t.a=function(){var e=v(""),t=s(e,2),n=t[0],o=t[1],u=v(!1),h=s(u,2),y=h[0],_=h[1],x=w(function(e){return e("mine-cloudvod/vod").ui("Categories")}),O=w(function(e){return e("mine-cloudvod/vod").ui("createCollection")}),C=function(e){b("mine-cloudvod/vod").setUI("createCollection",e)},E=function(){var e=r(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.prev=1,e.next=4,wp.apiFetch({path:"mine-cloudvod/v1/aliyun/vod/createCategory",method:"POST",data:{name:n}});case 4:t=e.sent,x.push(t),b("mine-cloudvod/vod").setUI("Categories",x),b("mine-cloudvod/vod").setUI("currentCategory",t),b("mine-cloudvod/vod").setVideosFetched(!1),o(""),C(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0);case 16:return e.prev=16,_(!1),e.finish(16);case 19:case"end":return e.stop()}},e,c,[[1,13,16,19]])}));return function(){return e.apply(this,arguments)}}();return Object(a.b)(g,null,Object(a.b)(d,{isSecondary:!0,onClick:function(){return C(!0)}},__("Create Category","mine-cloudvod")),O&&Object(a.b)(f,{overlayClassName:"mcv-modal",title:__("Create New Category","mine-cloudvod"),shouldCloseOnClickOutside:!1,isDismissible:!1},Object(a.b)(p,{css:Object(a.a)(l),tabIndex:"0",placeholder:__("Enter a category name","mine-cloudvod"),value:n,onChange:function(e){return o(e)}}),Object(a.b)(m,null,Object(a.b)(d,{isBusy:y,disabled:y,isPrimary:!0,onClick:function(){E()}},__("Create","mine-cloudvod"))," ",Object(a.b)(d,{onClick:function(){return C(!1)}},__("Cancel","mine-cloudvod")))))}},function(e,t,n){"use strict";var r=n(0),o=n(58),i=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n        margin-bottom: 2em;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        border-bottom: 1px solid #ccc;\n      "],["\n        margin-bottom: 2em;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        border-bottom: 1px solid #ccc;\n      "]),__=wp.i18n.__,a=(wp.element.useState,wp.data),c=a.dispatch,s=a.useSelect,l=wp.components;l.Button,l.Modal,l.BaseControl;t.a=function(){var e=s(function(e){return e("mine-cloudvod/vod").ui("currentCategory")});return Object(r.b)("div",{css:Object(r.a)(i)},Object(r.b)("div",null,Object(r.b)(o.a,{onClick:function(){c("mine-cloudvod/vod").setUI("currentCategory",null),c("mine-cloudvod/vod").setUI("pageNo",1),c("mine-cloudvod/vod").setVideosFetched(!1)}},__("Back To All Videos","presto-player")),Object(r.b)("h2",null,e.cateName)))}},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(0),i=r(["\n        display: inline-flex;\n        align-items: center;\n        cursor: pointer;\n        color: var(--wp-admin-theme-color, #007cba);\n        padding: 6px 0;\n      "],["\n        display: inline-flex;\n        align-items: center;\n        cursor: pointer;\n        color: var(--wp-admin-theme-color, #007cba);\n        padding: 6px 0;\n      "]),a=r(["\n          width: 14px;\n          height: 14px;\n          font-size: 14px;\n          margin-right: 5px;\n        "],["\n          width: 14px;\n          height: 14px;\n          font-size: 14px;\n          margin-right: 5px;\n        "]),c=wp.components.Icon;t.a=function(e){var t=e.children,n=e.onClick;return Object(o.b)("span",{onClick:n,css:Object(o.a)(i)},Object(o.b)(c,{css:Object(o.a)(a),icon:"arrow-left-alt",size:14}),Object(o.b)("span",null,t))}},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}var o=n(1),i=n.n(o),a=n(0),c=n(60),s=this,l=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n            display: flex;\n            align-items: stretch;\n            overflow: auto;\n            flex-wrap: wrap;\n          "],["\n            display: flex;\n            align-items: stretch;\n            overflow: auto;\n            flex-wrap: wrap;\n          "]),__=wp.i18n.__,u=wp.element.useEffect,d=wp.data,p=d.useSelect,f=d.dispatch;t.a=function(){var e=p(function(e){return e("mine-cloudvod/vod").ui("Categories")}),t=function(){var e=r(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wp.apiFetch({path:wp.url.addQueryArgs("mine-cloudvod/v1/aliyun/vod/categories",{})});case 3:t=e.sent,f("mine-cloudvod/vod").setUI("Categories",t),e.next=12;break;case 7:if(e.prev=7,e.t0=e.catch(0),401!==e.t0.data.status){e.next=11;break}return e.abrupt("return");case 11:f("mine-cloudvod/vod").addError(e.t0.message);case 12:case"end":return e.stop()}},e,s,[[0,7]])}));return function(){return e.apply(this,arguments)}}();return u(function(){t()},[]),!!e&&Object(a.b)("div",null,Object(a.b)("h2",null,__("Categories","presto-player")),Object(a.b)("div",{css:Object(a.a)(l)},e.map(function(e){return Object(a.b)(c.a,{category:e,key:e.cateId})})))}},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=(n(6),n(0)),i=r(["\n          margin-right: 15px;\n          padding: 5px 0;\n          cursor: pointer;\n          font-weight: bold;\n          line-height: 20px;\n        "],["\n          margin-right: 15px;\n          padding: 5px 0;\n          cursor: pointer;\n          font-weight: bold;\n          line-height: 20px;\n        "]),a=r(["\n            color: var(--wp-admin-theme-color);\n            margin-right: 5px;\n          "],["\n            color: var(--wp-admin-theme-color);\n            margin-right: 5px;\n          "]),c=wp.components.Icon,s=wp.data.dispatch;t.a=function(e){var t=e.category,n=function(e){e.preventDefault(),s("mine-cloudvod/vod").setUI("currentCategory",t),s("mine-cloudvod/vod").setUI("pageNo",1),s("mine-cloudvod/vod").setVideosFetched(!1)};return Object(o.b)("div",{onClick:n,css:Object(o.a)(i)},Object(o.b)(c,{icon:"category",css:Object(o.a)(a)}),t.cateName)}},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(0),i=n(21),a=r(["\n        overflow: auto;\n        display: flex;\n        align-items: center;\n        position: relative;\n      "],["\n        overflow: auto;\n        display: flex;\n        align-items: center;\n        position: relative;\n      "]),c=r(["\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                animation: components-button__busy-animation 2500ms infinite linear;\n                opacity: 1;\n                padding: 6px 12px;\n                border-radius: 99999px;\n                border: 1px solid #dddddd;\n                background-size: 100px 100%;\n                background-image: linear-gradient(\n                  -45deg,\n                  #ffffff 33%,\n                  #f3f3f3 33%,\n                  #f3f3f3 70%,\n                  #ffffff 70%\n                );\n              "],["\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                animation: components-button__busy-animation 2500ms infinite linear;\n                opacity: 1;\n                padding: 6px 12px;\n                border-radius: 99999px;\n                border: 1px solid #dddddd;\n                background-size: 100px 100%;\n                background-image: linear-gradient(\n                  -45deg,\n                  #ffffff 33%,\n                  #f3f3f3 33%,\n                  #f3f3f3 70%,\n                  #ffffff 70%\n                );\n              "]),s=r(["\n                  flex: 1;\n                  white-space: nowrap;\n                  overflow: hidden;\n                  max-width: 150px;\n                  text-overflow: ellipsis;\n                  font-weight: bold;\n                "],["\n                  flex: 1;\n                  white-space: nowrap;\n                  overflow: hidden;\n                  max-width: 150px;\n                  text-overflow: ellipsis;\n                  font-weight: bold;\n                "]),l=r(["\n                  display: flex;\n                  align-items: center;\n                "],["\n                  display: flex;\n                  align-items: center;\n                "]),u=r(["\n                    width: 50px;\n                    height: 3px;\n                    margin: 0 5px;\n                    background: #e3e3e3;\n                    border-radius: 9999px;\n                    overflow: hidden;\n                  "],["\n                    width: 50px;\n                    height: 3px;\n                    margin: 0 5px;\n                    background: #e3e3e3;\n                    border-radius: 9999px;\n                    overflow: hidden;\n                  "]),d=wp.data;d.dispatch,d.useSelect,wp.element.useState;t.a=function(e){var t=e.uploader,n=e.uploads,r=e.error;return n.length?Object(o.b)("div",{css:Object(o.a)(a)},n.length&&n.map(function(e){return t.addFile(e,null,null,null,'{"Vod":{}}'),Object(o.b)("div",{key:e.id,css:Object(o.a)(c)},Object(o.b)("div",{css:Object(o.a)(s)},!!r&&r,e.name,"..."),Object(o.b)("div",{css:Object(o.a)(l)},Object(o.b)(i.a,{css:Object(o.a)(u),id:e.id,progress:0})))})):""}},function(module,__webpack_exports__,__webpack_require__){"use strict";function _taggedTemplateLiteral(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__),__WEBPACK_IMPORTED_MODULE_1__emotion_react__=__webpack_require__(0),__WEBPACK_IMPORTED_MODULE_2__share_post_upload__=__webpack_require__(23),__WEBPACK_IMPORTED_MODULE_3__OssSidebar__=__webpack_require__(63),__WEBPACK_IMPORTED_MODULE_4__video_OssVideos__=__webpack_require__(64),__WEBPACK_IMPORTED_MODULE_5__OssHeader__=__webpack_require__(66),__WEBPACK_IMPORTED_MODULE_6__Footer__=__webpack_require__(20),__WEBPACK_IMPORTED_MODULE_7__upload_OssUploads__=__webpack_require__(67),__WEBPACK_IMPORTED_MODULE_8__MediaPopupTemplate__=__webpack_require__(22),_this=this,_slicedToArray=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_templateObject=_taggedTemplateLiteral(["\n          overflow: auto;\n          display: flex;\n          flex-direction: column;\n        "],["\n          overflow: auto;\n          display: flex;\n          flex-direction: column;\n        "]),_templateObject2=_taggedTemplateLiteral(["\n            padding: 12px 24px;\n            overflow: auto;\n            display: flex;\n            flex-direction: column;\n          "],["\n            padding: 12px 24px;\n            overflow: auto;\n            display: flex;\n            flex-direction: column;\n          "]),_templateObject3=_taggedTemplateLiteral(["\n                    margin: 0 0 20px 0;\n                  "],["\n                    margin: 0 0 20px 0;\n                  "]),_templateObject4=_taggedTemplateLiteral(["\n              display: flex;\n              align-items: stretch;\n            "],["\n              display: flex;\n              align-items: stretch;\n            "]),__=wp.i18n.__,_wp$components=wp.components,Button=_wp$components.Button,DropZone=_wp$components.DropZone,DropZoneProvider=_wp$components.DropZoneProvider,Notice=_wp$components.Notice,_wp$element=wp.element,useState=_wp$element.useState,useEffect=_wp$element.useEffect,Fragment=_wp$element.Fragment,_wp$data=wp.data,dispatch=_wp$data.dispatch,useSelect=_wp$data.useSelect;__webpack_exports__.a=function(_ref){function onChooseOss(e){e.videoId=e.key,onChoose(e)}var onClose=_ref.onClose,onChoose=_ref.onChoose,noticeOperations=_ref.noticeOperations,_useState=useState(""),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1],_useState3=useState(0),_useState4=_slicedToArray(_useState3,2),progress=_useState4[0],setProgress=_useState4[1],curBucket=useSelect(function(e){return e("mine-cloudvod/vod").ui("curBucket")}),uploads=useSelect(function(e){return e("mine-cloudvod/vod").uploads()}),errors=useSelect(function(e){return e("mine-cloudvod/vod").errors()});useEffect(function(){dispatch("mine-cloudvod/vod").setVideosFetched(!1),dispatch("mine-cloudvod/vod").setVideos([]),dispatch("mine-cloudvod/vod").setBucketsFetched(!1),dispatch("mine-cloudvod/vod").setBuckets([])},[]);var buckets=useSelect(function(e){return e("mine-cloudvod/vod").buckets()}),bucketsFetched=useSelect(function(e){return e("mine-cloudvod/vod").bucketsFetched()});useEffect(function(){bucketsFetched||bucketsfetch()},[bucketsFetched]);var bucketsfetch=function(){var e=_asyncToGenerator(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sync:!1},r=n.sync;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wp.apiFetch({path:wp.url.addQueryArgs("mine-cloudvod/v1/aliyun/oss/buckets")});case 3:t=e.sent,dispatch("mine-cloudvod/vod").setBuckets(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r||dispatch("mine-cloudvod/vod").addError(e.t0.message);case 10:return e.prev=10,dispatch("mine-cloudvod/vod").setBucketsFetched(!0),e.finish(10);case 13:case"end":return e.stop()}},e,_this,[[0,7,10,13]])}));return function(){return e.apply(this,arguments)}}(),uploadFile=function(){var _ref4=_asyncToGenerator(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee2(files){var xmlhttp,formData,path,serverUrl,postData;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:dispatch("mine-cloudvod/vod").addUploads(files),xmlhttp=null,window.XMLHttpRequest?xmlhttp=new XMLHttpRequest:window.ActiveXObject&&(xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")),formData=[],path="",null!=xmlhttp&&(serverUrl=wp.url.addQueryArgs("/wp-json/mine-cloudvod/v1/aliyun/oss/uploadauth",{bucket:curBucket}),xmlhttp.open("GET",serverUrl,!1),xmlhttp.send(null),postData=xmlhttp.responseText,postData=eval("("+postData+")"),path=postData.host,formData.push({name:"key",value:postData.dir+files[0].name}),formData.push({name:"policy",value:postData.policy}),formData.push({name:"OSSAccessKeyId",value:postData.accessid}),formData.push({name:"success_action_status",value:"200"}),formData.push({name:"Signature",value:postData.signature})),Object(__WEBPACK_IMPORTED_MODULE_2__share_post_upload__.a)({file:files[0],path:path,onProgress:function(e){setProgress(e)},onComplete:function(e){dispatch("mine-cloudvod/vod").removeUpload(e),dispatch("mine-cloudvod/vod").setVideosFetched(!1)},onError:function(e){dispatch("mine-cloudvod/vod").addError(e.message)},formData:formData});case 7:case"end":return _context2.stop()}},_callee2,_this)}));return function(e){return _ref4.apply(this,arguments)}}(),onCloseConfirm=function(){if(uploads.length){return void(confirm("Discard your uploads?")&&(onClose(),dispatch("mine-cloudvod/vod").setUploads([])))}onClose()},title=__("Select or Upload Aliyun OSS Video","mine-cloudvod"),mainContent=function(){return Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.b)(DropZoneProvider,{css:Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.a)(_templateObject)},Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.b)("div",{css:Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.a)(_templateObject2)},!!errors.length&&errors.map(function(e){return Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.b)(Notice,{css:Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.a)(_templateObject3),status:"error",onRemove:function(){return dispatch("mine-cloudvod/vod").removeError(e)}},e)}),Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.b)("div",{css:Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.a)(_templateObject4)},Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.b)(__WEBPACK_IMPORTED_MODULE_4__video_OssVideos__.a,{bucketsFetched:bucketsFetched,curBucket:curBucket})),Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.b)(DropZone,{label:"Drop files",onFilesDrop:uploadFile})))},header=Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.b)(__WEBPACK_IMPORTED_MODULE_5__OssHeader__.a,{onUpload:uploadFile,buckets:buckets,afterUpload:Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.b)(__WEBPACK_IMPORTED_MODULE_7__upload_OssUploads__.a,{uploads:uploads,error:error,progress:progress})}),sidebar=Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.b)(__WEBPACK_IMPORTED_MODULE_3__OssSidebar__.a,null),footer=Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.b)(__WEBPACK_IMPORTED_MODULE_6__Footer__.a,{onChoose:onChooseOss});return Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.b)(__WEBPACK_IMPORTED_MODULE_8__MediaPopupTemplate__.a,{title:title,header:header,mainContent:mainContent(),onClose:onCloseConfirm,footer:footer,sidebar:sidebar})}},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}var i=n(1),a=n.n(i),c=n(2),s=n(0),l=this,u=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=r(["\n    margin-top: 5px;\n  "],["\n    margin-top: 5px;\n  "]),p=r(["\n            position: relative;\n          "],["\n            position: relative;\n          "]),f=r(["\n              ","\n              top: 8px;\n              right: 8px;\n              font-size: 11px;\n              color: #ffffff;\n              padding: 2px 10px;\n              border-radius: 9999px;\n            "],["\n              ","\n              top: 8px;\n              right: 8px;\n              font-size: 11px;\n              color: #ffffff;\n              padding: 2px 10px;\n              border-radius: 9999px;\n            "]),__=wp.i18n.__,m=wp.components,h=m.Button,v=m.BaseControl,g=m.Disabled,y=m.Card,b=m.CardBody,w=wp.element,_=w.useState,x=(w.useContext,w.useEffect),O=wp.data,C=O.dispatch,E=O.useSelect;t.a=function(){var e=_(!1),t=u(e,2),n=t[0],r=t[1],i=_(!1),m=u(i,2),w=m[0],O=m[1],k=_(null),j=u(k,2),S=j[0],T=j[1],A=E(function(e){return e("mine-cloudvod/vod").ui("selectedId")}),R=E(function(e){return e("mine-cloudvod/vod").videos()});x(function(){T(A?R.find(function(e){return e.videoId===A}):null)},[R,A]);var P=function(){var e=o(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wp.apiFetch({path:"mine-cloudvod/v1/aliyun/oss/delvideo",method:"DELETE",data:{object:S.key,bucket:S.bucket}});case 2:C("mine-cloudvod/vod").removeVideo(S),C("mine-cloudvod/vod").setUI("selectedId",null),O(!1),r(!1);case 6:case"end":return e.stop()}},e,l)}));return function(){return e.apply(this,arguments)}}(),D=Object(s.a)(d);if(!S)return"";var I=function(e){return e.coverURL};return S&&Object(s.b)("div",{className:"mine-cloudvod__media-modal-sidebar-content"},Object(s.b)(v,{css:Object(s.a)(p)},Object(s.b)(g,{key:S.videoId},Object(c.e)(S)&&I(S)&&Object(s.b)("img",{src:I(S),css:{maxWidth:"100%"}})),Object(s.b)(h,{isSmall:!0,isPrimary:!0,isBusy:!Object(c.e)(S),css:Object(s.a)(f,Object(c.e)(S)?"position: absolute;":"")},Object(c.d)(S))),Object(s.b)(v,null,Object(s.b)(v.VisualLabel,null,__("Name","mine-cloudvod")),Object(s.b)("h3",{css:D},S.title)),Object(s.b)(v,null,Object(s.b)(v.VisualLabel,null,__("Size","mine-cloudvod")),Object(s.b)("h3",{css:D},Object(c.a)(S.size||0))),Object(s.b)(v,null,Object(s.b)(v.VisualLabel,null,__("Storage Class","mine-cloudvod")),Object(s.b)("h3",{css:D},S.storageClass)),Object(s.b)(v,null,Object(s.b)(v.VisualLabel,null,__("Created","mine-cloudvod")),Object(s.b)("h3",{css:D},Object(c.f)(S.creationTime))),Object(s.b)(v,null,n?Object(s.b)(y,null,Object(s.b)(b,null,Object(s.b)("p",null,Object(s.b)("strong",null,__("Are you sure?","mine-cloudvod"))),Object(s.b)("p",null,__("Are you sure you want to delete this video?","mine-cloudvod")),Object(s.b)(h,{isDestructive:!0,disabled:w,isBusy:w,onClick:function(e){e.preventDefault(),P(),O(!0)}},__("Yes","mine-cloudvod")),Object(s.b)(h,{onClick:function(){return r(!1)}},__("Cancel","mine-cloudvod")))):Object(s.b)(h,{isDestructive:!0,onClick:function(){r(!n)}},__("Delete video","mine-cloudvod"))))}},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}var o=n(1),i=n.n(o),a=n(0),c=n(65),s=n(19),l=this,u=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n          height: 100%;\n          text-align: center;\n        "],["\n          height: 100%;\n          text-align: center;\n        "]),__=wp.i18n.__,p=wp.element,f=p.useState,m=p.useEffect,h=p.Fragment,v=wp.components,g=v.Flex,y=v.FormFileUpload,b=v.Notice,w=wp.data,_=w.dispatch,x=w.useSelect;t.a=function(e){var t=e.bucketsFetched,n=e.curBucket,o=f(!1),p=u(o,2),v=p[0],w=p[1],O=f(""),C=u(O,2),E=C[0],k=C[1],j=x(function(e){return e("mine-cloudvod/vod").videosFetched()}),S=x(function(e){return e("mine-cloudvod/vod").videos()}),T=x(function(e){return e("mine-cloudvod/vod").uploads()});m(function(){!j&&t&&A()},[j,t]);var A=function(){var e=r(i.a.mark(function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sync:!1},o=r.sync;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=n){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,wp.apiFetch({path:wp.url.addQueryArgs("mine-cloudvod/v1/aliyun/oss/videos",{bucket:n})});case 5:t=e.sent,_("mine-cloudvod/vod").setVideos(t.items),k(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),o||_("mine-cloudvod/vod").addError(e.t0.message);case 13:return e.prev=13,_("mine-cloudvod/vod").setVideosFetched(!0),e.finish(13);case 16:case"end":return e.stop()}},e,l,[[2,10,13,16]])}));return function(){return e.apply(this,arguments)}}();return E?Object(a.b)(b,{status:"warning",isDismissible:!1},Object(a.b)("div",{css:{display:"flex",alignItems:"center"}},Object(a.b)(s.a,{css:{flex:1}}),E)):j?Object(a.b)(h,null,S&&S.length?Object(a.b)("div",null,Object(a.b)("h2",null,__("Videos","mine-cloudvod")),S.map(function(e){return Object(a.b)(c.a,{key:e.key,video:e,onClick:function(){e.videoId=e.key,e.title=e.key,e.status=e.type,e.creationTime=e.lastModified,_("mine-cloudvod/vod").setUI("selectedId",e.videoId),w(v.key===e.key?{}:e)},isSelected:v.key===e.key})})):function(){return Object(a.b)(g,{align:"center",justify:"center",css:Object(a.a)(d)},Object(a.b)("div",null,Object(a.b)("h2",null,__("Drop video files here to upload","mine-cloudvod")),Object(a.b)("p",null,__("or browse for a video","mine-cloudvod")),Object(a.b)(y,{isSecondary:!0,accept:"video/mp4,video/x-m4v,video/*",onChange:function(e){if(e.target.files){for(var t=0;t<e.target.files.length;t++)e.target.files[t].id=t+T.length;_("mine-cloudvod/vod").addUploads(e.target.files),jQuery(e.target).val(null)}}},__("Upload New Video","mine-cloudvod"))))}()):Object(a.b)(s.a,{css:{flex:1}})}},function(e,t,n){"use strict";var r=n(0),o=(n(6),n(2)),i=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=wp.components,c=(a.Icon,a.Button,wp.element),s=c.useEffect,l=c.useState,u=wp.data,d=u.useSelect;u.dispatch;t.a=function(e){var t=e.video,n=e.onClick,a=e.isSelected,c=l(),u=i(c,2),p=(u[0],u[1]),f=d(function(e){return e("mine-cloudvod/vod").ui("selectedId")});s(function(){p(f?f===t.key:null)},[f]);var m=a?"is-selected":"";return Object(r.b)("div",{className:"mcv-media-list-item "+m,onClick:n},Object(r.b)("div",{className:"presto-player__media-list-item-icon"},Object(r.b)("svg",{class:"mcv-block-icon",width:"28px",height:"28px",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",fill:"none"},Object(r.b)("path",{d:"M917.792 229.088c-22.208-30.304-53.184-65.696-87.168-99.712s-69.408-64.96-99.712-87.168C679.328 4.384 654.304 0 640 0H144A80.096 80.096 0 0 0 64 80v864C64 988.096 99.872 1024 144 1024h736c44.096 0 80-35.904 80-80V320c0-14.336-4.384-39.36-42.208-90.912z m-132.416-54.464A874.688 874.688 0 0 1 857.952 256H704V102.048a874.688 874.688 0 0 1 81.376 72.576zM896 944c0 8.672-7.328 16-16 16h-736a16.224 16.224 0 0 1-16-16v-864c0-8.672 7.328-16 16-16H640v224a32 32 0 0 0 32 32h224v624zM256 512h320v320H256V512zM576 640l192-128v320l-192-128z"}))),Object(r.b)("div",{className:"presto-player__media-list-item-title"},t.key),Object(r.b)("div",{className:"presto-player__media-list-item-size"},Object(o.a)(t.size)),Object(r.b)("div",{className:"presto-player__media-list-item-modified"},Object(o.f)(t.lastModified)))}},function(e,t,n){"use strict";var r=n(0),o=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),__=wp.i18n.__,i=wp.components,a=i.Flex,c=i.FlexBlock,s=i.FlexItem,l=i.SelectControl,u=i.FormFileUpload,d=wp.data,p=d.dispatch,f=d.useSelect,m=wp.element,h=m.useState,v=m.useEffect;m.Fragment;t.a=function(e){var t=e.onUpload,n=e.afterUpload,i=e.buckets,d=f(function(e){return e("mine-cloudvod/vod").ui("curBucket")}),m=h(!1),g=o(m,2),y=g[0],b=g[1],w=i.map(function(e){return 1==e[1]&&p("mine-cloudvod/vod").setUI("curBucket",e[0]),{label:e[0],value:e[0]}});return w.unshift({label:__("-- Select a bucket, please --","mine-cloudvod"),value:""}),v(function(){!1===y&&d&&b(d)},[d]),Object(r.b)(a,null,Object(r.b)(c,null,Object(r.b)(a,{justify:"flex-start"},Object(r.b)(u,{multiple:!1,isPrimary:!0,accept:"video/mp4,video/x-m4v,video/*",onChange:function(e){e.target.files&&(t(e.target.files),jQuery(e.target).val(null))}},__("Upload Videos","mine-cloudvod")),n)),Object(r.b)(s,null,Object(r.b)(a,null,Object(r.b)("div",{className:"mcv-select-bucket"},Object(r.b)(l,{value:y,options:w,onChange:function(e){""!=e&&(p("mine-cloudvod/vod").setUI("curBucket",e),p("mine-cloudvod/vod").setVideosFetched(!1)),p("mine-cloudvod/vod").setVideos([]),b(e)}})))))}},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(0),i=n(21),a=r(["\n        overflow: auto;\n        display: flex;\n        align-items: center;\n        position: relative;\n      "],["\n        overflow: auto;\n        display: flex;\n        align-items: center;\n        position: relative;\n      "]),c=r(["\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                animation: components-button__busy-animation 2500ms infinite linear;\n                opacity: 1;\n                padding: 6px 12px;\n                border-radius: 99999px;\n                border: 1px solid #dddddd;\n                background-size: 100px 100%;\n                background-image: linear-gradient(\n                  -45deg,\n                  #ffffff 33%,\n                  #f3f3f3 33%,\n                  #f3f3f3 70%,\n                  #ffffff 70%\n                );\n              "],["\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                animation: components-button__busy-animation 2500ms infinite linear;\n                opacity: 1;\n                padding: 6px 12px;\n                border-radius: 99999px;\n                border: 1px solid #dddddd;\n                background-size: 100px 100%;\n                background-image: linear-gradient(\n                  -45deg,\n                  #ffffff 33%,\n                  #f3f3f3 33%,\n                  #f3f3f3 70%,\n                  #ffffff 70%\n                );\n              "]),s=r(["\n                  flex: 1;\n                  white-space: nowrap;\n                  overflow: hidden;\n                  max-width: 150px;\n                  text-overflow: ellipsis;\n                  font-weight: bold;\n                "],["\n                  flex: 1;\n                  white-space: nowrap;\n                  overflow: hidden;\n                  max-width: 150px;\n                  text-overflow: ellipsis;\n                  font-weight: bold;\n                "]),l=r(["\n                  display: flex;\n                  align-items: center;\n                "],["\n                  display: flex;\n                  align-items: center;\n                "]),u=r(["\n                    width: 100px;\n                    height: 3px;\n                    margin: 0 5px;\n                    background: #e3e3e3;\n                    border-radius: 9999px;\n                    overflow: hidden;\n                  "],["\n                    width: 100px;\n                    height: 3px;\n                    margin: 0 5px;\n                    background: #e3e3e3;\n                    border-radius: 9999px;\n                    overflow: hidden;\n                  "]),d=wp.element,p=(d.useEffect,d.useRef,d.useMemo,d.useState,wp.data);p.dispatch,p.useSelect;t.a=function(e){var t=e.uploads,n=e.error,r=e.progress;return t.length?Object(o.b)("div",{css:Object(o.a)(a)},t.length&&t.map(function(e){return Object(o.b)("div",{css:Object(o.a)(c)},Object(o.b)("div",{css:Object(o.a)(s)},!!n&&n,e.name,"..."),Object(o.b)("div",{css:Object(o.a)(l)},Object(o.b)(i.a,{css:Object(o.a)(u),progress:r})))})):""}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),__=wp.i18n.__,i=wp.components,a=i.Flex,c=i.FlexItem,s=i.FlexBlock,l=i.TextControl,u=i.Button,d=wp.element.useState,p=function(e){var t=e.update,n=e.add,i=e.remove,p=e.className,f=e.time,m=e.title,h=(e.disabled,e.showNotice,d(f)),v=o(h,2),g=v[0],y=v[1],b=function(e){var t=e;return t=t.replace(/[^\d]/g,""),t=parseInt(t)};return wp.element.createElement(a,{align:"center",className:p},wp.element.createElement(c,null,wp.element.createElement(l,r({style:{width:"60px"},placeholder:"0",value:g,onChange:function(e){return y(e)},onBlur:function(){var e=b(g);t({time:e}),y(e)},autoComplete:"off"},"placeholder","0"))),wp.element.createElement(s,null,wp.element.createElement(l,{placeholder:__("Title","mine-cloudvod"),value:m||"",onChange:function(e){return t({title:e})},autoComplete:"off"})),wp.element.createElement(c,null,i&&wp.element.createElement(u,{icon:"minus",style:{marginBottom:"8px"},label:__("Remove Marker","mine-cloudvod"),onClick:i}),n&&wp.element.createElement(u,{icon:"plus-alt",label:__("Add Marker","mine-cloudvod"),style:{marginBottom:"8px"},onClick:function(){n(),y("")}})))};t.a=p},function(e,t,n){"use strict";var r=n(70),__=wp.i18n.__,o=wp.blocks,i=o.registerBlockType,a=(o.unregisterBlockType,wp.plugins),c=(a.registerPlugin,a.unregisterPlugin,wp.data),s=(c.select,c.dispatch,wp.element.render,{title:{type:"array",source:"children",selector:"p"},source:{type:"string"},width:{type:"string",default:"100%"},height:{type:"string",default:"500px"},videoId:{type:"string"},thumbnail:{type:"string"},autoplay:{type:Boolean},appId:{type:Number},pcfg:{type:"string"},markers:{type:Array,default:[]},cos:{type:Object,default:{key:!1,bucket:!1}}});i("mine-cloudvod/tc-vod",{title:__("TC Vod","mine-cloudvod"),description:__("Embed videos from tencent vod.","mine-cloudvod"),icon:wp.element.createElement("svg",{fill:"none",class:"mine-block-icon",width:"28",height:"28",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},wp.element.createElement("path",{d:"M869.973333 495.36a234.666667 234.666667 0 0 0-331.946666 0L243.84 789.333333a142.506667 142.506667 0 0 1-29.44-21.333333 149.333333 149.333333 0 0 1 206.933333-215.04L481.706667 490.666667A234.666667 234.666667 0 0 0 320 426.666667c-7.253333 0-14.293333 0-21.333333 1.066666V426.666667a213.333333 213.333333 0 0 1 422.4-42.666667 277.333333 277.333333 0 0 1 89.6 21.333333 298.666667 298.666667 0 0 0-597.333334 21.333334 245.333333 245.333333 0 0 0 1.493334 25.173333A234.666667 234.666667 0 0 0 320 896h384a234.666667 234.666667 0 0 0 165.973333-400.64zM810.666667 768a149.333333 149.333333 0 0 1-106.666667 42.666667H343.466667l256-254.933334A149.333333 149.333333 0 0 1 810.666667 768z"})),category:"mine",keywords:[__("tencentcloud vod"),__("mine cloudvod"),__("qcloud vod")],attributes:s,edit:r.a,save:function(){return null}})},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(1),a=n.n(i),c=(n(9),n(71)),s=n(85),l=n(92),u=n(4),d=this,p=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=wp.components,m=f.Button,h=f.Disabled,v=(f.DropdownMenu,f.Spinner),g=f.Toolbar,y=f.withNotices,b=(f.Notice,f.BaseControl),w=f.Placeholder,_=f.ToggleControl,x=f.PanelBody,O=f.TextControl,C=wp.blockEditor,E=C.BlockControls,k=C.InspectorControls,j=(C.BlockAlignmentToolbar,C.MediaPlaceholder,C.MediaReplaceFlow,C.MediaUpload),S=C.MediaUploadCheck,__=(C.AlignmentToolbar,C.RichText,wp.i18n.__),T=(wp.compose.compose,wp.element),A=T.useState,R=T.Fragment,P=wp.data.dispatch;t.a=y(function(e){function t(){confirm(__("Replace this video?","mine-cloudvod"))&&(K(F?"cos":"vod"),P("mine-cloudvod/vod").setUI("pageNo",1),I({videoId:"",cos:""}))}function n(e){I({thumbnail:e.url})}function i(){I({thumbnail:""})}function f(){return wp.data.dispatch("core/editor").lockPostSaving("mine-aliplayer")}function y(){return wp.data.dispatch("core/editor").unlockPostSaving("mine-aliplayer")}function C(e){I(Object.assign({videoId:e.videoId,appId:mcv_tcvod_config.appID,pcfg:mcv_tcvod_config.pcfg},e.CoverUrl?{thumbnail:e.CoverUrl}:{})),X(!0),f(),J(Object.assign({videoId:e.videoId,title:e.title},e.CoverUrl?{thumbnail:e.CoverUrl}:{})).catch(function(e){I({videoId:""}),console.error(e)}).finally(function(){y(),X(!1)})}function T(e){X(!0),f(),Z({key:e.Key,bucket:e.bucket}).catch(function(e){I({cos:""}),console.error(e)}).finally(function(){y(),X(!1)})}var D=e.attributes,I=e.setAttributes;e.noticeOperations;mcv_nonce.endtime<Date.parse(new Date)/1e3&&P("mine-cloudvod/vod").setUI("proFeature",!0);var B=(D.source,D.width),N=D.height,M=D.videoId,U=D.thumbnail,L=D.autoplay,F=(D.appId,D.pcfg,D.cos),z=A(""),H=p(z,2),V=H[0],K=H[1],q=A(!1),W=p(q,2),$=W[0],X=W[1],G=function(e){return I({width:e})},Q=function(e){return I({height:e})},Y=wp.element.createElement(R,null,wp.element.createElement(E,null,wp.element.createElement(g,null,wp.element.createElement(m,{onClick:function(){return t()}},__("Replace")))),(!!M||!!F.key)&&wp.element.createElement(k,null,wp.element.createElement(x,{title:__("TcPlayer Settings","mine-cloudvod")},wp.element.createElement("div",null,wp.element.createElement("div",null,wp.element.createElement(_,{label:__("Autoplay","mine-cloudvod"),onChange:function(e){return function(t){I(o({},e,t))}}("autoplay"),checked:L}),wp.element.createElement(O,{type:"string",label:__("Width"),value:void 0!==B?B:"",placeholder:"100%",onChange:G}),wp.element.createElement(O,{type:"string",label:__("Height"),value:void 0!==N?N:"",placeholder:"500px",onChange:Q}),wp.element.createElement(S,null,wp.element.createElement(b,{className:"editor-video-poster-control"},wp.element.createElement(b.VisualLabel,null,wp.element.createElement("p",null,__("Cover image","mine-cloudvod"))),wp.element.createElement("p",null,U?wp.element.createElement("img",{src:U}):""),wp.element.createElement(j,{title:__("Select cover image","mine-cloudvod"),onSelect:n,allowedTypes:["image"],render:function(e){var t=e.open;return wp.element.createElement(m,{isPrimary:!0,onClick:t},U?__("Replace","mine-cloudvod"):__("Select","mine-cloudvod"))}}),!!U&&wp.element.createElement(m,{onClick:i,isTertiary:!0},__("Remove","mine-cloudvod"))))))))),J=function(){var e=r(a.a.mark(function e(t){var n=t.videoId,r=t.thumbnail,o=t.title;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return I({videoId:""}),e.abrupt("return");case 3:I({videoId:n,thumbnail:r,title:o}),K("");case 5:case"end":return e.stop()}},e,d)}));return function(_x){return e.apply(this,arguments)}}(),Z=function(){var e=r(a.a.mark(function e(t){var n=t.key,r=t.bucket;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return I({cos:""}),e.abrupt("return");case 3:I({cos:{key:n,bucket:r}}),K("");case 5:case"end":return e.stop()}},e,d)}));return function(t){return e.apply(this,arguments)}}();if(!M&&!F.key)return wp.element.createElement("div",null,wp.element.createElement(w,{label:__("TC Vod","mine-cloudvod"),instructions:__("Upload or select TC vod.","mine-cloudvod"),icon:wp.element.createElement("svg",{fill:"none",class:"mine-block-icon",width:"28",height:"28",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},wp.element.createElement("path",{d:"M869.973333 495.36a234.666667 234.666667 0 0 0-331.946666 0L243.84 789.333333a142.506667 142.506667 0 0 1-29.44-21.333333 149.333333 149.333333 0 0 1 206.933333-215.04L481.706667 490.666667A234.666667 234.666667 0 0 0 320 426.666667c-7.253333 0-14.293333 0-21.333333 1.066666V426.666667a213.333333 213.333333 0 0 1 422.4-42.666667 277.333333 277.333333 0 0 1 89.6 21.333333 298.666667 298.666667 0 0 0-597.333334 21.333334 245.333333 245.333333 0 0 0 1.493334 25.173333A234.666667 234.666667 0 0 0 320 896h384a234.666667 234.666667 0 0 0 165.973333-400.64zM810.666667 768a149.333333 149.333333 0 0 1-106.666667 42.666667H343.466667l256-254.933334A149.333333 149.333333 0 0 1 810.666667 768z"}))},wp.element.createElement(R,null,wp.element.createElement(m,{isPrimary:!0,onClick:function(){return K("vod")}},__("Add/Select TCVod Video","mine-cloudvod")),wp.element.createElement(m,{isPrimary:!0,onClick:function(){return K("cos")}},__("Add/Select COS Video","mine-cloudvod")))),"vod"==V?wp.element.createElement(c.a,{closePopup:function(){return K("")},onSelect:C}):null,"cos"==V?wp.element.createElement(s.a,{onClose:function(){return K("")},onChoose:T}):null);if($&&wp.element.createElement(w,{className:"mine-cloudvod__placeholder is-loading"},wp.element.createElement(v,null)),F.key){var ee={cos:F,width:B||"100%",height:N||"500px",autoplay:L||!1,isLive:!1,rePlay:!1,playsinline:!0,preload:!0,controlBarVisibility:"hover",useH5Prism:!0,cover:U,components:[{name:"RateComponent",type:AliPlayerComponent.RateComponent}]};return wp.element.createElement(R,null,Y,wp.element.createElement("figure",{className:"wp-block-video"},wp.element.createElement(h,null,wp.element.createElement(u.a,{config:ee}))))}var te={fileID:M,appID:mcv_tcvod_config.appID,autoplay:L||!1};return U&&(te.poster=U),F.key&&(te.cos=F),wp.element.createElement(R,null,Y,wp.element.createElement("figure",{className:"wp-block-video"},wp.element.createElement(h,null,wp.element.createElement(l.a,{config:te,width:B,height:N}))))})},function(e,t,n){"use strict";var r=n(72),__=wp.i18n.__;wp.element.useEffect,wp.data.dispatch;t.a=function(e){var t=e.closePopup,n=e.onSelect,o=function(e){e.videoId=e.Vid,e.thumbnail=e.CoverUrl,e.preview=e.CoverUrl,n(e)};return wp.element.createElement(r.a,{onClose:t,onChoose:o,title:__("Select or Upload TcVod Video","mine-cloudvod")})}},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}function o(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var i=n(1),a=n.n(i),c=n(0),s=n(73),l=n(74),u=n(76),d=n(78),p=n(80),f=n(28),m=n(82),h=n(84),v=n.n(h),g=n(30),y=this,b=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=o(["\n           overflow: auto;\n           display: flex;\n           flex-direction: column;\n         "],["\n           overflow: auto;\n           display: flex;\n           flex-direction: column;\n         "]),_=o(["\n             padding: 12px 24px;\n             overflow: auto;\n             display: flex;\n             flex-direction: column;\n           "],["\n             padding: 12px 24px;\n             overflow: auto;\n             display: flex;\n             flex-direction: column;\n           "]),x=o(["\n                     margin: 0 0 20px 0;\n                   "],["\n                     margin: 0 0 20px 0;\n                   "]),O=o(["\n               display: flex;\n               align-items: stretch;\n             "],["\n               display: flex;\n               align-items: stretch;\n             "]),__=wp.i18n.__,C=wp.components,E=(C.Button,C.DropZone),k=C.DropZoneProvider,j=C.Notice,S=wp.element,T=S.useState,A=S.useEffect,R=(S.Fragment,wp.data),P=R.dispatch,D=R.useSelect;t.a=function(e){var t=e.onClose,n=e.onChoose,o=T(""),i=b(o,2),h=i[0],C=(i[1],D(function(e){return e("mine-cloudvod/vod").uploads()})),S=D(function(e){return e("mine-cloudvod/vod").errors()}),R=D(function(e){return e("mine-cloudvod/vod").ui("currentCategory")});A(function(){P("mine-cloudvod/vod").setVideosFetched(!1),P("mine-cloudvod/vod").setVideos([])},[]);var I=function(){if(C.length){return void(confirm("Discard your uploads?")&&(t(),P("mine-cloudvod/vod").setUploads([])))}P("mine-cloudvod/vod").setUI("pageNo",1),t()},B=function(e){for(var t=0;t<e.length;t++)e[t].id=t+C.length;P("mine-cloudvod/vod").addUploads(e)},N=function(e){jQuery("#mcv_tcvod_"+e.id).remove(),jQuery("#mcv_tcvod_uploads").children().length<1&&P("mine-cloudvod/vod").setUploads([])},M=__("Select or Upload TcVod Video","mine-cloudvod"),U=function(){var e=r(a.a.mark(function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sync:!1};n.sync;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wp.apiFetch({path:wp.url.addQueryArgs("mine-cloudvod/v1/qcloud/vod/usign",{cid:R.ClassId})});case 2:return t=e.sent,e.abrupt("return",t.data.usign);case 4:case"end":return e.stop()}},e,y)}));return function(){return e.apply(this,arguments)}}(),L=new v.a({getSignature:U}),F=Object(c.b)(u.a,{afterUpload:Object(c.b)(m.a,{tcVod:L,uploads:C,removeUpload:N,error:h})}),z=Object(c.b)(s.a,null),H=Object(c.b)(f.a,{onChoose:n});return Object(c.b)(g.a,{title:M,header:F,mainContent:function(){return Object(c.b)(k,{css:Object(c.a)(w)},Object(c.b)("div",{css:Object(c.a)(_)},!!S.length&&S.map(function(e){return Object(c.b)(j,{css:Object(c.a)(x),status:"error",onRemove:function(){return P("mine-cloudvod/vod").removeError(e)}},e)}),R?Object(c.b)(d.a,null):Object(c.b)(p.a,null),Object(c.b)("div",{css:Object(c.a)(O)},Object(c.b)(l.a,null)),Object(c.b)(E,{label:"Drop files",onFilesDrop:B})))}(),onClose:I,footer:H,sidebar:z})}},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}var i=n(1),a=n.n(i),c=n(2),s=n(0),l=this,u=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=r(["\n    margin-top: 5px;\n  "],["\n    margin-top: 5px;\n  "]),p=r(["\n            position: relative;\n          "],["\n            position: relative;\n          "]),f=r(["\n              ","\n              top: 8px;\n              right: 8px;\n              font-size: 11px;\n              color: #ffffff;\n              padding: 2px 10px;\n              border-radius: 9999px;\n            "],["\n              ","\n              top: 8px;\n              right: 8px;\n              font-size: 11px;\n              color: #ffffff;\n              padding: 2px 10px;\n              border-radius: 9999px;\n            "]),__=wp.i18n.__,m=wp.components,h=m.Button,v=m.BaseControl,g=m.Disabled,y=m.Card,b=m.CardBody,w=wp.element,_=w.useState,x=(w.useContext,w.useEffect),O=wp.data,C=O.dispatch,E=O.useSelect;t.a=function(){var e=_(!1),t=u(e,2),n=t[0],r=t[1],i=_(!1),m=u(i,2),w=m[0],O=m[1],k=_(null),j=u(k,2),S=j[0],T=j[1],A=E(function(e){return e("mine-cloudvod/vod").ui("selectedId")}),R=E(function(e){return e("mine-cloudvod/vod").videos()});x(function(){T(A?R.find(function(e){return e.Vid===A}):null)},[R,A]);var P=function(){var e=o(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wp.apiFetch({path:"mine-cloudvod/v1/qcloud/vod/delvideo",method:"DELETE",data:{videoId:S.Vid}});case 2:C("mine-cloudvod/vod").removeVideo(S),C("mine-cloudvod/vod").setUI("selectedId",null),O(!1),r(!1);case 6:case"end":return e.stop()}},e,l)}));return function(){return e.apply(this,arguments)}}(),D=Object(s.a)(d);if(!S)return"";var I=function(e){return e.CoverUrl?e.CoverUrl:"https://imgcache.qq.com/open_proj/proj_qcloud_v2/mc_2014/video/console/v2/css/img/vod/default-cover.png"};return S&&Object(s.b)("div",{className:"mine-cloudvod__media-modal-sidebar-content"},Object(s.b)(v,{css:Object(s.a)(p)},Object(s.b)(g,{key:S.Vid},Object(c.e)(S)&&I(S)&&Object(s.b)("img",{src:I(S),css:{maxWidth:"100%"}})),Object(s.b)(h,{isSmall:!0,isPrimary:!0,isBusy:!Object(c.e)(S),css:Object(s.a)(f,Object(c.e)(S)?"position: absolute;":"")},Object(c.d)(S))),Object(s.b)(v,null,Object(s.b)(v.VisualLabel,null,__("Name","mine-cloudvod")),Object(s.b)("h3",{css:D},S.Name)),Object(s.b)(v,null,Object(s.b)(v.VisualLabel,null,__("Category","mine-cloudvod")),Object(s.b)("h3",{css:D},S.ClassName)),Object(s.b)(v,null,Object(s.b)(v.VisualLabel,null,__("Size","mine-cloudvod")),Object(s.b)("h3",{css:D},Object(c.a)(S.Size||0))),Object(s.b)(v,null,Object(s.b)(v.VisualLabel,null,__("Length","mine-cloudvod")),Object(s.b)("h3",{css:D},Object(c.c)(S.Duration))),Object(s.b)(v,null,Object(s.b)(v.VisualLabel,null,__("Created","mine-cloudvod")),Object(s.b)("h3",{css:D},Object(c.f)(S.CreateTime))),Object(s.b)(v,null,n?Object(s.b)(y,null,Object(s.b)(b,null,Object(s.b)("p",null,Object(s.b)("strong",null,__("Are you sure?","mine-cloudvod"))),Object(s.b)("p",null,__("Are you sure you want to delete this video?","mine-cloudvod")),Object(s.b)(h,{isDestructive:!0,disabled:w,isBusy:w,onClick:function(e){e.preventDefault(),P(),O(!0)}},__("Yes","mine-cloudvod")),Object(s.b)(h,{onClick:function(){return r(!1)}},__("Cancel","mine-cloudvod")))):Object(s.b)(h,{isDestructive:!0,onClick:function(){r(!n)}},__("Delete video","mine-cloudvod"))))}},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}var i=n(1),a=n.n(i),c=n(0),s=n(75),l=n(27),u=this,d=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=r(["\n          height: 100%;\n          text-align: center;\n        "],["\n          height: 100%;\n          text-align: center;\n        "]),f=r(["\n            text-align:center;\n          "],["\n            text-align:center;\n          "]),__=wp.i18n.__,m=wp.element,h=m.useState,v=m.useEffect,g=m.Fragment,y=wp.components,b=y.Flex,w=y.FormFileUpload,_=y.Notice,x=y.Button,O=wp.data,C=O.dispatch,E=O.useSelect;t.a=function(){var e=h(!1),t=d(e,2),n=t[0],r=t[1],i=h(""),m=d(i,2),y=m[0],O=m[1],k=h(0),j=d(k,2),S=j[0],T=j[1],A=h(!1),R=d(A,2),P=R[0],D=R[1],I=E(function(e){return e("mine-cloudvod/vod").videosFetched()}),B=E(function(e){return e("mine-cloudvod/vod").videos()}),N=E(function(e){return e("mine-cloudvod/vod").uploads()}),M=E(function(e){return e("mine-cloudvod/vod").ui("currentCategory")}),U=E(function(e){return e("mine-cloudvod/vod").ui("pageNo")});v(function(){I||L()},[I]);var L=function(){var e=o(a.a.mark(function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sync:!1},r=n.sync;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wp.apiFetch({path:wp.url.addQueryArgs("mine-cloudvod/v1/qcloud/vod/videos",{page:U,items_per_page:100,cid:M?M.ClassId:0})});case 3:t=e.sent,C("mine-cloudvod/vod").setVideos(t.items),C("mine-cloudvod/vod").setUI("pageNo",U?U+1:2),T(t.totalItems),O(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),r||C("mine-cloudvod/vod").addError(e.t0.message);case 13:return e.prev=13,C("mine-cloudvod/vod").setVideosFetched(!0),e.finish(13);case 16:case"end":return e.stop()}},e,u,[[0,10,13,16]])}));return function(){return e.apply(this,arguments)}}(),F=function(){var e=o(a.a.mark(function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sync:!1},r=n.sync;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D(!0),e.next=4,wp.apiFetch({path:wp.url.addQueryArgs("mine-cloudvod/v1/qcloud/vod/videos",{page:U,items_per_page:100})});case 4:t=e.sent,C("mine-cloudvod/vod").addVideos(t.items),C("mine-cloudvod/vod").setUI("pageNo",U?U+1:2),O(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),r||C("mine-cloudvod/vod").addError(e.t0.message);case 13:return e.prev=13,D(!1),e.finish(13);case 16:case"end":return e.stop()}},e,u,[[0,10,13,16]])}));return function(){return e.apply(this,arguments)}}();return y?Object(c.b)(_,{status:"warning",isDismissible:!1},Object(c.b)("div",{css:{display:"flex",alignItems:"center"}},Object(c.b)(l.a,{css:{flex:1}}),y)):I?Object(c.b)(g,null,B&&B.length?Object(c.b)("div",null,Object(c.b)("h2",null,__("Videos","mine-cloudvod")),B.map(function(e){return Object(c.b)(s.a,{video:e,onClick:function(){r(n.Vid===e.Vid?{}:e)},selected:n.Vid===e.Vid})}),Object(c.b)("div",{css:Object(c.a)(f)},P&&Object(c.b)(l.a,{css:{flex:1,marginBottom:10}}),Object(c.b)("p",null,sprintf(__("Showing %1$s of %2$s media items","mine-cloudvod"),B.length,S)),B.length<S&&Object(c.b)(x,{isPrimary:!0,size:"small",onClick:function(e){e.preventDefault(),F()}},__("Load more")))):function(){return Object(c.b)(b,{align:"center",justify:"center",css:Object(c.a)(p)},Object(c.b)("div",null,Object(c.b)("h2",null,__("Drop video files here to upload","mine-cloudvod")),Object(c.b)("p",null,__("or browse for a video","mine-cloudvod")),Object(c.b)(w,{isSecondary:!0,accept:"video/mp4,video/x-m4v,video/*",onChange:function(e){if(e.target.files){for(var t=0;t<e.target.files.length;t++)e.target.files[t].id=t+N.length;C("mine-cloudvod/vod").addUploads(e.target.files),jQuery(e.target).val(null)}}},__("Upload New Video","mine-cloudvod"))))}()):Object(c.b)(l.a,{css:{flex:1}})}},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(0),i=n(26),a=n(2),c=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=r(["\n        font-size: 11px;\n        color: #ffffff;\n        padding: 2px 10px;\n        border-radius: 9999px;\n      "],["\n        font-size: 11px;\n        color: #ffffff;\n        padding: 2px 10px;\n        border-radius: 9999px;\n      "]),l=r(["\n          max-width: 100%;\n          object-fit: initial;\n          width: 100%;\n          height: 140px;\n          display: block;\n        "],["\n          max-width: 100%;\n          object-fit: initial;\n          width: 100%;\n          height: 140px;\n          display: block;\n        "]),u=r(["\n        display: flex;\n        align-items: center;\n      "],["\n        display: flex;\n        align-items: center;\n      "]),d=r(["\n          margin-right: 10px;\n          display: flex;\n          align-items: center;\n        "],["\n          margin-right: 10px;\n          display: flex;\n          align-items: center;\n        "]),p=r(["\n            width: 14px;\n            height: 14px;\n            font-size: 14px;\n            margin-right: 5px;\n            opacity: 0.5;\n          "],["\n            width: 14px;\n            height: 14px;\n            font-size: 14px;\n            margin-right: 5px;\n            opacity: 0.5;\n          "]),f=r(["\n          display: flex;\n          align-items: center;\n        "],["\n          display: flex;\n          align-items: center;\n        "]),m=r(["\n            opacity: 0.5;\n            width: 14px;\n            height: 14px;\n            font-size: 14px;\n            margin-right: 5px;\n          "],["\n            opacity: 0.5;\n            width: 14px;\n            height: 14px;\n            font-size: 14px;\n            margin-right: 5px;\n          "]),h=r(["\n        ","\n        border: 1px solid\n          ",";\n      "],["\n        ","\n        border: 1px solid\n          ",";\n      "]),v=wp.components,g=v.Icon,y=v.Button,b=wp.element,w=b.useEffect,_=b.useState,x=wp.data,O=x.useSelect,C=x.dispatch;t.a=function(e){var t=e.video,n=_(),r=c(n,2),v=r[0],b=r[1],x=O(function(e){return e("mine-cloudvod/vod").ui("selectedId")});w(function(){b(x?x===t.Vid:null)},[x]);return Object(o.b)(i.a,{onClick:function(){C("mine-cloudvod/vod").setUI("selectedId",t.Vid)},css:Object(o.a)(h,v&&"box-shadow: 0 0 0 0px #fff, 0 0 0 3px var(--wp-admin-theme-color, #007cba);",v?"var(--wp-admin-theme-color, #007cba)":"#e0e0e0"),thumbnail:function(){var e=t.CoverUrl?t.CoverUrl:"https://imgcache.qq.com/open_proj/proj_qcloud_v2/mc_2014/video/console/v2/css/img/vod/default-cover.png";return Object(o.b)("img",{css:Object(o.a)(l),src:e})}(),badge:function(){return Object(o.b)(y,{isSmall:!0,isPrimary:!0,isBusy:!Object(a.e)(t),css:Object(o.a)(s)},Object(a.d)(t))}(),title:t.Name,footer:function(){return Object(o.b)("div",{css:Object(o.a)(u)},Object(o.b)("span",{css:Object(o.a)(d)},Object(o.b)(g,{css:Object(o.a)(p),icon:"clock",size:14}),Object(o.b)("span",null,Object(a.c)(t.Duration))),Object(o.b)("span",{css:Object(o.a)(f)},Object(o.b)(g,{css:Object(o.a)(m),icon:"database",size:14}),Object(o.b)("span",null,Object(a.a)(t.Size))))}(),after:""})}},function(e,t,n){"use strict";var r=n(0),o=n(77),__=wp.i18n.__,i=wp.components,a=i.Flex,c=i.FlexBlock,s=i.FlexItem,l=(i.Button,i.FormFileUpload),u=wp.data,d=u.dispatch;u.useSelect;t.a=function(e){var t=(e.uploads,e.afterUpload);return Object(r.b)(a,null,Object(r.b)(c,null,Object(r.b)(a,{justify:"flex-start"},Object(r.b)(l,{multiple:!0,isPrimary:!0,accept:"video/mp4,video/x-m4v,video/*",onChange:function(e){if(e.target.files){for(var t=0;t<e.target.files.length;t++)e.target.files[t].id=t+e.target.files.length;d("mine-cloudvod/vod").addUploads(e.target.files),jQuery(e.target).val(null)}}},__("Upload Videos","mine-cloudvod")),Object(r.b)(o.a,null),t)),Object(r.b)(s,null))}},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}var o=n(1),i=n.n(o),a=n(0),c=this,s=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n              margin-bottom: 15px;\n            "],["\n              margin-bottom: 15px;\n            "]),__=wp.i18n.__,u=wp.components,d=u.Button,p=u.TextControl,f=u.Modal,m=u.BaseControl,h=wp.element,v=h.useState,g=h.Fragment,y=wp.data,b=y.dispatch,w=y.useSelect;t.a=function(){var e=v(""),t=s(e,2),n=t[0],o=t[1],u=v(!1),h=s(u,2),y=h[0],_=h[1],x=w(function(e){return e("mine-cloudvod/vod").ui("Categories")}),O=w(function(e){return e("mine-cloudvod/vod").ui("createCollection")}),C=function(e){b("mine-cloudvod/vod").setUI("createCollection",e)},E=function(){var e=r(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.prev=1,e.next=4,wp.apiFetch({path:"mine-cloudvod/v1/qcloud/vod/createCategory",method:"POST",data:{name:n}});case 4:t=e.sent,x.push(t),b("mine-cloudvod/vod").setUI("Categories",x),b("mine-cloudvod/vod").setUI("currentCategory",t),b("mine-cloudvod/vod").setVideosFetched(!1),o(""),C(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0);case 16:return e.prev=16,_(!1),e.finish(16);case 19:case"end":return e.stop()}},e,c,[[1,13,16,19]])}));return function(){return e.apply(this,arguments)}}();return Object(a.b)(g,null,Object(a.b)(d,{isSecondary:!0,onClick:function(){return C(!0)}},__("Create Category","mine-cloudvod")),O&&Object(a.b)(f,{overlayClassName:"mcv-modal",title:__("Create New Category","mine-cloudvod"),shouldCloseOnClickOutside:!1,isDismissible:!1},Object(a.b)(p,{css:Object(a.a)(l),tabIndex:"0",placeholder:__("Enter a category name","mine-cloudvod"),value:n,onChange:function(e){return o(e)}}),Object(a.b)(m,null,Object(a.b)(d,{isBusy:y,disabled:y,isPrimary:!0,onClick:function(){E()}},__("Create","mine-cloudvod"))," ",Object(a.b)(d,{onClick:function(){return C(!1)}},__("Cancel","mine-cloudvod")))))}},function(e,t,n){"use strict";var r=n(0),o=n(79),i=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n        margin-bottom: 2em;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        border-bottom: 1px solid #ccc;\n      "],["\n        margin-bottom: 2em;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        border-bottom: 1px solid #ccc;\n      "]),__=wp.i18n.__,a=(wp.element.useState,wp.data),c=a.dispatch,s=a.useSelect,l=wp.components;l.Button,l.Modal,l.BaseControl;t.a=function(){var e=s(function(e){return e("mine-cloudvod/vod").ui("currentCategory")});return Object(r.b)("div",{css:Object(r.a)(i)},Object(r.b)("div",null,Object(r.b)(o.a,{onClick:function(){c("mine-cloudvod/vod").setUI("currentCategory",null),c("mine-cloudvod/vod").setUI("pageNo",1),c("mine-cloudvod/vod").setVideosFetched(!1)}},__("Back To All Videos","presto-player")),Object(r.b)("h2",null,e.ClassName)))}},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(0),i=r(["\n        display: inline-flex;\n        align-items: center;\n        cursor: pointer;\n        color: var(--wp-admin-theme-color, #007cba);\n        padding: 6px 0;\n      "],["\n        display: inline-flex;\n        align-items: center;\n        cursor: pointer;\n        color: var(--wp-admin-theme-color, #007cba);\n        padding: 6px 0;\n      "]),a=r(["\n          width: 14px;\n          height: 14px;\n          font-size: 14px;\n          margin-right: 5px;\n        "],["\n          width: 14px;\n          height: 14px;\n          font-size: 14px;\n          margin-right: 5px;\n        "]),c=wp.components.Icon;t.a=function(e){var t=e.children,n=e.onClick;return Object(o.b)("span",{onClick:n,css:Object(o.a)(i)},Object(o.b)(c,{css:Object(o.a)(a),icon:"arrow-left-alt",size:14}),Object(o.b)("span",null,t))}},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}var o=n(1),i=n.n(o),a=n(0),c=n(81),s=this,l=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n            display: flex;\n            align-items: stretch;\n            overflow: auto;\n            flex-wrap: wrap;\n          "],["\n            display: flex;\n            align-items: stretch;\n            overflow: auto;\n            flex-wrap: wrap;\n          "]),__=wp.i18n.__,u=wp.element.useEffect,d=wp.data,p=d.useSelect,f=d.dispatch;t.a=function(){var e=p(function(e){return e("mine-cloudvod/vod").ui("Categories")}),t=function(){var e=r(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wp.apiFetch({path:wp.url.addQueryArgs("mine-cloudvod/v1/qcloud/vod/categories",{})});case 3:t=e.sent,f("mine-cloudvod/vod").setUI("Categories",t),e.next=12;break;case 7:if(e.prev=7,e.t0=e.catch(0),401!==e.t0.data.status){e.next=11;break}return e.abrupt("return");case 11:f("mine-cloudvod/vod").addError(e.t0.message);case 12:case"end":return e.stop()}},e,s,[[0,7]])}));return function(){return e.apply(this,arguments)}}();return u(function(){t()},[]),!!e&&Object(a.b)("div",null,Object(a.b)("h2",null,__("Categories","presto-player")),Object(a.b)("div",{css:Object(a.a)(l)},e.map(function(e){return e.ClassId>0&&Object(a.b)(c.a,{category:e,key:e.cateId})})))}},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=(n(26),n(0)),i=r(["\n          margin-right: 15px;\n          padding: 5px 0;\n          cursor: pointer;\n          font-weight: bold;\n          line-height: 20px;\n        "],["\n          margin-right: 15px;\n          padding: 5px 0;\n          cursor: pointer;\n          font-weight: bold;\n          line-height: 20px;\n        "]),a=r(["\n            color: var(--wp-admin-theme-color);\n            margin-right: 5px;\n          "],["\n            color: var(--wp-admin-theme-color);\n            margin-right: 5px;\n          "]),c=wp.components.Icon,s=wp.data.dispatch;t.a=function(e){var t=e.category,n=function(e){e.preventDefault(),s("mine-cloudvod/vod").setUI("currentCategory",t),s("mine-cloudvod/vod").setUI("pageNo",1),s("mine-cloudvod/vod").setVideosFetched(!1)};return Object(o.b)("div",{onClick:n,css:Object(o.a)(i)},Object(o.b)(c,{icon:"category",css:Object(o.a)(a)}),t.ClassName)}},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(0),i=(n(7),n(83)),a=r(["\n        overflow: auto;\n        display: flex;\n        align-items: center;\n        position: relative;\n      "],["\n        overflow: auto;\n        display: flex;\n        align-items: center;\n        position: relative;\n      "]),c=r(["\n                margin-right: 0px;\n              "],["\n                margin-right: 0px;\n              "]),s=wp.data,l=s.dispatch;s.useSelect,wp.element.useState;t.a=function(e){var t=e.tcVod,n=e.uploads,r=e.removeUpload,s=e.error;return n.length?Object(o.b)("div",{id:"mcv_tcvod_uploads",css:Object(o.a)(a)},n.length&&n.map(function(e){var n=t.upload({mediaFile:e});return n.on("media_upload",function(t){r(e)}),n.done().then(function(e){l("mine-cloudvod/vod").setVideosFetched(!1)}),Object(o.b)(i.a,{css:Object(o.a)(c),uploader:n,file:e,error:s})})):""}},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(0),i=n(7),a=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=r(["\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        animation: components-button__busy-animation 2500ms infinite linear;\n        opacity: 1;\n        padding: 6px 12px;\n        border-radius: 99999px;\n        border: 1px solid #dddddd;\n        background-size: 100px 100%;\n        background-image: linear-gradient(\n          -45deg,\n          #ffffff 33%,\n          #f3f3f3 33%,\n          #f3f3f3 70%,\n          #ffffff 70%\n        );\n      "],["\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        animation: components-button__busy-animation 2500ms infinite linear;\n        opacity: 1;\n        padding: 6px 12px;\n        border-radius: 99999px;\n        border: 1px solid #dddddd;\n        background-size: 100px 100%;\n        background-image: linear-gradient(\n          -45deg,\n          #ffffff 33%,\n          #f3f3f3 33%,\n          #f3f3f3 70%,\n          #ffffff 70%\n        );\n      "]),s=r(["\n          flex: 1;\n          white-space: nowrap;\n          overflow: hidden;\n          max-width: 50px;\n          text-overflow: ellipsis;\n          font-weight: bold;\n        "],["\n          flex: 1;\n          white-space: nowrap;\n          overflow: hidden;\n          max-width: 50px;\n          text-overflow: ellipsis;\n          font-weight: bold;\n        "]),l=r(["\n          display: flex;\n          align-items: center;\n        "],["\n          display: flex;\n          align-items: center;\n        "]),u=r(["\n            width: 150px;\n            height: 3px;\n            margin: 0 5px;\n            background: #e3e3e3;\n            border-radius: 9999px;\n            overflow: hidden;\n          "],["\n            width: 150px;\n            height: 3px;\n            margin: 0 5px;\n            background: #e3e3e3;\n            border-radius: 9999px;\n            overflow: hidden;\n          "]),d=(wp.components.Icon,wp.element),p=d.useState,f=(d.useEffect,d.useContext,wp.data);f.useSelect,f.dispatch,wp.i18n.__;t.a=function(e){var t=e.uploader,n=e.file,r=e.error,d=p(0),f=a(d,2),m=f[0],h=f[1];return t.on("media_progress",function(e){console.log(e),h(100*e.percent)}),Object(o.b)("div",{id:"mcv_tcvod_"+n.id,css:Object(o.a)(c)},Object(o.b)("div",{css:Object(o.a)(s)},!!r&&r,n.name,"..."),Object(o.b)("div",{css:Object(o.a)(l)},Object(o.b)(i.a,{css:Object(o.a)(u),id:n.id,progress:m})))}},function(module,exports,__webpack_require__){(function(module){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"object"==_typeof(exports)&&"object"==_typeof(module)?module.exports=t():(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=t,void 0!==(__WEBPACK_AMD_DEFINE_RESULT__="function"===typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(window,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==("undefined"===typeof e?"undefined":_typeof(e))&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(t){return e[t]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(52),a=function(){function e(e){this.allowReport=!0,this.enableResume=!0,this.getSignature=e.getSignature,void 0!==e.allowReport&&(this.allowReport=e.allowReport),void 0!==e.enableResume&&(this.enableResume=e.enableResume),this.appId=e.appId,this.reportId=e.reportId}return e.prototype.upload=function(e){var t=r({getSignature:this.getSignature,appId:this.appId,reportId:this.reportId,enableResume:this.enableResume},e),n=new o.default(t);return this.allowReport&&this.initReporter(n),n.start(),n},e.prototype.initReporter=function(e){new i.VodReporter(e)},e}();t.default=a},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}s((r=r.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){function n(n){return function(a){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(i=c.trys,!((i=i.length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){c=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){c.label=n[1];break}if(6===n[0]&&c.label<i[1]){c.label=i[1],i=n;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(n);break}i[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{r=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var r,o,i,a,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0}),t.UploaderEvent=t.vodAxios=void 0;var s,l=n(2),u=n(6),d=n(23),p=n(24),f=n(51),m=n(52),h=n(54);t.vodAxios=p.default.create(),t.vodAxios.interceptors.response.use(function(e){return e},function(e){return isNaN(e.code)&&(e.code=500),Promise.reject(e)}),function(e){e.video_progress="video_progress",e.media_progress="media_progress",e.video_upload="video_upload",e.media_upload="media_upload",e.cover_progress="cover_progress",e.cover_upload="cover_upload"}(s=t.UploaderEvent||(t.UploaderEvent={}));var v=function(e){function n(t){var n=e.call(this)||this;return n.sessionName="",n.vodSessionKey="",n.appId=0,n.reqKey=h(),n.reportId="",n.enableResume=!0,n.applyRequestTimeout=5e3,n.applyRequestRetryCount=3,n.commitRequestTimeout=5e3,n.commitRequestRetryCount=3,n.retryDelay=1e3,n.validateInitParams(t),n.videoFile=t.mediaFile||t.videoFile,n.getSignature=t.getSignature,n.enableResume=t.enableResume,n.videoName=t.mediaName||t.videoName,n.coverFile=t.coverFile,n.fileId=t.fileId,n.applyRequestTimeout=t.applyRequestTimeout||n.applyRequestTimeout,n.commitRequestTimeout=t.commitRequestTimeout||n.commitRequestTimeout,n.retryDelay=t.retryDelay||n.retryDelay,n.appId=t.appId||n.appId,n.reportId=t.reportId||n.reportId,n.cosAuthTime=0,n.genFileInfo(),n}return o(n,e),n.prototype.setStorage=function(e,t){if(e){var n="webugc_"+l(e);try{localStorage.setItem(n,t)}catch(e){}}},n.prototype.getStorage=function(e){if(e){var t="webugc_"+l(e),n=null;try{n=localStorage.getItem(t)}catch(e){}return n}},n.prototype.delStorage=function(e){if(e){var t="webugc_"+l(e);try{localStorage.removeItem(t)}catch(e){}}},n.prototype.validateInitParams=function(e){if(!f.default.isFunction(e.getSignature))throw new Error("getSignature must be a function");if(e.videoFile&&!f.default.isFile(e.videoFile))throw new Error("videoFile must be a File")},n.prototype.genFileInfo=function(){var e=this.videoFile;if(e){var t=e.name.lastIndexOf("."),n="";if(this.videoName){if(!f.default.isString(this.videoName))throw new Error("mediaName must be a string");if(/[:*?<>\"\\/|]/g.test(this.videoName))throw new Error('Cant use these chars in filename: \\ / : * ? " < > |');n=this.videoName}else n=e.name.substring(0,t);this.videoInfo={name:n,type:e.name.substring(t+1).toLowerCase(),size:e.size},this.sessionName+=e.name+"_"+e.size+";"}var r=this.coverFile;if(r){var o=r.name,i=o.lastIndexOf(".");this.coverInfo={name:o.substring(0,i),type:o.substring(i+1).toLowerCase(),size:r.size},this.sessionName+=r.name+"_"+r.size+";"}},n.prototype.applyUploadUGC=function(e){return void 0===e&&(e=0),a(this,void 0,void 0,function(){function r(t){return a(this,void 0,void 0,function(){return c(this,function(r){switch(r.label){case 0:if(500===t.code&&(n.host=n.host===f.HOST.MAIN?f.HOST.BACKUP:f.HOST.MAIN),o.emit(m.VodReportEvent.report_apply,{err:t,requestStartTime:p}),o.delStorage(o.sessionName),o.applyRequestRetryCount==e){if(t)throw t;throw new Error("apply upload failed")}return[4,f.default.delay(o.retryDelay)];case 1:return r.sent(),[2,o.applyUploadUGC(e+1)]}})})}var o,i,s,l,u,d,p,h,v,g,y,b;return c(this,function(e){switch(e.label){case 0:return o=this,[4,this.getSignature()];case 1:if(i=e.sent(),l=this.videoInfo,u=this.coverInfo,d=this.vodSessionKey||this.enableResume&&this.getStorage(this.sessionName))s={signature:i,vodSessionKey:d};else if(l)s={signature:i,videoName:l.name,videoType:l.type,videoSize:l.size},u&&(s.coverName=u.name,s.coverType=u.type,s.coverSize=u.size);else{if(!this.fileId||!u)throw"Wrong params, please check and try again";s={signature:i,fileId:this.fileId,coverName:u.name,coverType:u.type,coverSize:u.size}}p=new Date,e.label=2;case 2:return e.trys.push([2,4,,5]),[4,t.vodAxios.post("https://"+n.host+"/v3/index.php?Action=ApplyUploadUGC",s,{timeout:this.applyRequestTimeout,withCredentials:!1})];case 3:return h=e.sent(),[3,5];case 4:return[2,r(e.sent())];case 5:return 0==(v=h.data).code?(g=v.data,y=g.vodSessionKey,this.setStorage(this.sessionName,y),this.vodSessionKey=y,this.appId=g.appId,this.emit(m.VodReportEvent.report_apply,{data:g,requestStartTime:p}),[2,g]):((b=new Error(v.message)).code=v.code,[2,r(b)])}})})},n.prototype.uploadToCos=function(e){return a(this,void 0,void 0,function(){var t,n,r,o,l,d,p,h;return c(this,function(v){switch(v.label){case 0:return t=this,n={bucket:e.storageBucket+"-"+e.storageAppId,region:e.storageRegionV5},r=new u({getAuthorization:function(n,r){return a(this,void 0,void 0,function(){var n,o;return c(this,function(i){switch(i.label){case 0:return n=f.default.getUnix(),o=.9*(e.tempCertificate.expiredTime-e.timestamp),0!==t.cosAuthTime?[3,1]:(t.cosAuthTime=n,[3,3]);case 1:return t.cosAuthTime&&n-t.cosAuthTime>=o?[4,t.applyUploadUGC()]:[3,3];case 2:e=i.sent(),t.cosAuthTime=f.default.getUnix(),i.label=3;case 3:return r({TmpSecretId:e.tempCertificate.secretId,TmpSecretKey:e.tempCertificate.secretKey,XCosSecurityToken:e.tempCertificate.token,StartTime:e.timestamp,ExpiredTime:e.tempCertificate.expiredTime}),[2]}})})}}),this.cos=r,o=[],this.videoFile&&(l=i(i({},n),{file:this.videoFile,key:e.video.storagePath,onProgress:function(e){t.emit(s.video_progress,e),t.emit(s.media_progress,e)},onUpload:function(e){t.emit(s.video_upload,e),t.emit(s.media_upload,e)},onTaskReady:function(e){t.taskId=e}}),o.push(l)),this.coverFile&&(d=i(i({},n),{file:this.coverFile,key:e.cover.storagePath,onProgress:function(e){t.emit(s.cover_progress,e)},onUpload:function(e){t.emit(s.cover_upload,e)},onTaskReady:f.default.noop}),o.push(d)),p=new Date,h=o.map(function(e){return new Promise(function(n,o){r.sliceUploadFile({Bucket:e.bucket,Region:e.region,Key:e.key,Body:e.file,onTaskReady:e.onTaskReady,onProgress:e.onProgress},function(r,i){return e.file===t.videoFile&&t.emit(m.VodReportEvent.report_cos_upload,{err:r,requestStartTime:p}),r?(t.delStorage(t.sessionName),'{"error":"error","headers":{}}'===JSON.stringify(r)?o(new Error("cors error")):void o(r)):(e.onUpload(i),n())})})}),[4,Promise.all(h)];case 1:return[2,v.sent()]}})})},n.prototype.commitUploadUGC=function(e){return void 0===e&&(e=0),a(this,void 0,void 0,function(){function r(t){return a(this,void 0,void 0,function(){return c(this,function(r){switch(r.label){case 0:if(500===t.code&&(n.host=n.host===f.HOST.MAIN?f.HOST.BACKUP:f.HOST.MAIN),o.emit(m.VodReportEvent.report_commit,{err:t,requestStartTime:l}),o.commitRequestRetryCount==e){if(t)throw t;throw new Error("commit upload failed")}return[4,f.default.delay(o.retryDelay)];case 1:return r.sent(),[2,o.commitUploadUGC(e+1)]}})})}var o,i,s,l,u,d,p;return c(this,function(e){switch(e.label){case 0:return o=this,[4,this.getSignature()];case 1:i=e.sent(),this.delStorage(this.sessionName),s=this.vodSessionKey,l=new Date,e.label=2;case 2:return e.trys.push([2,4,,5]),[4,t.vodAxios.post("https://"+n.host+"/v3/index.php?Action=CommitUploadUGC",{signature:i,vodSessionKey:s},{timeout:this.commitRequestTimeout,withCredentials:!1})];case 3:return u=e.sent(),[3,5];case 4:return[2,r(e.sent())];case 5:return 0==(d=u.data).code?(this.emit(m.VodReportEvent.report_commit,{data:d.data,requestStartTime:l}),[2,d.data]):((p=new Error(d.message)).code=d.code,[2,r(p)])}})})},n.prototype.start=function(){var e=this,t=new Date;this.donePromise=this._start().then(function(n){return e.emit(m.VodReportEvent.report_done,{err:{code:0},requestStartTime:t}),n}).catch(function(n){throw e.emit(m.VodReportEvent.report_done,{err:{code:n&&n.code||f.default.CLIENT_ERROR_CODE.UPLOAD_FAIL},requestStartTime:t}),n})},n.prototype._start=function(){return a(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,this.applyUploadUGC()];case 1:return e=t.sent(),[4,this.uploadToCos(e)];case 2:return t.sent(),[4,this.commitUploadUGC()];case 3:return[2,t.sent()]}})})},n.prototype.done=function(){return this.donePromise},n.prototype.cancel=function(){this.cos.cancelTask(this.taskId)},n.host=f.HOST.MAIN,n}(d.EventEmitter);t.default=v},function(module,exports,__webpack_require__){(function(process,global){var __WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";function Sha1(e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}var root="object"==("undefined"===typeof window?"undefined":_typeof(window))?window:{},NODE_JS=!root.JS_SHA1_NO_NODE_JS&&"object"==("undefined"===typeof process?"undefined":_typeof(process))&&process.versions&&process.versions.node;NODE_JS&&(root=global);var COMMON_JS=!root.JS_SHA1_NO_COMMON_JS&&"object"==("undefined"===typeof module?"undefined":_typeof(module))&&module.exports,AMD=__webpack_require__(5),HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[],createOutputMethod=function(e){return function(t){return new Sha1(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Sha1},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createOutputMethod(n)}return e},nodeWrap=function nodeWrap(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("sha1").update(e,"utf8").digest("hex");if(e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(void 0===e.length)return method(e);return crypto.createHash("sha1").update(new Buffer(e)).digest("hex")};return nodeMethod};Sha1.prototype.update=function(e){if(!this.finalized){var t="string"!=typeof e;t&&e.constructor===root.ArrayBuffer&&(e=new Uint8Array(e));for(var n,r,o=0,i=e.length||0,a=this.blocks;o<i;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),t)for(r=this.start;o<i&&r<64;++o)a[r>>2]|=e[o]<<SHIFT[3&r++];else for(r=this.start;o<i&&r<64;++o)(n=e.charCodeAt(o))<128?a[r>>2]|=n<<SHIFT[3&r++]:n<2048?(a[r>>2]|=(192|n>>6)<<SHIFT[3&r++],a[r>>2]|=(128|63&n)<<SHIFT[3&r++]):n<55296||n>=57344?(a[r>>2]|=(224|n>>12)<<SHIFT[3&r++],a[r>>2]|=(128|n>>6&63)<<SHIFT[3&r++],a[r>>2]|=(128|63&n)<<SHIFT[3&r++]):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++o)),a[r>>2]|=(240|n>>18)<<SHIFT[3&r++],a[r>>2]|=(128|n>>12&63)<<SHIFT[3&r++],a[r>>2]|=(128|n>>6&63)<<SHIFT[3&r++],a[r>>2]|=(128|63&n)<<SHIFT[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,r>=64?(this.block=a[16],this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha1.prototype.hash=function(){var e,t,n=this.h0,r=this.h1,o=this.h2,i=this.h3,a=this.h4,c=this.blocks;for(e=16;e<80;++e)t=c[e-3]^c[e-8]^c[e-14]^c[e-16],c[e]=t<<1|t>>>31;for(e=0;e<20;e+=5)n=(t=(r=(t=(o=(t=(i=(t=(a=(t=n<<5|n>>>27)+(r&o|~r&i)+a+1518500249+c[e]<<0)<<5|a>>>27)+(n&(r=r<<30|r>>>2)|~n&o)+i+1518500249+c[e+1]<<0)<<5|i>>>27)+(a&(n=n<<30|n>>>2)|~a&r)+o+1518500249+c[e+2]<<0)<<5|o>>>27)+(i&(a=a<<30|a>>>2)|~i&n)+r+1518500249+c[e+3]<<0)<<5|r>>>27)+(o&(i=i<<30|i>>>2)|~o&a)+n+1518500249+c[e+4]<<0,o=o<<30|o>>>2;for(;e<40;e+=5)n=(t=(r=(t=(o=(t=(i=(t=(a=(t=n<<5|n>>>27)+(r^o^i)+a+1859775393+c[e]<<0)<<5|a>>>27)+(n^(r=r<<30|r>>>2)^o)+i+1859775393+c[e+1]<<0)<<5|i>>>27)+(a^(n=n<<30|n>>>2)^r)+o+1859775393+c[e+2]<<0)<<5|o>>>27)+(i^(a=a<<30|a>>>2)^n)+r+1859775393+c[e+3]<<0)<<5|r>>>27)+(o^(i=i<<30|i>>>2)^a)+n+1859775393+c[e+4]<<0,o=o<<30|o>>>2;for(;e<60;e+=5)n=(t=(r=(t=(o=(t=(i=(t=(a=(t=n<<5|n>>>27)+(r&o|r&i|o&i)+a-1894007588+c[e]<<0)<<5|a>>>27)+(n&(r=r<<30|r>>>2)|n&o|r&o)+i-1894007588+c[e+1]<<0)<<5|i>>>27)+(a&(n=n<<30|n>>>2)|a&r|n&r)+o-1894007588+c[e+2]<<0)<<5|o>>>27)+(i&(a=a<<30|a>>>2)|i&n|a&n)+r-1894007588+c[e+3]<<0)<<5|r>>>27)+(o&(i=i<<30|i>>>2)|o&a|i&a)+n-1894007588+c[e+4]<<0,o=o<<30|o>>>2;for(;e<80;e+=5)n=(t=(r=(t=(o=(t=(i=(t=(a=(t=n<<5|n>>>27)+(r^o^i)+a-899497514+c[e]<<0)<<5|a>>>27)+(n^(r=r<<30|r>>>2)^o)+i-899497514+c[e+1]<<0)<<5|i>>>27)+(a^(n=n<<30|n>>>2)^r)+o-899497514+c[e+2]<<0)<<5|o>>>27)+(i^(a=a<<30|a>>>2)^n)+r-899497514+c[e+3]<<0)<<5|r>>>27)+(o^(i=i<<30|i>>>2)^a)+n-899497514+c[e+4]<<0,o=o<<30|o>>>2;this.h0=this.h0+n<<0,this.h1=this.h1+r<<0,this.h2=this.h2+o<<0,this.h3=this.h3+i<<0,this.h4=this.h4+a<<0},Sha1.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,o=this.h4;return HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o]},Sha1.prototype.toString=Sha1.prototype.hex,Sha1.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,o=this.h4;return[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,r>>24&255,r>>16&255,r>>8&255,255&r,o>>24&255,o>>16&255,o>>8&255,255&o]},Sha1.prototype.array=Sha1.prototype.digest,Sha1.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),e};var exports=createMethod();COMMON_JS?module.exports=exports:(root.sha1=exports,AMD&&(void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()}).call(this,__webpack_require__(3),__webpack_require__(4))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function i(){m&&p&&(m=!1,p.length?f=p.concat(f):h=-1,f.length&&a())}function a(){if(!m){var e=o(i);m=!0;for(var t=f.length;t;){for(p=f,f=[];++h<t;)p&&p[h].run();h=-1,t=f.length}p=null,m=!1,function(e){if(u===clearTimeout)return clearTimeout(e);if((u===r||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}(e)}}function c(e,t){this.fun=e,this.array=t}function s(){}var l,u,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{u="function"==typeof clearTimeout?clearTimeout:r}catch(e){u=r}}();var p,f=[],m=!1,h=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new c(e,t)),1!==f.length||m||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=s,d.addListener=s,d.once=s,d.off=s,d.removeListener=s,d.removeAllListeners=s,d.emit=s,d.prependListener=s,d.prependOnceListener=s,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==("undefined"===typeof window?"undefined":_typeof(window))&&(n=window)}e.exports=n},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){var r=n(7);e.exports=r},function(e,t,n){"use strict";var r=n(8),o=n(16),i=n(17),a=n(19),c=n(21),s={AppId:"",SecretId:"",SecretKey:"",XCosSecurityToken:"",ChunkRetryTimes:2,FileParallelLimit:3,ChunkParallelLimit:3,ChunkSize:1048576,SliceSize:1048576,CopyChunkParallelLimit:20,CopyChunkSize:10485760,CopySliceSize:10485760,MaxPartNumber:1e4,ProgressInterval:1e3,UploadQueueSize:1e4,Domain:"",ServiceDomain:"",Protocol:"",CompatibilityMode:!1,ForcePathStyle:!1,UseRawKey:!1,Timeout:0,CorrectClockSkew:!0,SystemClockOffset:0,UploadCheckContentMd5:!1,UploadAddMetaMd5:!1,UploadIdCacheLimit:50},l=function(e){this.options=r.extend(r.clone(s),e||{}),this.options.FileParallelLimit=Math.max(1,this.options.FileParallelLimit),this.options.ChunkParallelLimit=Math.max(1,this.options.ChunkParallelLimit),this.options.ChunkRetryTimes=Math.max(0,this.options.ChunkRetryTimes),this.options.ChunkSize=Math.max(1048576,this.options.ChunkSize),this.options.CopyChunkParallelLimit=Math.max(1,this.options.CopyChunkParallelLimit),this.options.CopyChunkSize=Math.max(1048576,this.options.CopyChunkSize),this.options.CopySliceSize=Math.max(0,this.options.CopySliceSize),this.options.MaxPartNumber=Math.max(1024,Math.min(1e4,this.options.MaxPartNumber)),this.options.Timeout=Math.max(0,this.options.Timeout),this.options.AppId&&console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g: "test-1250000000").'),o.init(this),i.init(this)};a.init(l,i),c.init(l,i),l.getAuthorization=r.getAuth,l.version="0.5.27",e.exports=l},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function o(e){return s(e,function(e){return"object"==("undefined"===typeof e?"undefined":_typeof(e))?o(e):e})}function i(e,t){return c(t,function(n,r){e[r]=t[r]}),e}function a(e){return e instanceof Array}function c(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function s(e,t){var n=a(e)?[]:{};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r],r));return n}var l,u,d,p,f,m=n(9),h=n(10),v=n(11),g=n(15),y=function(){},b=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&null!==e[n]&&(t[n]=e[n]);return t},w=(f=function(e,t){e=e.split("."),t=t.split(".");for(var n=0;n<t.length;n++)if(e[n]!==t[n])return parseInt(e[n])>parseInt(t[n])?1:-1;return 0},l=navigator&&navigator.userAgent,u=(l.match(/Chrome\/([.\d]+)/)||[])[1],d=(l.match(/QBCore\/([.\d]+)/)||[])[1],p=(l.match(/QQBrowser\/([.\d]+)/)||[])[1],u&&f(u,"53.0.2785.116")<0&&d&&f(d,"3.53.991.400")<0&&p&&f(p,"9.0.2524.400")<=0||!1),_=function(e,t){if(t=i({},t),"getAuth"!==e&&"getV4Auth"!==e&&"getObjectUrl"!==e){var n=t.Headers||{};t&&"object"==("undefined"===typeof t?"undefined":_typeof(t))&&(!function(){for(var e in t)t.hasOwnProperty(e)&&e.indexOf("x-cos-")>-1&&(n[e]=t[e])}(),O.each({"x-cos-mfa":"MFA","Content-MD5":"ContentMD5","Content-Length":"ContentLength","Content-Type":"ContentType",Expect:"Expect",Expires:"Expires","Cache-Control":"CacheControl","Content-Disposition":"ContentDisposition","Content-Encoding":"ContentEncoding",Range:"Range","If-Modified-Since":"IfModifiedSince","If-Unmodified-Since":"IfUnmodifiedSince","If-Match":"IfMatch","If-None-Match":"IfNoneMatch","x-cos-copy-source":"CopySource","x-cos-copy-source-Range":"CopySourceRange","x-cos-metadata-directive":"MetadataDirective","x-cos-copy-source-If-Modified-Since":"CopySourceIfModifiedSince","x-cos-copy-source-If-Unmodified-Since":"CopySourceIfUnmodifiedSince","x-cos-copy-source-If-Match":"CopySourceIfMatch","x-cos-copy-source-If-None-Match":"CopySourceIfNoneMatch","x-cos-acl":"ACL","x-cos-grant-read":"GrantRead","x-cos-grant-write":"GrantWrite","x-cos-grant-full-control":"GrantFullControl","x-cos-grant-read-acp":"GrantReadAcp","x-cos-grant-write-acp":"GrantWriteAcp","x-cos-storage-class":"StorageClass","x-cos-server-side-encryption-customer-algorithm":"SSECustomerAlgorithm","x-cos-server-side-encryption-customer-key":"SSECustomerKey","x-cos-server-side-encryption-customer-key-MD5":"SSECustomerKeyMD5","x-cos-server-side-encryption":"ServerSideEncryption","x-cos-server-side-encryption-cos-kms-key-id":"SSEKMSKeyId","x-cos-server-side-encryption-context":"SSEContext"},function(e,r){void 0!==t[e]&&(n[r]=t[e])}),t.Headers=b(n))}return t},x=function(e){return Date.now()+(e||0)},O={noop:y,formatParams:_,apiWrapper:function(e,t){return function(n,r){"function"==typeof n&&(r=n,n={}),n=_(e,n);var o=function(e){return e&&e.headers&&(e.headers["x-cos-version-id"]&&(e.VersionId=e.headers["x-cos-version-id"]),e.headers["x-cos-delete-marker"]&&(e.DeleteMarker=e.headers["x-cos-delete-marker"])),e},i=function(e,t){r&&r(o(e),o(t))};if("getService"!==e&&"abortUploadTask"!==e){var a;if(a=function(e,t){var n=t.Bucket,r=t.Region,o=t.Key;if(e.indexOf("Bucket")>-1||"deleteMultipleObject"===e||"multipartList"===e||"listObjectVersions"===e){if(!n)return"Bucket";if(!r)return"Region"}else if(e.indexOf("Object")>-1||e.indexOf("multipart")>-1||"sliceUploadFile"===e||"abortUploadTask"===e){if(!n)return"Bucket";if(!r)return"Region";if(!o)return"Key"}return!1}(e,n))return void i({error:"missing param "+a});if(n.Region){if(n.Region.indexOf("cos.")>-1)return void i({error:'param Region should not be start with "cos."'});if(!/^([a-z\d-]+)$/.test(n.Region))return void i({error:"Region format error."});this.options.CompatibilityMode||-1!==n.Region.indexOf("-")||"yfb"===n.Region||"default"===n.Region||console.warn("warning: param Region format error, find help here: https://cloud.tencent.com/document/product/436/6224")}if(n.Bucket){if(!/^([a-z\d-]+)-(\d+)$/.test(n.Bucket))if(n.AppId)n.Bucket=n.Bucket+"-"+n.AppId;else{if(!this.options.AppId)return void i({error:'Bucket should format as "test-1250000000".'});n.Bucket=n.Bucket+"-"+this.options.AppId}n.AppId&&(console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g Bucket:"test-1250000000" ).'),delete n.AppId)}!this.options.UseRawKey&&n.Key&&"/"===n.Key.substr(0,1)&&(n.Key=n.Key.substr(1))}var c=t.call(this,n,i);if("getAuth"===e||"getObjectUrl"===e)return c}},xml2json:v,json2xml:g,md5:m,clearKey:b,fileSlice:function(e,t,n,r,o){var i;if(e.slice?i=e.slice(t,n):e.mozSlice?i=e.mozSlice(t,n):e.webkitSlice&&(i=e.webkitSlice(t,n)),r&&w){var a=new FileReader;a.onload=function(e){i=null,o(new Blob([a.result]))},a.readAsArrayBuffer(i)}else o(i)},getBodyMd5:function(e,t,n,r){n=n||y,e?"string"==typeof t?n(O.md5(t,!0)):Blob&&t instanceof Blob?O.getFileMd5(t,function(e,t){n(t)},r):n():n()},getFileMd5:function(e,t,n){var r=e.size,o=0,i=m.getCtx();!function a(c){if(c>=r){var s=i.digest("hex");t(null,s)}else{var l=Math.min(r,c+1048576);O.fileSlice(e,c,l,!1,function(e){!function(e,t){var n,r=new FileReader;FileReader.prototype.readAsBinaryString?(n=FileReader.prototype.readAsBinaryString,r.onload=function(){t(this.result)}):FileReader.prototype.readAsArrayBuffer?n=function(e){var n="",r=new FileReader;r.onload=function(e){for(var o=new Uint8Array(r.result),i=o.byteLength,a=0;a<i;a++)n+=String.fromCharCode(o[a]);t(n)},r.readAsArrayBuffer(e)}:console.error("FileReader not support readAsBinaryString"),n.call(r,e)}(e,function(t){e=null,i=i.update(t,!0),o+=t.length,t=null,n&&n({loaded:o,total:r,percent:Math.round(o/r*1e4)/1e4}),a(c+1048576)})})}}(0)},binaryBase64:function(e){var t,n,r,o="";for(t=0,n=e.length/2;t<n;t++)r=parseInt(e[2*t]+e[2*t+1],16),o+=String.fromCharCode(r);return btoa(o)},extend:i,isArray:a,isInArray:function(e,t){for(var n=!1,r=0;r<e.length;r++)if(t===e[r]){n=!0;break}return n},makeArray:function(e){return a(e)?e:[e]},each:c,map:s,filter:function(e,t){var n=a(e),r=n?[]:{};for(var o in e)e.hasOwnProperty(o)&&t(e[o],o)&&(n?r.push(e[o]):r[o]=e[o]);return r},clone:o,uuid:function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},camSafeUrlEncode:r,throttleOnProgress:function(e,t){function n(){if(o=0,t&&"function"==typeof t){r=Date.now();var n,i=Math.max(0,Math.round((c-a)/((r-s)/1e3)*100)/100);n=0===c&&0===e?1:Math.round(c/e*100)/100||0,s=r,a=c;try{t({loaded:c,total:e,speed:i,percent:n})}catch(e){}}}var r,o,i=this,a=0,c=0,s=Date.now();return function(t,r){if(t&&(c=t.loaded,e=t.total),r)clearTimeout(o),n();else{if(o)return;o=setTimeout(n,i.options.ProgressInterval)}}},getFileSize:function(e,t,n){var r;"string"==typeof t.Body&&(t.Body=new Blob([t.Body],{type:"text/plain"})),t.Body&&(t.Body instanceof Blob||"[object File]"===t.Body.toString()||"[object Blob]"===t.Body.toString())?(r=t.Body.size,t.ContentLength=r,n(null,r)):n({error:"params body format error, Only allow File|Blob|String."})},getSkewTime:x,getAuth:function(e){var t,n=(e=e||{}).SecretId,i=e.SecretKey,a=e.KeyTime,c=(e.method||e.Method||"get").toLowerCase(),s=o(e.Query||e.params||{}),l=o(e.Headers||e.headers||{}),u=e.Key||"";if(e.UseRawKey?t=e.Pathname||e.pathname||"/"+u:0!==(t=e.Pathname||e.pathname||u).indexOf("/")&&(t="/"+t),!n)return console.error("missing param SecretId");if(!i)return console.error("missing param SecretKey");var d=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t.sort(function(e,t){return(e=e.toLowerCase())===(t=t.toLowerCase())?0:e>t?1:-1})},p=function(e){var t,n,o,i=[],a=d(e);for(t=0;t<a.length;t++)o=void 0===e[n=a[t]]||null===e[n]?"":""+e[n],n=r(n=n.toLowerCase()),o=r(o)||"",i.push(n+"="+o);return i.join("&")},f=Math.round(x(e.SystemClockOffset)/1e3)-1,m=f,v=e.Expires||e.expires;m+=void 0===v?900:1*v||0;var g=n,y=a||f+";"+m,b=a||f+";"+m,w=d(l).join(";").toLowerCase(),_=d(s).join(";").toLowerCase(),O=h.HmacSHA1(b,i).toString(),C=[c,t,p(s),p(l),""].join("\n"),E=["sha1",y,h.SHA1(C).toString(),""].join("\n");return["q-sign-algorithm=sha1","q-ak="+g,"q-sign-time="+y,"q-key-time="+b,"q-header-list="+w,"q-url-param-list="+_,"q-signature="+h.HmacSHA1(E,O).toString()].join("&")},isBrowser:!0};e.exports=O},function(e,t){function n(e,t){var n=e[0],r=e[1],s=e[2],l=e[3];n=o(n,r,s,l,t[0],7,-680876936),l=o(l,n,r,s,t[1],12,-389564586),s=o(s,l,n,r,t[2],17,606105819),r=o(r,s,l,n,t[3],22,-1044525330),n=o(n,r,s,l,t[4],7,-176418897),l=o(l,n,r,s,t[5],12,1200080426),s=o(s,l,n,r,t[6],17,-1473231341),r=o(r,s,l,n,t[7],22,-45705983),n=o(n,r,s,l,t[8],7,1770035416),l=o(l,n,r,s,t[9],12,-1958414417),s=o(s,l,n,r,t[10],17,-42063),r=o(r,s,l,n,t[11],22,-1990404162),n=o(n,r,s,l,t[12],7,1804603682),l=o(l,n,r,s,t[13],12,-40341101),s=o(s,l,n,r,t[14],17,-1502002290),n=i(n,r=o(r,s,l,n,t[15],22,1236535329),s,l,t[1],5,-165796510),l=i(l,n,r,s,t[6],9,-1069501632),s=i(s,l,n,r,t[11],14,643717713),r=i(r,s,l,n,t[0],20,-373897302),n=i(n,r,s,l,t[5],5,-701558691),l=i(l,n,r,s,t[10],9,38016083),s=i(s,l,n,r,t[15],14,-660478335),r=i(r,s,l,n,t[4],20,-405537848),n=i(n,r,s,l,t[9],5,568446438),l=i(l,n,r,s,t[14],9,-1019803690),s=i(s,l,n,r,t[3],14,-187363961),r=i(r,s,l,n,t[8],20,1163531501),n=i(n,r,s,l,t[13],5,-1444681467),l=i(l,n,r,s,t[2],9,-51403784),s=i(s,l,n,r,t[7],14,1735328473),n=a(n,r=i(r,s,l,n,t[12],20,-1926607734),s,l,t[5],4,-378558),l=a(l,n,r,s,t[8],11,-2022574463),s=a(s,l,n,r,t[11],16,1839030562),r=a(r,s,l,n,t[14],23,-35309556),n=a(n,r,s,l,t[1],4,-1530992060),l=a(l,n,r,s,t[4],11,1272893353),s=a(s,l,n,r,t[7],16,-155497632),r=a(r,s,l,n,t[10],23,-1094730640),n=a(n,r,s,l,t[13],4,681279174),l=a(l,n,r,s,t[0],11,-358537222),s=a(s,l,n,r,t[3],16,-722521979),r=a(r,s,l,n,t[6],23,76029189),n=a(n,r,s,l,t[9],4,-640364487),l=a(l,n,r,s,t[12],11,-421815835),s=a(s,l,n,r,t[15],16,530742520),n=c(n,r=a(r,s,l,n,t[2],23,-995338651),s,l,t[0],6,-198630844),l=c(l,n,r,s,t[7],10,1126891415),s=c(s,l,n,r,t[14],15,-1416354905),r=c(r,s,l,n,t[5],21,-57434055),n=c(n,r,s,l,t[12],6,1700485571),l=c(l,n,r,s,t[3],10,-1894986606),s=c(s,l,n,r,t[10],15,-1051523),r=c(r,s,l,n,t[1],21,-2054922799),n=c(n,r,s,l,t[8],6,1873313359),l=c(l,n,r,s,t[15],10,-30611744),s=c(s,l,n,r,t[6],15,-1560198380),r=c(r,s,l,n,t[13],21,1309151649),n=c(n,r,s,l,t[4],6,-145523070),l=c(l,n,r,s,t[11],10,-1120210379),s=c(s,l,n,r,t[2],15,718787259),r=c(r,s,l,n,t[9],21,-343485551),e[0]=p(n,e[0]),e[1]=p(r,e[1]),e[2]=p(s,e[2]),e[3]=p(l,e[3])}function r(e,t,n,r,o,i){return t=p(p(t,e),p(r,i)),p(t<<o|t>>>32-o,n)}function o(e,t,n,o,i,a,c){return r(t&n|~t&o,e,t,i,a,c)}function i(e,t,n,o,i,a,c){return r(t&o|n&~o,e,t,i,a,c)}function a(e,t,n,o,i,a,c){return r(t^n^o,e,t,i,a,c)}function c(e,t,n,o,i,a,c){return r(n^(t|~o),e,t,i,a,c)}function s(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function l(e){for(var t="",n=0;n<4;n++)t+=d[e>>8*n+4&15]+d[e>>8*n&15];return t}function u(){var e={state:[1732584193,-271733879,-1732584194,271733878],tail:"",size:0,update:function(t,r){r||(t=unescape(encodeURIComponent(t))),e.size+=t.length,t=e.tail+t;var o,i=e.state;for(o=64;o<=t.length;o+=64)n(i,s(t.substring(o-64,o)));return e.tail=t.substring(o-64),e}};return e.digest=function(t){var r,o=e.size,i=e.state,a=e.tail,c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<a.length;r++)c[r>>2]|=a.charCodeAt(r)<<(r%4<<3);if(c[r>>2]|=128<<(r%4<<3),r>55)for(n(i,c),r=0;r<16;r++)c[r]=0;return c[14]=8*o,n(i,c),function(e){for(var t=0;t<e.length;t++)e[t]=l(e[t]);return e.join("")}(i)},e}var d="0123456789abcdef".split(""),p=function(e,t){return e+t&4294967295},f=function(e,t){return u().update(e,t).digest("hex")};"5d41402abc4b2a76b9719d911017c592"!==f("hello")&&(p=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}),f.getCtx=u,e.exports=f},function(e,t,n){var r,o,i,a,c,s,l,u=u||function(e,t){var n={},r=n.lib={},o=function(){},i=r.Base={extend:function(e){o.prototype=this;var t=new o;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=r.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var o=0;o<e;o++)t[r+o>>>2]|=(n[o>>>2]>>>24-o%4*8&255)<<24-(r+o)%4*8;else if(65535<n.length)for(o=0;o<e;o+=4)t[r+o>>>2]=n[o>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new a.init(n,t)}}),c=n.enc={},s=c.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var o=t[r>>>2]>>>24-r%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new a.init(n,t/2)}},l=c.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new a.init(n,t)}},u=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},d=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,o=n.sigBytes,i=this.blockSize,c=o/(4*i);if(t=(c=t?e.ceil(c):e.max((0|c)-this._minBufferSize,0))*i,o=e.min(4*t,o),t){for(var s=0;s<t;s+=i)this._doProcessBlock(r,s);s=r.splice(0,t),n.sigBytes-=o}return new a.init(s,o)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=d.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}});var p=n.algo={};return n}(Math);o=(c=(r=u).lib).WordArray,i=c.Hasher,a=[],c=r.algo.SHA1=i.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],c=n[3],s=n[4],l=0;80>l;l++){if(16>l)a[l]=0|e[t+l];else{var u=a[l-3]^a[l-8]^a[l-14]^a[l-16];a[l]=u<<1|u>>>31}u=(r<<5|r>>>27)+s+a[l],u=20>l?u+(1518500249+(o&i|~o&c)):40>l?u+(1859775393+(o^i^c)):60>l?u+((o&i|o&c|i&c)-1894007588):u+((o^i^c)-899497514),s=c,c=i,i=o<<30|o>>>2,o=r,r=u}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+c|0,n[4]=n[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}}),r.SHA1=i._createHelper(c),r.HmacSHA1=i._createHmacHelper(c),function(){var e=u,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,o=4*r;n.sigBytes>o&&(n=e.finalize(n)),n.clamp();for(var i=this._oKey=n.clone(),a=this._iKey=n.clone(),c=i.words,s=a.words,l=0;l<r;l++)c[l]^=1549556828,s[l]^=909522486;i.sigBytes=a.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),l=(s=u).lib.WordArray,s.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var o=[],i=0;i<n;i+=3)for(var a=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,c=0;c<4&&i+.75*c<n;c++)o.push(r.charAt(a>>>6*(3-c)&63));var s=r.charAt(64);if(s)for(;o.length%4;)o.push(s);return o.join("")},parse:function(e){var t=e.length,n=this._map,r=n.charAt(64);if(r){var o=e.indexOf(r);-1!=o&&(t=o)}for(var i=[],a=0,c=0;c<t;c++)if(c%4){var s=n.indexOf(e.charAt(c-1))<<c%4*2,u=n.indexOf(e.charAt(c))>>>6-c%4*2;i[a>>>2]|=(s|u)<<24-a%4*8,a++}return l.create(i,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.exports=u},function(e,t,n){var r=n(12).DOMParser,o=function(){this.version="1.3.5";var e={mergeCDATA:!0,normalize:!0,stripElemPrefix:!0},t=new RegExp(/(?!xmlns)^.*:/);return new RegExp(/^\s+|\s+$/g),this.grokType=function(e){return/^\s*$/.test(e)?null:/^(?:true|false)$/i.test(e)?"true"===e.toLowerCase():isFinite(e)?parseFloat(e):e},this.parseString=function(e,t){if(e){var n=this.stringToXML(e);return n.getElementsByTagName("parsererror").length?null:this.parseXML(n,t)}return null},this.parseXML=function(n,r){for(var i in r)e[i]=r[i];var a={},c=0,s="";if(n.childNodes.length)for(var l,u,d,p=0;p<n.childNodes.length;p++)4===(l=n.childNodes.item(p)).nodeType?e.mergeCDATA&&(s+=l.nodeValue):3===l.nodeType?s+=l.nodeValue:1===l.nodeType&&(0===c&&(a={}),u=e.stripElemPrefix?l.nodeName.replace(t,""):l.nodeName,d=o.parseXML(l),a.hasOwnProperty(u)?(a[u].constructor!==Array&&(a[u]=[a[u]]),a[u].push(d)):(a[u]=d,c++));return Object.keys(a).length||(a=s||""),a},this.xmlToString=function(e){try{return e.xml?e.xml:(new XMLSerializer).serializeToString(e)}catch(e){return null}},this.stringToXML=function(e){try{var t=null;return window.DOMParser?t=(new r).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e),t)}catch(e){return null}},this}.call({});e.exports=function(e){return o.parseString(e)}},function(e,t,n){function r(e){this.options=e||{locator:{}}}function o(){this.cdata=!1}function i(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function a(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function c(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function s(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}r.prototype.parseFromString=function(e,t){var n=this.options,r=new l,i=n.domBuilder||new o,c=n.errorHandler,s=n.locator,u=n.xmlns||{},d={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return s&&i.setDocumentLocator(s),r.errorHandler=function(e,t,n){function r(t){var r=e[t];!r&&c&&(r=2==e.length?function(n){e(t,n)}:e),i[t]=r&&function(e){r("[xmldom "+t+"]\t"+e+a(n))}||function(){}}if(!e){if(t instanceof o)return t;e=t}var i={},c=e instanceof Function;return n=n||{},r("warning"),r("error"),r("fatalError"),i}(c,i,s),r.domBuilder=n.domBuilder||i,/\/x?html?$/.test(t)&&(d.nbsp="\xa0",d.copy="\xa9",u[""]="http://www.w3.org/1999/xhtml"),u.xml=u.xml||"http://www.w3.org/XML/1998/namespace",e?r.parse(e,u,d):r.errorHandler.error("invalid doc source"),i.doc},o.prototype={startDocument:function(){this.doc=(new u).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,r){var o=this.doc,a=o.createElementNS(e,n||t),c=r.length;s(this,a),this.currentElement=a,this.locator&&i(this.locator,a);for(var l=0;l<c;l++){e=r.getURI(l);var u=r.getValue(l),d=(n=r.getQName(l),o.createAttributeNS(e,n));this.locator&&i(r.getLocator(l),d),d.value=d.nodeValue=u,a.setAttributeNode(d)}},endElement:function(e,t,n){var r=this.currentElement;r.tagName,this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&i(this.locator,n),s(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=c.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(e);else r=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&i(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=c.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&i(this.locator,r),s(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var o=r.createDocumentType(e,t,n);this.locator&&i(this.locator,o),s(this,o)}},warning:function(e){console.warn("[xmldom warning]\t"+e,a(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,a(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,a(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){o.prototype[e]=function(){return null}});var l=n(13).XMLReader,u=t.DOMImplementation=n(14).DOMImplementation;t.XMLSerializer=n(14).XMLSerializer,t.DOMParser=r},function(e,t){function n(){}function r(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function o(e,t,n,r,o,i){for(var a,c=++t,s=0;;){var l=e.charAt(c);switch(l){case"=":if(1===s)a=e.slice(t,c),s=3;else{if(2!==s)throw new Error("attribute equal must after attrName");s=3}break;case"'":case'"':if(3===s||1===s){if(1===s&&(i.warning('attribute value must after "="'),a=e.slice(t,c)),t=c+1,!((c=e.indexOf(l,t))>0))throw new Error("attribute value no end '"+l+"' match");u=e.slice(t,c).replace(/&#?\w+;/g,o),n.add(a,u,t-1),s=5}else{if(4!=s)throw new Error('attribute value must after "="');u=e.slice(t,c).replace(/&#?\w+;/g,o),n.add(a,u,t),i.warning('attribute "'+a+'" missed start quot('+l+")!!"),t=c+1,s=5}break;case"/":switch(s){case 0:n.setTagName(e.slice(t,c));case 5:case 6:case 7:s=7,n.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return i.error("unexpected end of input"),0==s&&n.setTagName(e.slice(t,c)),c;case">":switch(s){case 0:n.setTagName(e.slice(t,c));case 5:case 6:case 7:break;case 4:case 1:"/"===(u=e.slice(t,c)).slice(-1)&&(n.closed=!0,u=u.slice(0,-1));case 2:2===s&&(u=a),4==s?(i.warning('attribute "'+u+'" missed quot(")!!'),n.add(a,u.replace(/&#?\w+;/g,o),t)):("http://www.w3.org/1999/xhtml"===r[""]&&u.match(/^(?:disabled|checked|selected)$/i)||i.warning('attribute "'+u+'" missed value!! "'+u+'" instead!!'),n.add(u,u,t));break;case 3:throw new Error("attribute value missed!!")}return c;case"\x80":l=" ";default:if(l<=" ")switch(s){case 0:n.setTagName(e.slice(t,c)),s=6;break;case 1:a=e.slice(t,c),s=2;break;case 4:var u=e.slice(t,c).replace(/&#?\w+;/g,o);i.warning('attribute "'+u+'" missed quot(")!!'),n.add(a,u,t);case 5:s=6}else switch(s){case 2:n.tagName,"http://www.w3.org/1999/xhtml"===r[""]&&a.match(/^(?:disabled|checked|selected)$/i)||i.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),n.add(a,a,t),t=c,s=1;break;case 5:i.warning('attribute space is required"'+a+'"!!');case 6:s=1,t=c;break;case 3:s=4,t=c;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}c++}}function i(e,t,n){for(var r=e.tagName,o=null,i=e.length;i--;){var a=e[i],c=a.qName,l=a.value;if((f=c.indexOf(":"))>0)var u=a.prefix=c.slice(0,f),d=c.slice(f+1),p="xmlns"===u&&d;else d=c,u=null,p="xmlns"===c&&"";a.localName=d,!1!==p&&(null==o&&(o={},s(n,n={})),n[p]=o[p]=l,a.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(p,l))}for(i=e.length;i--;)(u=(a=e[i]).prefix)&&("xml"===u&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==u&&(a.uri=n[u||""]));var f;(f=r.indexOf(":"))>0?(u=e.prefix=r.slice(0,f),d=e.localName=r.slice(f+1)):(u=null,d=e.localName=r);var m=e.uri=n[u||""];if(t.startElement(m,d,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=o,!0;if(t.endElement(m,d,r),o)for(u in o)t.endPrefixMapping(u)}function a(e,t,n,r,o){if(/^(?:script|textarea)$/i.test(n)){var i=e.indexOf("</"+n+">",t),a=e.substring(t+1,i);if(/[&<]/.test(a))return/^script$/i.test(n)?(o.characters(a,0,a.length),i):(a=a.replace(/&#?\w+;/g,r),o.characters(a,0,a.length),i)}return t+1}function c(e,t,n,r){var o=r[n];return null==o&&((o=e.lastIndexOf("</"+n+">"))<t&&(o=e.lastIndexOf("</"+n)),r[n]=o),o<t}function s(e,t){for(var n in e)t[n]=e[n]}function l(e,t,n,r){switch(e.charAt(t+2)){case"-":return"-"===e.charAt(t+3)?(o=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,o-t-4),o+3):(r.error("Unclosed comment"),-1):-1;default:if("CDATA["==e.substr(t+3,6)){var o=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,o-t-9),n.endCDATA(),o+3}var i=function(e,t){var n,r=[],o=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(o.lastIndex=t,o.exec(e);n=o.exec(e);)if(r.push(n),n[1])return r}(e,t),a=i.length;if(a>1&&/!doctype/i.test(i[0][0])){var c=i[1][0],s=a>3&&/^public$/i.test(i[2][0])&&i[3][0],l=a>4&&i[4][0],u=i[a-1];return n.startDTD(c,s&&s.replace(/^(['"])(.*?)\1$/,"$2"),l&&l.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),u.index+u[0].length}}return-1}function u(e,t,n){var r=e.indexOf("?>",t);if(r){var o=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return o?(o[0].length,n.processingInstruction(o[1],o[2]),r+2):-1}return-1}function d(e){}function p(e,t){return e.__proto__=t,e}var f=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=new RegExp("[\\-\\.0-9"+f.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),h=new RegExp("^"+f.source+m.source+"*(?::"+f.source+m.source+"*)?$");n.prototype={parse:function(e,t,n){var p=this.domBuilder;p.startDocument(),s(t,t={}),function(e,t,n,s,p){function f(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?function(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(p.error("entity not found:"+e),e)}function m(t){if(t>x){var n=e.substring(x,t).replace(/&#?\w+;/g,f);b&&h(x),s.characters(n,0,t-x),x=t}}function h(t,n){for(;t>=g&&(n=y.exec(e));)v=n.index,g=v+n[0].length,b.lineNumber++;b.columnNumber=t-v+1}for(var v=0,g=0,y=/.*(?:\r\n?|\n)|.*$/g,b=s.locator,w=[{currentNSMap:t}],_={},x=0;;){try{var O=e.indexOf("<",x);if(O<0){if(!e.substr(x).match(/^\s*$/)){var C=s.doc,E=C.createTextNode(e.substr(x));C.appendChild(E),s.currentElement=E}return}switch(O>x&&m(O),e.charAt(O+1)){case"/":var k=e.indexOf(">",O+3),j=e.substring(O+2,k),S=w.pop();k<0?(j=e.substring(O+2).replace(/[\s<].*/,""),p.error("end tag name: "+j+" is not complete:"+S.tagName),k=O+1+j.length):j.match(/\s</)&&(j=j.replace(/[\s<].*/,""),p.error("end tag name: "+j+" maybe not complete"),k=O+1+j.length);var T=S.localNSMap,A=S.tagName==j;if(A||S.tagName&&S.tagName.toLowerCase()==j.toLowerCase()){if(s.endElement(S.uri,S.localName,j),T)for(var R in T)s.endPrefixMapping(R);A||p.fatalError("end tag name: "+j+" is not match the current start tagName:"+S.tagName)}else w.push(S);k++;break;case"?":b&&h(O),k=u(e,O,s);break;case"!":b&&h(O),k=l(e,O,s,p);break;default:b&&h(O);var P=new d,D=w[w.length-1].currentNSMap,I=(k=o(e,O,P,D,f,p),P.length);if(!P.closed&&c(e,k,P.tagName,_)&&(P.closed=!0,n.nbsp||p.warning("unclosed xml attribute")),b&&I){for(var B=r(b,{}),N=0;N<I;N++){var M=P[N];h(M.offset),M.locator=r(b,{})}s.locator=B,i(P,s,D)&&w.push(P),s.locator=b}else i(P,s,D)&&w.push(P);"http://www.w3.org/1999/xhtml"!==P.uri||P.closed?k++:k=a(e,k,P.tagName,f,s)}}catch(e){p.error("element parse error: "+e),k=-1}k>x?x=k:m(Math.max(O,x)+1)}}(e,t,n,p,this.errorHandler),p.endDocument()}},d.prototype={setTagName:function(e){if(!h.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!h.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},p({},p.prototype)instanceof p||(p=function(e,t){function n(){}for(t in n.prototype=t,n=new n,e)n[t]=e[t];return n}),t.XMLReader=n},function(e,t){function n(e,t){for(var n in e)t[n]=e[n]}function r(e,t){var r=e.prototype;if(Object.create){var o=Object.create(t.prototype);r.__proto__=o}if(!(r instanceof t)){var i=function(){};i.prototype=t.prototype,n(r,i=new i),e.prototype=r=i}r.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),r.constructor=e)}function o(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,J[e]),this.message=J[e],Error.captureStackTrace&&Error.captureStackTrace(this,o);return n.code=e,t&&(this.message=this.message+": "+t),n}function i(){}function a(e,t){this._node=e,this._refresh=t,c(this)}function c(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var r=e._refresh(e._node);M(e,"length",r.length),n(r,e),e._inc=t}}function s(){}function l(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function u(e,t,n,r){if(r?t[l(t,r)]=n:t[t.length++]=n,e){n.ownerElement=e;var o=e.ownerDocument;o&&(r&&g(o,e,r),function(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(o,e,n))}}function d(e,t,n){var r=l(t,n);if(!(r>=0))throw o(ee,new Error(e.tagName+"@"+n));for(var i=t.length-1;r<i;)t[r]=t[++r];if(t.length=i,e){var a=e.ownerDocument;a&&(g(a,e,n),n.ownerElement=null)}}function p(e){if(this._features={},e)for(var t in e)this._features=e[t]}function f(){}function m(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function h(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(h(e,t))return!0}while(e=e.nextSibling)}function v(){}function g(e,t,n,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function y(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n)r[r.length++]=n;else{for(var o=t.firstChild,i=0;o;)r[i++]=o,o=o.nextSibling;r.length=i}}}function b(e,t){var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,y(e.ownerDocument,e),t}function w(e,t,n){var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===G){var o=t.firstChild;if(null==o)return t;var i=t.lastChild}else o=i=t;var a=n?n.previousSibling:e.lastChild;o.previousSibling=a,i.nextSibling=n,a?a.nextSibling=o:e.firstChild=o,null==n?e.lastChild=i:n.previousSibling=i;do{o.parentNode=e}while(o!==i&&(o=o.nextSibling));return y(e.ownerDocument||e,e),t.nodeType==G&&(t.firstChild=t.lastChild=null),t}function _(){this._nsMap={}}function x(){}function O(){}function C(){}function E(){}function k(){}function j(){}function S(){}function T(){}function A(){}function R(){}function P(){}function D(){}function I(e,t){var n=[],r=9==this.nodeType?this.documentElement:this,o=r.prefix,i=r.namespaceURI;if(i&&null==o&&null==(o=r.lookupPrefix(i)))var a=[{namespace:i,prefix:null}];return N(this,n,e,t,a),n.join("")}function B(e,t,n){var r=e.prefix||"",o=e.namespaceURI;if(!r&&!o)return!1;if("xml"===r&&"http://www.w3.org/XML/1998/namespace"===o||"http://www.w3.org/2000/xmlns/"==o)return!1;for(var i=n.length;i--;){var a=n[i];if(a.prefix==r)return a.namespace!=o}return!0}function N(e,t,n,r,o){if(r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case L:o||(o=[]),o.length;var i=e.attributes,a=i.length,c=e.firstChild,s=e.tagName;n="http://www.w3.org/1999/xhtml"===e.namespaceURI||n,t.push("<",s);for(var l=0;l<a;l++)"xmlns"==(u=i.item(l)).prefix?o.push({prefix:u.localName,namespace:u.value}):"xmlns"==u.nodeName&&o.push({prefix:"",namespace:u.value});for(l=0;l<a;l++){var u;if(B(u=i.item(l),0,o)){var d=u.prefix||"",p=u.namespaceURI,f=d?" xmlns:"+d:" xmlns";t.push(f,'="',p,'"'),o.push({prefix:d,namespace:p})}N(u,t,n,r,o)}if(B(e,0,o)&&(d=e.prefix||"",p=e.namespaceURI,f=d?" xmlns:"+d:" xmlns",t.push(f,'="',p,'"'),o.push({prefix:d,namespace:p})),c||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(s)){if(t.push(">"),n&&/^script$/i.test(s))for(;c;)c.data?t.push(c.data):N(c,t,n,r,o),c=c.nextSibling;else for(;c;)N(c,t,n,r,o),c=c.nextSibling;t.push("</",s,">")}else t.push("/>");return;case $:case G:for(c=e.firstChild;c;)N(c,t,n,r,o),c=c.nextSibling;return;case F:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,m),'"');case z:return t.push(e.data.replace(/[<&]/g,m));case H:return t.push("<![CDATA[",e.data,"]]>");case W:return t.push("\x3c!--",e.data,"--\x3e");case X:var h=e.publicId,v=e.systemId;if(t.push("<!DOCTYPE ",e.name),h)t.push(' PUBLIC "',h),v&&"."!=v&&t.push('" "',v),t.push('">');else if(v&&"."!=v)t.push(' SYSTEM "',v,'">');else{var g=e.internalSubset;g&&t.push(" [",g,"]"),t.push(">")}return;case q:return t.push("<?",e.target," ",e.data,"?>");case V:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function M(e,t,n){e[t]=n}var U={},L=U.ELEMENT_NODE=1,F=U.ATTRIBUTE_NODE=2,z=U.TEXT_NODE=3,H=U.CDATA_SECTION_NODE=4,V=U.ENTITY_REFERENCE_NODE=5,K=U.ENTITY_NODE=6,q=U.PROCESSING_INSTRUCTION_NODE=7,W=U.COMMENT_NODE=8,$=U.DOCUMENT_NODE=9,X=U.DOCUMENT_TYPE_NODE=10,G=U.DOCUMENT_FRAGMENT_NODE=11,Q=U.NOTATION_NODE=12,Y={},J={},Z=(Y.INDEX_SIZE_ERR=(J[1]="Index size error",1),Y.DOMSTRING_SIZE_ERR=(J[2]="DOMString size error",2),Y.HIERARCHY_REQUEST_ERR=(J[3]="Hierarchy request error",3)),ee=(Y.WRONG_DOCUMENT_ERR=(J[4]="Wrong document",4),Y.INVALID_CHARACTER_ERR=(J[5]="Invalid character",5),Y.NO_DATA_ALLOWED_ERR=(J[6]="No data allowed",6),Y.NO_MODIFICATION_ALLOWED_ERR=(J[7]="No modification allowed",7),Y.NOT_FOUND_ERR=(J[8]="Not found",8)),te=(Y.NOT_SUPPORTED_ERR=(J[9]="Not supported",9),Y.INUSE_ATTRIBUTE_ERR=(J[10]="Attribute in use",10));Y.INVALID_STATE_ERR=(J[11]="Invalid state",11),Y.SYNTAX_ERR=(J[12]="Syntax error",12),Y.INVALID_MODIFICATION_ERR=(J[13]="Invalid modification",13),Y.NAMESPACE_ERR=(J[14]="Invalid namespace",14),Y.INVALID_ACCESS_ERR=(J[15]="Invalid access",15),o.prototype=Error.prototype,n(Y,o),i.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],r=0;r<this.length;r++)N(this[r],n,e,t);return n.join("")}},a.prototype.item=function(e){return c(this),this[e]},r(a,i),s.prototype={length:0,item:i.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new o(te);var n=this.getNamedItem(e.nodeName);return u(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new o(te);return t=this.getNamedItemNS(e.namespaceURI,e.localName),u(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return d(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return d(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var r=this[n];if(r.localName==t&&r.namespaceURI==e)return r}return null}},p.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var r=new v;if(r.implementation=this,r.childNodes=new i,r.doctype=n,n&&r.appendChild(n),t){var o=r.createElementNS(e,t);r.appendChild(o)}return r},createDocumentType:function(e,t,n){var r=new j;return r.name=e,r.nodeName=e,r.publicId=t,r.systemId=n,r}},f.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return w(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return b(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function e(t,n,r){var o=new n.constructor;for(var a in n){var c=n[a];"object"!=("undefined"===typeof c?"undefined":_typeof(c))&&c!=o[a]&&(o[a]=c)}switch(n.childNodes&&(o.childNodes=new i),o.ownerDocument=t,o.nodeType){case L:var l=n.attributes,u=o.attributes=new s,d=l.length;u._ownerElement=o;for(var p=0;p<d;p++)o.setAttributeNode(e(t,l.item(p),!0));break;case F:r=!0}if(r)for(var f=n.firstChild;f;)o.appendChild(e(t,f,r)),f=f.nextSibling;return o}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==z&&e.nodeType==z?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var r in n)if(n[r]==e)return r;t=t.nodeType==F?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==F?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},n(U,f),n(U,f.prototype),v.prototype={nodeName:"#document",nodeType:$,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==G){for(var n=e.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,t),n=r}return e}return null==this.documentElement&&e.nodeType==L&&(this.documentElement=e),w(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),b(this,e)},importNode:function(e,t){return function e(t,n,r){var o;switch(n.nodeType){case L:(o=n.cloneNode(!1)).ownerDocument=t;case G:break;case F:r=!0}if(o||(o=n.cloneNode(!1)),o.ownerDocument=t,o.parentNode=null,r)for(var i=n.firstChild;i;)o.appendChild(e(t,i,r)),i=i.nextSibling;return o}(this,e,t)},getElementById:function(e){var t=null;return h(this.documentElement,function(n){if(n.nodeType==L&&n.getAttribute("id")==e)return t=n,!0}),t},createElement:function(e){var t=new _;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new i,(t.attributes=new s)._ownerElement=t,t},createDocumentFragment:function(){var e=new R;return e.ownerDocument=this,e.childNodes=new i,e},createTextNode:function(e){var t=new C;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new E;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new k;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new P;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new x;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new A;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new _,r=t.split(":"),o=n.attributes=new s;return n.childNodes=new i,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,o._ownerElement=n,n},createAttributeNS:function(e,t){var n=new x,r=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,n}},r(v,f),_.prototype={nodeType:L,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===G?this.insertBefore(e,null):function(e,t){var n=t.parentNode;if(n){var r=e.lastChild;n.removeChild(t),r=e.lastChild}return r=e.lastChild,t.parentNode=e,t.previousSibling=r,t.nextSibling=null,r?r.nextSibling=t:e.firstChild=t,e.lastChild=t,y(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new a(this,function(t){var n=[];return h(t,function(r){r===t||r.nodeType!=L||"*"!==e&&r.tagName!=e||n.push(r)}),n})},getElementsByTagNameNS:function(e,t){return new a(this,function(n){var r=[];return h(n,function(o){o===n||o.nodeType!==L||"*"!==e&&o.namespaceURI!==e||"*"!==t&&o.localName!=t||r.push(o)}),r})}},v.prototype.getElementsByTagName=_.prototype.getElementsByTagName,v.prototype.getElementsByTagNameNS=_.prototype.getElementsByTagNameNS,r(_,f),x.prototype.nodeType=F,r(x,f),O.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(J[Z])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},r(O,f),C.prototype={nodeName:"#text",nodeType:z,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},r(C,O),E.prototype={nodeName:"#comment",nodeType:W},r(E,O),k.prototype={nodeName:"#cdata-section",nodeType:H},r(k,O),j.prototype.nodeType=X,r(j,f),S.prototype.nodeType=Q,r(S,f),T.prototype.nodeType=K,r(T,f),A.prototype.nodeType=V,r(A,f),R.prototype.nodeName="#document-fragment",R.prototype.nodeType=G,r(R,f),P.prototype.nodeType=q,r(P,f),D.prototype.serializeToString=function(e,t,n){return I.call(e,t,n)},f.prototype.toString=I;try{Object.defineProperty&&(Object.defineProperty(a.prototype,"length",{get:function(){return c(this),this.$$length}}),Object.defineProperty(f.prototype,"textContent",{get:function(){return function e(t){switch(t.nodeType){case L:case G:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}}(this)},set:function(e){switch(this.nodeType){case L:case G:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),M=function(e,t,n){e["$$"+t]=n})}catch(e){}t.DOMImplementation=p,t.XMLSerializer=D},function(e,t){var n=new RegExp("^([^a-zA-Z_\xc0-\xd6\xd8-\xf6\xf8-\xff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fff\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd])|^((x|X)(m|M)(l|L))|([^a-zA-Z_\xc0-\xd6\xd8-\xf6\xf8-\xff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fff\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd-.0-9\xb7\u0300-\u036f\u203f\u2040])","g"),r=/[^\x09\x0A\x0D\x20-\xFF\x85\xA0-\uD7FF\uE000-\uFDCF\uFDE0-\uFFFD]/gm,o=function(e){var t=[];if(e instanceof Object)for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},i=function(e,t){var i=function(e,r,o,i,a){var c=void 0!==t.indent?t.indent:"\t",s=t.prettyPrint?"\n"+new Array(i).join(c):"";t.removeIllegalNameCharacters&&(e=e.replace(n,"_"));var l=[s,"<",e,o||""];return r&&r.length>0?(l.push(">"),l.push(r),a&&l.push(s),l.push("</"),l.push(e),l.push(">")):l.push("/>"),l.join("")};return function e(n,a,c){var s="undefined"===typeof n?"undefined":_typeof(n);switch((Array.isArray?Array.isArray(n):n instanceof Array)?s="array":n instanceof Date&&(s="date"),s){case"array":var l=[];return n.map(function(t){l.push(e(t,1,c+1))}),t.prettyPrint&&l.push("\n"),l.join("");case"date":return n.toJSON?n.toJSON():n+"";case"object":var u=[];for(var d in n)if(n.hasOwnProperty(d))if(n[d]instanceof Array)for(var p=0;p<n[d].length;p++)n[d].hasOwnProperty(p)&&u.push(i(d,e(n[d][p],0,c+1),null,c+1,o(n[d][p]).length));else u.push(i(d,e(n[d],0,c+1),null,c+1));return t.prettyPrint&&u.length>0&&u.push("\n"),u.join("");case"function":return n();default:return t.escape?(""+n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(r,""):""+n}}(e,0,0)},a=function(e){var t=['<?xml version="1.0" encoding="UTF-8"'];return e&&t.push(' standalone="yes"'),t.push("?>"),t.join("")};e.exports=function(e,t){if(t||(t={xmlHeader:{standalone:!0},prettyPrint:!0,indent:"  ",escape:!0}),"string"==typeof e)try{e=JSON.parse(e.toString())}catch(e){return!1}var n="",r="";return t&&("object"==("undefined"===typeof t?"undefined":_typeof(t))?(t.xmlHeader&&(n=a(!!t.xmlHeader.standalone)),void 0!==t.docType&&(r="<!DOCTYPE "+t.docType+">")):n=a()),[n,(t=t||{}).prettyPrint&&r?"\n":"",r,i(e,t)].join("").replace(/\n{2,}/g,"\n").replace(/\s+$/g,"")}},function(e,t){var n=function(e){var t={},n=function(e){return!t[e]&&(t[e]=[]),t[e]};e.on=function(e,t){"task-list-update"===e&&console.warn('warning: Event "'+e+'" has been deprecated. Please use "list-update" instead.'),n(e).push(t)},e.off=function(e,t){for(var r=n(e),o=r.length-1;o>=0;o--)t===r[o]&&r.splice(o,1)},e.emit=function(e,t){for(var r=n(e).map(function(e){return e}),o=0;o<r.length;o++)r[o](t)}};e.exports.init=n,e.exports.EventProxy=function(){n(this)}},function(e,t,n){var r=n(18),o=n(8),i={};e.exports.transferToTaskMethod=function(e,t){i[t]=e[t],e[t]=function(e,n){e.SkipTask?i[t].call(this,e,n):this._addTask(t,e,n)}},e.exports.init=function(e){var t,n,a=[],c={},s=0,l=0,u=function(e){var t={id:e.id,Bucket:e.Bucket,Region:e.Region,Key:e.Key,FilePath:e.FilePath,state:e.state,loaded:e.loaded,size:e.size,speed:e.speed,percent:e.percent,hashPercent:e.hashPercent,error:e.error};return e.FilePath&&(t.FilePath=e.FilePath),e._custom&&(t._custom=e._custom),t},d=(n=function(){t=0,e.emit("task-list-update",{list:o.map(a,u)}),e.emit("list-update",{list:o.map(a,u)})},function(){t||(t=setTimeout(n))}),p=function(){if(!(a.length<=e.options.UploadQueueSize)){for(var t=0;t<l&&t<a.length&&a.length>e.options.UploadQueueSize;){var n="waiting"===a[t].state||"checking"===a[t].state||"uploading"===a[t].state;a[t]&&n?t++:(c[a[t].id]&&delete c[a[t].id],a.splice(t,1),l--)}d()}},f=function t(){if(!(s>=e.options.FileParallelLimit)){for(;a[l]&&"waiting"!==a[l].state;)l++;if(!(l>=a.length)){var n=a[l];l++,s++,n.state="checking",n.params.onTaskStart&&n.params.onTaskStart(u(n)),!n.params.UploadData&&(n.params.UploadData={});var r=o.formatParams(n.api,n.params);i[n.api].call(e,r,function(r,o){e._isRunningTask(n.id)&&("checking"!==n.state&&"uploading"!==n.state||(n.state=r?"error":"success",r&&(n.error=r),s--,d(),t(),n.callback&&n.callback(r,o),"success"===n.state&&(n.params&&(delete n.params.UploadData,delete n.params.Body,delete n.params),delete n.callback)),p())}),d(),setTimeout(t)}}},m=function(t,n){var o=c[t];if(o){var i=o&&"waiting"===o.state,a=o&&("checking"===o.state||"uploading"===o.state);if("canceled"===n&&"canceled"!==o.state||"paused"===n&&i||"paused"===n&&a){if("paused"===n&&o.params.Body&&"function"==typeof o.params.Body.pipe)return void console.error("stream not support pause");o.state=n,e.emit("inner-kill-task",{TaskId:t,toState:n});try{var l=o&&o.params&&o.params.UploadData.UploadId}catch(e){}"canceled"===n&&l&&r.removeUsing(l),d(),a&&(s--,f()),"canceled"===n&&(o.params&&(delete o.params.UploadData,delete o.params.Body,delete o.params),delete o.callback)}p()}};e._addTasks=function(t){o.each(t,function(t){e._addTask(t.api,t.params,t.callback,!0)}),d()};var h=!0;e._addTask=function(t,n,r,i){n=o.formatParams(t,n);var s=o.uuid();n.TaskId=s,n.onTaskReady&&n.onTaskReady(s),n.TaskReady&&(n.TaskReady(s),h&&console.warn('warning: Param "TaskReady" has been deprecated. Please use "onTaskReady" instead.'),h=!1);var l={params:n,callback:r,api:t,index:a.length,id:s,Bucket:n.Bucket,Region:n.Region,Key:n.Key,FilePath:n.FilePath||"",state:"waiting",loaded:0,size:0,speed:0,percent:0,hashPercent:0,error:null,_custom:n._custom},u=n.onHashProgress;n.onHashProgress=function(t){e._isRunningTask(l.id)&&(l.hashPercent=t.percent,u&&u(t),d())};var m=n.onProgress;return n.onProgress=function(t){e._isRunningTask(l.id)&&("checking"===l.state&&(l.state="uploading"),l.loaded=t.loaded,l.speed=t.speed,l.percent=t.percent,m&&m(t),d())},o.getFileSize(t,n,function(e,t){e?r(e):(c[s]=l,a.push(l),l.size=t,!i&&d(),f(),p())}),s},e._isRunningTask=function(e){var t=c[e];return!(!t||"checking"!==t.state&&"uploading"!==t.state)},e.getTaskList=function(){return o.map(a,u)},e.cancelTask=function(e){m(e,"canceled")},e.pauseTask=function(e){m(e,"paused")},e.restartTask=function(e){var t=c[e];!t||"paused"!==t.state&&"error"!==t.state||(t.state="waiting",d(),l=Math.min(l,t.index),f())},e.isUploadRunning=function(){return s||l<a.length}}},function(e,t,n){var r,o,i=n(8),a="cos_sdk_upload_cache",c=function(){if(!r){r=JSON.parse(localStorage.getItem(a)||"[]")||[];for(var e=!1,t=Math.round(Date.now()/1e3),n=r.length-1;n>=0;n--){var o=r[n][2];(!o||o+2592e3<t)&&(r.splice(n,1),e=!0)}e&&localStorage.setItem(a,JSON.stringify(r))}},s=function(){o||(o=setTimeout(function(){localStorage.setItem(a,JSON.stringify(r)),o=null},400))},l={using:{},setUsing:function(e){l.using[e]=!0},removeUsing:function(e){delete l.using[e]},getFileId:function(e,t,n,r){return e.name&&e.size&&e.lastModifiedDate&&t?i.md5([e.name,e.size,e.lastModifiedDate,t,n,r].join("::")):null},getUploadIdList:function(e){if(!e)return null;c();for(var t=[],n=0;n<r.length;n++)r[n][0]===e&&t.push(r[n][1]);return t.length?t:null},saveUploadId:function(e,t,n){if(c(),e){for(var o=r.length-1;o>=0;o--){var i=r[o];i[0]===e&&i[1]===t&&r.splice(o,1)}r.unshift([e,t,Math.round(Date.now()/1e3)]),r.length>n&&r.splice(n),s()}},removeUploadId:function(e){c(),delete l.using[e];for(var t=r.length-1;t>=0;t--)r[t][1]===e&&r.splice(t,1);s()}};e.exports=l},function(e,t,n){function r(e){var t={GrantFullControl:[],GrantWrite:[],GrantRead:[],GrantReadAcp:[],GrantWriteAcp:[],ACL:""},n={FULL_CONTROL:"GrantFullControl",WRITE:"GrantWrite",READ:"GrantRead",READ_ACP:"GrantReadAcp",WRITE_ACP:"GrantWriteAcp"},r=(e&&e.AccessControlList||{}).Grant;r&&(r=d.isArray(r)?r:[r]);var i={READ:0,WRITE:0,FULL_CONTROL:0};return r&&r.length&&d.each(r,function(r){"qcs::cam::anyone:anyone"===r.Grantee.ID||"http://cam.qcloud.com/groups/global/AllUsers"===r.Grantee.URI?i[r.Permission]=1:r.Grantee.ID!==e.Owner.ID&&t[n[r.Permission]].push('id="'+r.Grantee.ID+'"')}),i.FULL_CONTROL||i.WRITE&&i.READ?t.ACL="public-read-write":i.READ?t.ACL="public-read":t.ACL="private",d.each(n,function(e){t[e]=o(t[e].join(","))}),t}function o(e){var t,n,r=e.split(","),o={};for(t=0;t<r.length;)o[n=r[t].trim()]?r.splice(t,1):(o[n]=!0,r[t]=n,t++);return r.join(",")}function i(e){var t=e.bucket,n=t.substr(0,t.lastIndexOf("-")),r=t.substr(t.lastIndexOf("-")+1),o=e.domain,i=e.region,a=e.object,c=e.protocol||(d.isBrowser&&"http:"===location.protocol?"http:":"https:");o||(o=["cn-south","cn-south-2","cn-north","cn-east","cn-southwest","sg"].indexOf(i)>-1?"{Region}.myqcloud.com":"cos.{Region}.myqcloud.com",e.ForcePathStyle||(o="{Bucket}."+o)),o=(o=o.replace(/\{\{AppId\}\}/gi,r).replace(/\{\{Bucket\}\}/gi,n).replace(/\{\{Region\}\}/gi,i).replace(/\{\{.*?\}\}/gi,"")).replace(/\{AppId\}/gi,r).replace(/\{BucketName\}/gi,n).replace(/\{Bucket\}/gi,t).replace(/\{Region\}/gi,i).replace(/\{.*?\}/gi,""),/^[a-zA-Z]+:\/\//.test(o)||(o=c+"//"+o),"/"===o.slice(-1)&&(o=o.slice(0,-1));var s=o;return e.ForcePathStyle&&(s+="/"+t),s+="/",a&&(s+=d.camSafeUrlEncode(a).replace(/%2F/g,"/")),e.isLocation&&(s=s.replace(/^https?:\/\//,"")),s}function a(e,t){var n=d.clone(e.Headers);delete n["Content-Type"],delete n["Cache-Control"],d.each(n,function(e,t){""===e&&delete n[t]});var r=function(e){var n=!1,r=e.Authorization;if(r)if(r.indexOf(" ")>-1)n=!1;else if(r.indexOf("q-sign-algorithm=")>-1&&r.indexOf("q-ak=")>-1&&r.indexOf("q-sign-time=")>-1&&r.indexOf("q-key-time=")>-1&&r.indexOf("q-url-param-list=")>-1)n=!0;else try{(r=atob(r)).indexOf("a=")>-1&&r.indexOf("k=")>-1&&r.indexOf("t=")>-1&&r.indexOf("r=")>-1&&r.indexOf("b=")>-1&&(n=!0)}catch(e){}n?t&&t(null,e):t&&t("authorization error")},o=this,i=e.Bucket||"",a=e.Region||"",c=e.Key||"";o.options.ForcePathStyle&&i&&(c=i+"/"+c);var s="/"+c,l={},u=e.Scope;if(!u){var p=e.Action||"",f=e.ResourceKey||e.Key||"";u=e.Scope||[{action:p,bucket:i,region:a,prefix:f}]}var m=d.md5(JSON.stringify(u));o._StsCache=o._StsCache||[],function(){var e,t;for(e=o._StsCache.length-1;e>=0;e--){t=o._StsCache[e];var n=Math.round(d.getSkewTime(o.options.SystemClockOffset)/1e3)+30;if(t.StartTime&&n<t.StartTime||n>=t.ExpiredTime)o._StsCache.splice(e,1);else if(!t.ScopeLimit||t.ScopeLimit&&t.ScopeKey===m){l=t;break}}}();var h,v=function(){var t=l.StartTime&&l.ExpiredTime?l.StartTime+";"+l.ExpiredTime:"",i={Authorization:d.getAuth({SecretId:l.TmpSecretId,SecretKey:l.TmpSecretKey,Method:e.Method,Pathname:s,Query:e.Query,Headers:n,Expires:e.Expires,UseRawKey:o.options.UseRawKey,SystemClockOffset:o.options.SystemClockOffset,KeyTime:t}),XCosSecurityToken:l.XCosSecurityToken||"",Token:l.Token||"",ClientIP:l.ClientIP||"",ClientUA:l.ClientUA||""};r(i)};if(l.ExpiredTime&&l.ExpiredTime-d.getSkewTime(o.options.SystemClockOffset)/1e3>60)v();else if(o.options.getAuthorization)o.options.getAuthorization.call(o,{Bucket:i,Region:a,Method:e.Method,Key:c,Pathname:s,Query:e.Query,Headers:n,Scope:u},function(e){"string"==typeof e&&(e={Authorization:e}),e.TmpSecretId&&e.TmpSecretKey&&e.XCosSecurityToken&&e.ExpiredTime?((l=e||{}).Scope=u,l.ScopeKey=m,o._StsCache.push(l),v()):r(e)});else{if(!o.options.getSTS)return h={Authorization:d.getAuth({SecretId:e.SecretId||o.options.SecretId,SecretKey:e.SecretKey||o.options.SecretKey,Method:e.Method,Pathname:s,Query:e.Query,Headers:n,Expires:e.Expires,UseRawKey:o.options.UseRawKey,SystemClockOffset:o.options.SystemClockOffset}),XCosSecurityToken:o.options.XCosSecurityToken},r(h),h;o.options.getSTS.call(o,{Bucket:i,Region:a},function(e){(l=e||{}).Scope=u,l.ScopeKey=m,l.TmpSecretId=l.SecretId,l.TmpSecretKey=l.SecretKey,o._StsCache.push(l),v()})}return""}function c(e){var t=!1,n=!1,r=e.headers&&(e.headers.date||e.headers.Date)||e.error&&e.error.ServerTime;try{var o=e.error.Code,i=e.error.Message;("RequestTimeTooSkewed"===o||"AccessDenied"===o&&"Request has expired"===i)&&(n=!0)}catch(e){}if(e)if(n&&r){var a=Date.parse(r);this.options.CorrectClockSkew&&Math.abs(d.getSkewTime(this.options.SystemClockOffset)-a)>=3e4&&(console.error("error: Local time is too skewed."),this.options.SystemClockOffset=a-Date.now(),t=!0)}else 5===Math.round(e.statusCode/100)&&(t=!0);return t}function s(e,t){var n=this;!e.headers&&(e.headers={}),!e.qs&&(e.qs={}),e.VersionId&&(e.qs.versionId=e.VersionId),e.qs=d.clearKey(e.qs),e.headers&&(e.headers=d.clearKey(e.headers)),e.qs&&(e.qs=d.clearKey(e.qs));var r=d.clone(e.qs);e.action&&(r[e.action]="");!function o(i){var s=n.options.SystemClockOffset;a.call(n,{Bucket:e.Bucket||"",Region:e.Region||"",Method:e.method,Key:e.Key,Query:r,Headers:e.headers,Action:e.Action,ResourceKey:e.ResourceKey,Scope:e.Scope},function(r,a){r?t(r):(e.AuthData=a,l.call(n,e,function(r,a){r&&i<2&&(s!==n.options.SystemClockOffset||c.call(n,r))?(e.headers&&(delete e.headers.Authorization,delete e.headers.token,delete e.headers.clientIP,delete e.headers.clientUA,delete e.headers["x-cos-security-token"]),o(i+1)):t(r,a)}))})}(1)}function l(e,t){var n=this,r=e.TaskId;if(!r||n._isRunningTask(r)){var o=e.Bucket,a=e.Region,c=e.Key,s=e.method||"GET",l=e.url,p=e.body,f=e.json,m=e.rawBody;l=l||i({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:o,region:a,object:c}),e.action&&(l=l+"?"+e.action);var h={method:s,url:l,headers:e.headers,qs:e.qs,body:p,json:f};if(h.headers.Authorization=e.AuthData.Authorization,e.AuthData.Token&&(h.headers.token=e.AuthData.Token),e.AuthData.ClientIP&&(h.headers.clientIP=e.AuthData.ClientIP),e.AuthData.ClientUA&&(h.headers.clientUA=e.AuthData.ClientUA),e.AuthData.XCosSecurityToken&&(h.headers["x-cos-security-token"]=e.AuthData.XCosSecurityToken),h.headers&&(h.headers=d.clearKey(h.headers)),h=d.clearKey(h),e.onProgress&&"function"==typeof e.onProgress){var v=p&&(p.size||p.length)||0;h.onProgress=function(t){if(!r||n._isRunningTask(r)){var o=t?t.loaded:0;e.onProgress({loaded:o,total:v})}}}this.options.Timeout&&(h.timeout=this.options.Timeout),n.emit("before-send",h);var g=u(h,function(e,o,i){if("abort"!==e){var a,c=function(e,i){if(r&&n.off("inner-kill-task",y),!a){a=!0;var c={};o&&o.statusCode&&(c.statusCode=o.statusCode),o&&o.headers&&(c.headers=o.headers),e?(e=d.extend(e||{},c),t(e,null)):(i=d.extend(i||{},c),t(null,i)),g=null}};if(e)c({error:e});else{var s;if(m)(s={}).body=i;else try{s=i&&i.indexOf("<")>-1&&i.indexOf(">")>-1&&d.xml2json(i)||{}}catch(e){s=i||{}}var l=o.statusCode;2===Math.floor(l/100)?s.Error?c({error:s.Error}):c(null,s):c({error:s.Error||s})}}}),y=function e(t){t.TaskId===r&&(g&&g.abort&&g.abort(),n.off("inner-kill-task",e))};r&&n.on("inner-kill-task",y)}}var u=n(20),d=n(8),p={getService:function(e,t){"function"==typeof e&&(t=e,e={});var n=this.options.Protocol||(d.isBrowser&&"http:"===location.protocol?"http:":"https:"),r=this.options.ServiceDomain,o=e.Region;r?(r=r.replace(/\{Region\}/gi,o||"").replace(/\{.*?\}/gi,""),/^[a-zA-Z]+:\/\//.test(r)||(r=n+"//"+r),"/"===r.slice(-1)&&(r=r.slice(0,-1))):r=o?n+"//cos."+o+".myqcloud.com":n+"//service.cos.myqcloud.com",s.call(this,{Action:"name/cos:GetService",url:r,method:"GET",headers:e.Headers},function(e,n){if(e)return t(e);var r=n&&n.ListAllMyBucketsResult&&n.ListAllMyBucketsResult.Buckets&&n.ListAllMyBucketsResult.Buckets.Bucket||[];r=d.isArray(r)?r:[r];var o=n&&n.ListAllMyBucketsResult&&n.ListAllMyBucketsResult.Owner||{};t(null,{Buckets:r,Owner:o,statusCode:n.statusCode,headers:n.headers})})},putBucket:function(e,t){var n=this;s.call(this,{Action:"name/cos:PutBucket",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:e.Headers},function(r,o){if(r)return t(r);var a=i({protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:e.Region,isLocation:!0});t(null,{Location:a,statusCode:o.statusCode,headers:o.headers})})},headBucket:function(e,t){s.call(this,{Action:"name/cos:HeadBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"HEAD"},function(e,n){t(e,n)})},getBucket:function(e,t){var n={};n.prefix=e.Prefix||"",n.delimiter=e.Delimiter,n.marker=e.Marker,n["max-keys"]=e.MaxKeys,n["encoding-type"]=e.EncodingType,s.call(this,{Action:"name/cos:GetBucket",ResourceKey:n.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n},function(e,n){if(e)return t(e);var r=n.ListBucketResult||{},o=r.Contents||[],i=r.CommonPrefixes||[];o=d.isArray(o)?o:[o],i=d.isArray(i)?i:[i];var a=d.clone(r);d.extend(a,{Contents:o,CommonPrefixes:i,statusCode:n.statusCode,headers:n.headers}),t(null,a)})},deleteBucket:function(e,t){s.call(this,{Action:"name/cos:DeleteBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"DELETE"},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},putBucketAcl:function(e,t){var n=e.Headers,r="";if(e.AccessControlPolicy){var i=d.clone(e.AccessControlPolicy||{}),a=i.Grants||i.Grant;a=d.isArray(a)?a:[a],delete i.Grant,delete i.Grants,i.AccessControlList={Grant:a},r=d.json2xml({AccessControlPolicy:i}),n["Content-Type"]="application/xml",n["Content-MD5"]=d.binaryBase64(d.md5(r))}d.each(n,function(e,t){0===t.indexOf("x-cos-grant-")&&(n[t]=o(n[t]))}),s.call(this,{Action:"name/cos:PutBucketACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:n,action:"acl",body:r},function(e,n){if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})},getBucketAcl:function(e,t){s.call(this,{Action:"name/cos:GetBucketACL",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"acl"},function(e,n){if(e)return t(e);var o=n.AccessControlPolicy||{},i=o.Owner||{},a=o.AccessControlList.Grant||[];a=d.isArray(a)?a:[a];var c=r(o);n.headers&&n.headers["x-cos-acl"]&&(c.ACL=n.headers["x-cos-acl"]),c=d.extend(c,{Owner:i,Grants:a,statusCode:n.statusCode,headers:n.headers}),t(null,c)})},putBucketCors:function(e,t){var n=(e.CORSConfiguration||{}).CORSRules||e.CORSRules||[];n=d.clone(d.isArray(n)?n:[n]),d.each(n,function(e){d.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(t,n){var r=t+"s",o=e[r]||e[t]||[];delete e[r],e[t]=d.isArray(o)?o:[o]})});var r=d.json2xml({CORSConfiguration:{CORSRule:n}}),o=e.Headers;o["Content-Type"]="application/xml",o["Content-MD5"]=d.binaryBase64(d.md5(r)),s.call(this,{Action:"name/cos:PutBucketCORS",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"cors",headers:o},function(e,n){if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})},getBucketCors:function(e,t){s.call(this,{Action:"name/cos:GetBucketCORS",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors"},function(e,n){if(e)if(404===e.statusCode&&e.error&&"NoSuchCORSConfiguration"===e.error.Code){var r={CORSRules:[],statusCode:e.statusCode};e.headers&&(r.headers=e.headers),t(null,r)}else t(e);else{var o=n.CORSConfiguration||{},i=o.CORSRules||o.CORSRule||[];i=d.clone(d.isArray(i)?i:[i]),d.each(i,function(e){d.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(t,n){var r=t+"s",o=e[r]||e[t]||[];delete e[t],e[r]=d.isArray(o)?o:[o]})}),t(null,{CORSRules:i,statusCode:n.statusCode,headers:n.headers})}})},deleteBucketCors:function(e,t){s.call(this,{Action:"name/cos:DeleteBucketCORS",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors"},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode||e.statusCode,headers:n.headers})})},getBucketLocation:function(e,t){s.call(this,{Action:"name/cos:GetBucketLocation",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"location"},function(e,n){if(e)return t(e);t(null,n)})},getBucketPolicy:function(e,t){s.call(this,{Action:"name/cos:GetBucketPolicy",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",rawBody:!0},function(e,n){if(e)return t(e.statusCode&&403===e.statusCode?{ErrorStatus:"Access Denied"}:e.statusCode&&405===e.statusCode?{ErrorStatus:"Method Not Allowed"}:e.statusCode&&404===e.statusCode?{ErrorStatus:"Policy Not Found"}:e);var r={};try{r=JSON.parse(n.body)}catch(e){}t(null,{Policy:r,statusCode:n.statusCode,headers:n.headers})})},putBucketPolicy:function(e,t){var n=e.Policy,r=n;try{"string"==typeof n?n=JSON.parse(r):r=JSON.stringify(n)}catch(e){t({error:"Policy format error"})}var o=e.Headers;o["Content-Type"]="application/json",o["Content-MD5"]=d.binaryBase64(d.md5(r)),s.call(this,{Action:"name/cos:PutBucketPolicy",method:"PUT",Bucket:e.Bucket,Region:e.Region,action:"policy",body:d.isBrowser?r:n,headers:o,json:!0},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},deleteBucketPolicy:function(e,t){s.call(this,{Action:"name/cos:DeleteBucketPolicy",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy"},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode||e.statusCode,headers:n.headers})})},putBucketTagging:function(e,t){var n=e.Tagging||{},r=n.TagSet||n.Tags||e.Tags||[];r=d.clone(d.isArray(r)?r:[r]);var o=d.json2xml({Tagging:{TagSet:{Tag:r}}}),i=e.Headers;i["Content-Type"]="application/xml",i["Content-MD5"]=d.binaryBase64(d.md5(o)),s.call(this,{Action:"name/cos:PutBucketTagging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:o,action:"tagging",headers:i},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},getBucketTagging:function(e,t){s.call(this,{Action:"name/cos:GetBucketTagging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging"},function(e,n){if(e)if(404!==e.statusCode||!e.error||"Not Found"!==e.error&&"NoSuchTagSet"!==e.error.Code)t(e);else{var r={Tags:[],statusCode:e.statusCode};e.headers&&(r.headers=e.headers),t(null,r)}else{var o=[];try{o=n.Tagging.TagSet.Tag||[]}catch(e){}o=d.clone(d.isArray(o)?o:[o]),t(null,{Tags:o,statusCode:n.statusCode,headers:n.headers})}})},deleteBucketTagging:function(e,t){s.call(this,{Action:"name/cos:DeleteBucketTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging"},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},putBucketLifecycle:function(e,t){var n=(e.LifecycleConfiguration||{}).Rules||e.Rules||[];n=d.clone(n);var r=d.json2xml({LifecycleConfiguration:{Rule:n}}),o=e.Headers;o["Content-Type"]="application/xml",o["Content-MD5"]=d.binaryBase64(d.md5(r)),s.call(this,{Action:"name/cos:PutBucketLifecycle",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"lifecycle",headers:o},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},getBucketLifecycle:function(e,t){s.call(this,{Action:"name/cos:GetBucketLifecycle",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle"},function(e,n){if(e)if(404===e.statusCode&&e.error&&"NoSuchLifecycleConfiguration"===e.error.Code){var r={Rules:[],statusCode:e.statusCode};e.headers&&(r.headers=e.headers),t(null,r)}else t(e);else{var o=[];try{o=n.LifecycleConfiguration.Rule||[]}catch(e){}o=d.clone(d.isArray(o)?o:[o]),t(null,{Rules:o,statusCode:n.statusCode,headers:n.headers})}})},deleteBucketLifecycle:function(e,t){s.call(this,{Action:"name/cos:DeleteBucketLifecycle",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle"},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},putBucketVersioning:function(e,t){if(e.VersioningConfiguration){var n=e.VersioningConfiguration||{},r=d.json2xml({VersioningConfiguration:n}),o=e.Headers;o["Content-Type"]="application/xml",o["Content-MD5"]=d.binaryBase64(d.md5(r)),s.call(this,{Action:"name/cos:PutBucketVersioning",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"versioning",headers:o},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})}else t({error:"missing param VersioningConfiguration"})},getBucketVersioning:function(e,t){s.call(this,{Action:"name/cos:GetBucketVersioning",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"versioning"},function(e,n){e||!n.VersioningConfiguration&&(n.VersioningConfiguration={}),t(e,n)})},putBucketReplication:function(e,t){var n=d.clone(e.ReplicationConfiguration),r=d.json2xml({ReplicationConfiguration:n});r=(r=r.replace(/<(\/?)Rules>/gi,"<$1Rule>")).replace(/<(\/?)Tags>/gi,"<$1Tag>");var o=e.Headers;o["Content-Type"]="application/xml",o["Content-MD5"]=d.binaryBase64(d.md5(r)),s.call(this,{Action:"name/cos:PutBucketReplication",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:r,action:"replication",headers:o},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},getBucketReplication:function(e,t){s.call(this,{Action:"name/cos:GetBucketReplication",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication"},function(e,n){if(e)if(404!==e.statusCode||!e.error||"Not Found"!==e.error&&"ReplicationConfigurationnotFoundError"!==e.error.Code)t(e);else{var r={ReplicationConfiguration:{Rules:[]},statusCode:e.statusCode};e.headers&&(r.headers=e.headers),t(null,r)}else e||!n.ReplicationConfiguration&&(n.ReplicationConfiguration={}),n.ReplicationConfiguration.Rule&&(n.ReplicationConfiguration.Rules=n.ReplicationConfiguration.Rule,delete n.ReplicationConfiguration.Rule),t(e,n)})},deleteBucketReplication:function(e,t){s.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication"},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},putBucketWebsite:function(e,t){if(e.WebsiteConfiguration){var n=d.clone(e.WebsiteConfiguration||{}),r=n.RoutingRules||n.RoutingRule||[];r=d.isArray(r)?r:[r],delete n.RoutingRule,delete n.RoutingRules,r.length>0&&(n.RoutingRules={RoutingRule:r});var o=d.json2xml({WebsiteConfiguration:n}),i=e.Headers;i["Content-Type"]="application/xml",i["Content-MD5"]=d.binaryBase64(d.md5(o)),s.call(this,{Action:"name/cos:PutBucketWebsite",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:o,action:"website",headers:i},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})}else t({error:"missing param WebsiteConfiguration"})},getBucketWebsite:function(e,t){s.call(this,{Action:"name/cos:GetBucketWebsite",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"website"},function(e,n){if(e)if(404===e.statusCode&&"NoSuchWebsiteConfiguration"===e.error.Code){var r={WebsiteConfiguration:{},statusCode:e.statusCode};e.headers&&(r.headers=e.headers),t(null,r)}else t(e);else{var o=n.WebsiteConfiguration||{};if(o.RoutingRules){var i=d.clone(o.RoutingRules.RoutingRule||[]);i=d.makeArray(i),o.RoutingRules=i}t(null,{WebsiteConfiguration:o,statusCode:n.statusCode,headers:n.headers})}})},deleteBucketWebsite:function(e,t){s.call(this,{Action:"name/cos:DeleteBucketWebsite",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"website"},function(e,n){return e&&204===e.statusCode?t(null,{statusCode:e.statusCode}):e?t(e):void t(null,{statusCode:n.statusCode,headers:n.headers})})},getObject:function(e,t){var n={};n["response-content-type"]=e.ResponseContentType,n["response-content-language"]=e.ResponseContentLanguage,n["response-expires"]=e.ResponseExpires,n["response-cache-control"]=e.ResponseCacheControl,n["response-content-disposition"]=e.ResponseContentDisposition,n["response-content-encoding"]=e.ResponseContentEncoding,s.call(this,{Action:"name/cos:GetObject",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers,qs:n,rawBody:!0},function(n,r){if(n){var o=n.statusCode;return e.Headers["If-Modified-Since"]&&o&&304===o?t(null,{NotModified:!0}):t(n)}var i={};i.Body=r.body,r.headers&&r.headers.etag&&(i.ETag=r.headers&&r.headers.etag),d.extend(i,{statusCode:r.statusCode,headers:r.headers}),t(null,i)})},headObject:function(e,t){s.call(this,{Action:"name/cos:HeadObject",method:"HEAD",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers},function(n,r){if(n){var o=n.statusCode;return e.Headers["If-Modified-Since"]&&o&&304===o?t(null,{NotModified:!0,statusCode:o}):t(n)}r.headers&&r.headers.etag&&(r.ETag=r.headers&&r.headers.etag),t(null,r)})},listObjectVersions:function(e,t){var n={};n.prefix=e.Prefix||"",n.delimiter=e.Delimiter,n["key-marker"]=e.KeyMarker,n["version-id-marker"]=e.VersionIdMarker,n["max-keys"]=e.MaxKeys,n["encoding-type"]=e.EncodingType,s.call(this,{Action:"name/cos:GetBucketObjectVersions",ResourceKey:n.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n,action:"versions"},function(e,n){if(e)return t(e);var r=n.ListVersionsResult||{},o=r.DeleteMarker||[];o=d.isArray(o)?o:[o];var i=r.Version||[];i=d.isArray(i)?i:[i];var a=d.clone(r);delete a.DeleteMarker,delete a.Version,d.extend(a,{DeleteMarkers:o,Versions:i,statusCode:n.statusCode,headers:n.headers}),t(null,a)})},putObject:function(e,t){var n=this,r=e.ContentLength,o=d.throttleOnProgress.call(n,r,e.onProgress),a=e.Headers;!a["Cache-Control"]&&(a["Cache-Control"]="");var c=a["Content-Type"]||e.Body&&e.Body.type;!a["Content-Type"]&&c&&(a["Content-Type"]=c);var l=e.UploadAddMetaMd5||n.options.UploadAddMetaMd5||n.options.UploadCheckContentMd5;d.getBodyMd5(l,e.Body,function(a){a&&(n.options.UploadCheckContentMd5&&(e.Headers["Content-MD5"]=d.binaryBase64(a)),(e.UploadAddMetaMd5||n.options.UploadAddMetaMd5)&&(e.Headers["x-cos-meta-md5"]=a)),void 0!==e.ContentLength&&(e.Headers["Content-Length"]=e.ContentLength),o(null,!0),s.call(n,{Action:"name/cos:PutObject",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,body:e.Body,onProgress:o},function(a,c){if(a)return o(null,!0),t(a);if(o({loaded:r,total:r},!0),c){var s=i({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key}),l={Location:s=s.substr(s.indexOf("://")+3),statusCode:c.statusCode,headers:c.headers};return c.headers&&c.headers.etag&&(l.ETag=c.headers.etag),t(null,l)}t(null,c)})},e.onHashProgress)},deleteObject:function(e,t){s.call(this,{Action:"name/cos:DeleteObject",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,VersionId:e.VersionId},function(e,n){if(e){var r=e.statusCode;return r&&204===r?t(null,{statusCode:r}):r&&404===r?t(null,{BucketNotFound:!0,statusCode:r}):t(e)}t(null,{statusCode:n.statusCode,headers:n.headers})})},getObjectAcl:function(e,t){s.call(this,{Action:"name/cos:GetObjectACL",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"acl"},function(e,n){if(e)return t(e);var o=n.AccessControlPolicy||{},i=o.Owner||{},a=o.AccessControlList&&o.AccessControlList.Grant||[];a=d.isArray(a)?a:[a];var c=r(o);n.headers&&n.headers["x-cos-acl"]&&(c.ACL=n.headers["x-cos-acl"]),c=d.extend(c,{Owner:i,Grants:a,statusCode:n.statusCode,headers:n.headers}),t(null,c)})},putObjectAcl:function(e,t){var n=e.Headers,r="";if(e.AccessControlPolicy){var i=d.clone(e.AccessControlPolicy||{}),a=i.Grants||i.Grant;a=d.isArray(a)?a:[a],delete i.Grant,delete i.Grants,i.AccessControlList={Grant:a},r=d.json2xml({AccessControlPolicy:i}),n["Content-Type"]="application/xml",n["Content-MD5"]=d.binaryBase64(d.md5(r))}d.each(n,function(e,t){0===t.indexOf("x-cos-grant-")&&(n[t]=o(n[t]))}),s.call(this,{Action:"name/cos:PutObjectACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"acl",headers:n,body:r},function(e,n){if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})},optionsObject:function(e,t){var n=e.Headers;n.Origin=e.Origin,n["Access-Control-Request-Method"]=e.AccessControlRequestMethod,n["Access-Control-Request-Headers"]=e.AccessControlRequestHeaders,s.call(this,{Action:"name/cos:OptionsObject",method:"OPTIONS",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:n},function(e,n){if(e)return e.statusCode&&403===e.statusCode?t(null,{OptionsForbidden:!0,statusCode:e.statusCode}):t(e);var r=n.headers||{};t(null,{AccessControlAllowOrigin:r["access-control-allow-origin"],AccessControlAllowMethods:r["access-control-allow-methods"],AccessControlAllowHeaders:r["access-control-allow-headers"],AccessControlExposeHeaders:r["access-control-expose-headers"],AccessControlMaxAge:r["access-control-max-age"],statusCode:n.statusCode,headers:n.headers})})},putObjectCopy:function(e,t){var n=e.Headers;!n["Cache-Control"]&&(n["Cache-Control"]="");var r=(e.CopySource||"").match(/^([^.]+-\d+)\.cos(v6)?\.([^.]+)\.[^/]+\/(.+)$/);if(r){var o=r[1],i=r[3],a=decodeURIComponent(r[4]);s.call(this,{Scope:[{action:"name/cos:GetObject",bucket:o,region:i,prefix:a},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers},function(e,n){if(e)return t(e);var r=d.clone(n.CopyObjectResult||{});d.extend(r,{statusCode:n.statusCode,headers:n.headers}),t(null,r)})}else t({error:"CopySource format error"})},deleteMultipleObject:function(e,t){var n=e.Objects||[],r=e.Quiet;n=d.isArray(n)?n:[n];var o=d.json2xml({Delete:{Object:n,Quiet:r||!1}}),i=e.Headers;i["Content-Type"]="application/xml",i["Content-MD5"]=d.binaryBase64(d.md5(o));var a=d.map(n,function(t){return{action:"name/cos:DeleteObject",bucket:e.Bucket,region:e.Region,prefix:t.Key}});s.call(this,{Scope:a,method:"POST",Bucket:e.Bucket,Region:e.Region,body:o,action:"delete",headers:i},function(e,n){if(e)return t(e);var r=n.DeleteResult||{},o=r.Deleted||[],i=r.Error||[];o=d.isArray(o)?o:[o],i=d.isArray(i)?i:[i];var a=d.clone(r);d.extend(a,{Error:i,Deleted:o,statusCode:n.statusCode,headers:n.headers}),t(null,a)})},restoreObject:function(e,t){var n=e.Headers;if(e.RestoreRequest){var r=e.RestoreRequest||{},o=d.json2xml({RestoreRequest:r});n["Content-Type"]="application/xml",n["Content-MD5"]=d.binaryBase64(d.md5(o)),s.call(this,{Action:"name/cos:RestoreObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,body:o,action:"restore",headers:n},function(e,n){t(e,n)})}else t({error:"missing param RestoreRequest"})},uploadPartCopy:function(e,t){var n=(e.CopySource||"").match(/^([^.]+-\d+)\.cos(v6)?\.([^.]+)\.[^/]+\/(.+)$/);if(n){var r=n[1],o=n[3],i=decodeURIComponent(n[4]);s.call(this,{Scope:[{action:"name/cos:GetObject",bucket:r,region:o,prefix:i},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers},function(e,n){if(e)return t(e);var r=d.clone(n.CopyPartResult||{});d.extend(r,{statusCode:n.statusCode,headers:n.headers}),t(null,r)})}else t({error:"CopySource format error"})},multipartInit:function(e,t){var n=this,r=e.Headers;!r["Cache-Control"]&&(r["Cache-Control"]=""),d.getBodyMd5(e.Body&&(e.UploadAddMetaMd5||n.options.UploadAddMetaMd5),e.Body,function(r){r&&(e.Headers["x-cos-meta-md5"]=r),s.call(n,{Action:"name/cos:InitiateMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"uploads",headers:e.Headers},function(e,n){return e?t(e):(n=d.clone(n||{}))&&n.InitiateMultipartUploadResult?t(null,d.extend(n.InitiateMultipartUploadResult,{statusCode:n.statusCode,headers:n.headers})):void t(null,n)})},e.onHashProgress)},multipartUpload:function(e,t){var n=this;d.getFileSize("multipartUpload",e,function(){d.getBodyMd5(n.options.UploadCheckContentMd5,e.Body,function(r){r&&(e.Headers["Content-MD5"]=d.binaryBase64(r)),s.call(n,{Action:"name/cos:UploadPart",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers,onProgress:e.onProgress,body:e.Body||null},function(e,n){if(e)return t(e);n.headers=n.headers||{},t(null,{ETag:n.headers.etag||"",statusCode:n.statusCode,headers:n.headers})})})})},multipartComplete:function(e,t){for(var n=this,r=e.UploadId,o=e.Parts,a=0,c=o.length;a<c;a++)0!==o[a].ETag.indexOf('"')&&(o[a].ETag='"'+o[a].ETag+'"');var l=d.json2xml({CompleteMultipartUpload:{Part:o}}),u=e.Headers;u["Content-Type"]="application/xml",u["Content-MD5"]=d.binaryBase64(d.md5(l)),s.call(this,{Action:"name/cos:CompleteMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{uploadId:r},body:l,headers:u},function(r,o){if(r)return t(r);var a=i({ForcePathStyle:n.options.ForcePathStyle,protocol:n.options.Protocol,domain:n.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key,isLocation:!0}),c=o.CompleteMultipartUploadResult||{},s=d.extend(c,{Location:a,statusCode:o.statusCode,headers:o.headers});t(null,s)})},multipartList:function(e,t){var n={};n.delimiter=e.Delimiter,n["encoding-type"]=e.EncodingType,n.prefix=e.Prefix||"",n["max-uploads"]=e.MaxUploads,n["key-marker"]=e.KeyMarker,n["upload-id-marker"]=e.UploadIdMarker,n=d.clearKey(n),s.call(this,{Action:"name/cos:ListMultipartUploads",ResourceKey:n.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:n,action:"uploads"},function(e,n){if(e)return t(e);if(n&&n.ListMultipartUploadsResult){var r=n.ListMultipartUploadsResult.Upload||[],o=n.ListMultipartUploadsResult.CommonPrefixes||[];o=d.isArray(o)?o:[o],r=d.isArray(r)?r:[r],n.ListMultipartUploadsResult.Upload=r,n.ListMultipartUploadsResult.CommonPrefixes=o}var i=d.clone(n.ListMultipartUploadsResult||{});d.extend(i,{statusCode:n.statusCode,headers:n.headers}),t(null,i)})},multipartListPart:function(e,t){var n={};n.uploadId=e.UploadId,n["encoding-type"]=e.EncodingType,n["max-parts"]=e.MaxParts,n["part-number-marker"]=e.PartNumberMarker,s.call(this,{Action:"name/cos:ListParts",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:n},function(e,n){if(e)return t(e);var r=n.ListPartsResult||{},o=r.Part||[];o=d.isArray(o)?o:[o],r.Part=o;var i=d.clone(r);d.extend(i,{statusCode:n.statusCode,headers:n.headers}),t(null,i)})},multipartAbort:function(e,t){var n={};n.uploadId=e.UploadId,s.call(this,{Action:"name/cos:AbortMultipartUpload",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:n},function(e,n){if(e)return t(e);t(null,{statusCode:n.statusCode,headers:n.headers})})},getObjectUrl:function(e,t){var n=i({ForcePathStyle:this.options.ForcePathStyle,protocol:e.Protocol||this.options.Protocol,domain:this.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key});if(void 0!==e.Sign&&!e.Sign)return t(null,{Url:n}),n;var r=a.call(this,{Action:"PUT"===(e.Method||"").toUpperCase()?"name/cos:PutObject":"name/cos:GetObject",Bucket:e.Bucket||"",Region:e.Region||"",Method:e.Method||"get",Key:e.Key,Expires:e.Expires},function(e,r){if(t)if(e)t(e);else{var o=n;o+="?"+(r.Authorization.indexOf("q-signature")>-1?r.Authorization:"sign="+encodeURIComponent(r.Authorization)),r.XCosSecurityToken&&(o+="&x-cos-security-token="+r.XCosSecurityToken),r.ClientIP&&(o+="&clientIP="+r.ClientIP),r.ClientUA&&(o+="&clientUA="+r.ClientUA),r.Token&&(o+="&token="+r.Token),setTimeout(function(){t(null,{Url:o})})}});return r?n+"?"+r.Authorization+(r.XCosSecurityToken?"&x-cos-security-token="+r.XCosSecurityToken:""):n},getAuth:function(e){return d.getAuth({SecretId:e.SecretId||this.options.SecretId||"",SecretKey:e.SecretKey||this.options.SecretKey||"",Method:e.Method,Key:e.Key,Query:e.Query,Headers:e.Headers,Expires:e.Expires,UseRawKey:this.options.UseRawKey,SystemClockOffset:this.options.SystemClockOffset})}};e.exports.init=function(e,t){t.transferToTaskMethod(p,"putObject"),d.each(p,function(t,n){e.prototype[n]=d.apiWrapper(n,t),function(e,t,n){d.each(["Cors","Acl"],function(r){if(e.slice(-r.length)===r){var o=e.slice(0,-r.length)+r.toUpperCase(),i=d.apiWrapper(e,t),a=!1;n[o]=function(){!a&&console.warn("warning: cos."+o+" has been deprecated. Please Use cos."+e+" instead."),a=!0,i.apply(this,arguments)}}})}(n,t,e.prototype)})}},function(e,t){var n=function(){function e(e){var t=e.length,n=C.type(e);return"function"!==n&&!C.isWindow(e)&&(!(1!==e.nodeType||!t)||"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function t(){A.addEventListener?(A.removeEventListener("DOMContentLoaded",n,!1),window.removeEventListener("load",n,!1)):(A.detachEvent("onreadystatechange",n),window.detachEvent("onload",n))}function n(){(A.addEventListener||"load"===event.type||"complete"===A.readyState)&&(t(),C.ready())}function r(e,t,n){if(void 0===n&&1===e.nodeType){var r="data-"+t.replace(M,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:N.test(n)?C.parseJSON(n):n)}catch(e){}C.data(e,t,n)}else n=void 0}return n}function o(e){var t;for(t in e)if(("data"!==t||!C.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function i(e,t,n,r){if(C.acceptData(e)){var o,i,a=C.expando,c=e.nodeType,s=c?C.cache:e,l=c?e[a]:e[a]&&a;if(l&&s[l]&&(r||s[l].data)||void 0!==n||"string"!=typeof t)return l||(l=c?e[a]=m.pop()||C.guid++:a),s[l]||(s[l]=c?{}:{toJSON:C.noop}),"object"!=("undefined"===typeof t?"undefined":_typeof(t))&&"function"!=typeof t||(r?s[l]=C.extend(s[l],t):s[l].data=C.extend(s[l].data,t)),i=s[l],r||(i.data||(i.data={}),i=i.data),void 0!==n&&(i[C.camelCase(t)]=n),"string"==typeof t?null==(o=i[t])&&(o=i[C.camelCase(t)]):o=i,o}}function a(e,t,n){if(C.acceptData(e)){var r,i,a=e.nodeType,c=a?C.cache:e,s=a?e[C.expando]:C.expando;if(c[s]){if(t&&(r=n?c[s]:c[s].data)){i=(t=C.isArray(t)?t.concat(C.map(t,C.camelCase)):t in r||(t=C.camelCase(t))in r?[t]:t.split(" ")).length;for(;i--;)delete r[t[i]];if(n?!o(r):!C.isEmptyObject(r))return}(n||(delete c[s].data,o(c[s])))&&(a?C.cleanData([e],!0):x.deleteExpando||c!=c.window?delete c[s]:c[s]=null)}}}function c(){return!0}function s(){return!1}function l(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,o=0,i=t.toLowerCase().match(D)||[];if(C.isFunction(n))for(;r=i[o++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function u(e,t,n,r){function o(c){var s;return i[c]=!0,C.each(e[c]||[],function(e,c){var l=c(t,n,r);return"string"!=typeof l||a||i[l]?a?!(s=l):void 0:(t.dataTypes.unshift(l),o(l),!1)}),s}var i={},a=e===te;return o(t.dataTypes[0])||!i["*"]&&o("*")}function d(e,t){var n,r,o=C.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((o[r]?e:n||(n={}))[r]=t[r]);return n&&C.extend(!0,e,n),e}function p(e,t,n,r){var o;if(C.isArray(t))C.each(t,function(t,o){n||oe.test(e)?r(e,o):p(e+"["+("object"==("undefined"===typeof o?"undefined":_typeof(o))?t:"")+"]",o,n,r)});else if(n||"object"!==C.type(t))r(e,t);else for(o in t)p(e+"["+o+"]",t[o],n,r)}function f(){try{return new window.XMLHttpRequest}catch(e){}}var m=[],h=m.slice,v=m.concat,g=m.push,y=m.indexOf,b={},w=b.toString,_=b.hasOwnProperty,x={},O="1.11.1 -css,-css/addGetHookIf,-css/curCSS,-css/defaultDisplay,-css/hiddenVisibleSelectors,-css/support,-css/swap,-css/var/cssExpand,-css/var/isHidden,-css/var/rmargin,-css/var/rnumnonpx,-effects,-effects/Tween,-effects/animatedSelector,-effects/support,-dimensions,-offset,-deprecated,-event-alias,-wrap",C=function e(t,n){return new e.fn.init(t,n)},E=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,k=/^-ms-/,j=/-([\da-z])/gi,S=function(e,t){return t.toUpperCase()};C.fn=C.prototype={jquery:O,constructor:C,selector:"",length:0,toArray:function(){return h.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:h.call(this)},pushStack:function(e){var t=C.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return C.each(this,e,t)},map:function(e){return this.pushStack(C.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:g,sort:m.sort,splice:m.splice},C.extend=C.fn.extend=function(){var e,t,n,r,o,i,a=arguments[0]||{},c=1,s=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[c]||{},c++),"object"==("undefined"===typeof a?"undefined":_typeof(a))||C.isFunction(a)||(a={}),c===s&&(a=this,c--);c<s;c++)if(null!=(o=arguments[c]))for(r in o)e=a[r],a!==(n=o[r])&&(l&&n&&(C.isPlainObject(n)||(t=C.isArray(n)))?(t?(t=!1,i=e&&C.isArray(e)?e:[]):i=e&&C.isPlainObject(e)?e:{},a[r]=C.extend(l,i,n)):void 0!==n&&(a[r]=n));return a},C.extend({expando:"jQuery"+(O+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===C.type(e)},isArray:Array.isArray||function(e){return"array"===C.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!C.isArray(e)&&e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==C.type(e)||e.nodeType||C.isWindow(e))return!1;try{if(e.constructor&&!_.call(e,"constructor")&&!_.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(x.ownLast)for(t in e)return _.call(e,t);for(t in e);return void 0===t||_.call(e,t)},type:function(e){return null==e?e+"":"object"==("undefined"===typeof e?"undefined":_typeof(e))||"function"==typeof e?b[w.call(e)]||"object":"undefined"===typeof e?"undefined":_typeof(e)},globalEval:function(e){e&&C.trim(e)&&(window.execScript||function(e){window.eval.call(window,e)})(e)},camelCase:function(e){return e.replace(k,"ms-").replace(j,S)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(t,n,r){var o=0,i=t.length,a=e(t);if(r){if(a)for(;o<i&&!1!==n.apply(t[o],r);o++);else for(o in t)if(!1===n.apply(t[o],r))break}else if(a)for(;o<i&&!1!==n.call(t[o],o,t[o]);o++);else for(o in t)if(!1===n.call(t[o],o,t[o]))break;return t},trim:function(e){return null==e?"":(e+"").replace(E,"")},makeArray:function(t,n){var r=n||[];return null!=t&&(e(Object(t))?C.merge(r,"string"==typeof t?[t]:t):g.call(r,t)),r},inArray:function(e,t,n){var r;if(t){if(y)return y.call(t,e,n);for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,r=0,o=e.length;r<n;)e[o++]=t[r++];if(n!=n)for(;void 0!==t[r];)e[o++]=t[r++];return e.length=o,e},grep:function(e,t,n){for(var r=[],o=0,i=e.length,a=!n;o<i;o++)!t(e[o],o)!==a&&r.push(e[o]);return r},map:function(t,n,r){var o,i=0,a=t.length,c=[];if(e(t))for(;i<a;i++)null!=(o=n(t[i],i,r))&&c.push(o);else for(i in t)null!=(o=n(t[i],i,r))&&c.push(o);return v.apply([],c)},guid:1,proxy:function(e,t){var n,r,o;if("string"==typeof t&&(o=e[t],t=e,e=o),C.isFunction(e))return n=h.call(arguments,2),(r=function(){return e.apply(t||this,n.concat(h.call(arguments)))}).guid=e.guid=e.guid||C.guid++,r},now:function(){return+new Date},support:x}),C.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){b["[object "+t+"]"]=t.toLowerCase()});var T,A=window.document,R=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(C.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:R.exec(e))||!n[1]&&t)return!t||t.jquery?(t||T).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof C?t[0]:t,C.merge(this,C.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:A,!0)),rsingleTag.test(n[1])&&C.isPlainObject(t))for(n in t)C.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if((r=A.getElementById(n[2]))&&r.parentNode){if(r.id!==n[2])return T.find(e);this.length=1,this[0]=r}return this.context=A,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):C.isFunction(e)?void 0!==T.ready?T.ready(e):e(C):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),C.makeArray(e,this))}).prototype=C.fn,T=C(A);var P,D=/\S+/g,I={};C.Callbacks=function(e){e="string"==typeof e?I[e]||function(e){var t=I[e]={};return C.each(e.match(D)||[],function(e,n){t[n]=!0}),t}(e):C.extend({},e);var t,n,r,o,i,a,c=[],s=!e.once&&[],l=function l(d){for(n=e.memory&&d,r=!0,i=a||0,a=0,o=c.length,t=!0;c&&i<o;i++)if(!1===c[i].apply(d[0],d[1])&&e.stopOnFalse){n=!1;break}t=!1,c&&(s?s.length&&l(s.shift()):n?c=[]:u.disable())},u={add:function(){if(c){var r=c.length;!function t(n){C.each(n,function(n,r){var o=C.type(r);"function"===o?e.unique&&u.has(r)||c.push(r):r&&r.length&&"string"!==o&&t(r)})}(arguments),t?o=c.length:n&&(a=r,l(n))}return this},remove:function(){return c&&C.each(arguments,function(e,n){for(var r;(r=C.inArray(n,c,r))>-1;)c.splice(r,1),t&&(r<=o&&o--,r<=i&&i--)}),this},has:function(e){return e?C.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],o=0,this},disable:function(){return c=s=n=void 0,this},disabled:function(){return!c},lock:function(){return s=void 0,n||u.disable(),this},locked:function(){return!s},fireWith:function(e,n){return!c||r&&!s||(n=[e,(n=n||[]).slice?n.slice():n],t?s.push(n):l(n)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},C.extend({Deferred:function(e){var t=[["resolve","done",C.Callbacks("once memory"),"resolved"],["reject","fail",C.Callbacks("once memory"),"rejected"],["notify","progress",C.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return C.Deferred(function(n){C.each(t,function(t,i){var a=C.isFunction(e[t])&&e[t];o[i[1]](function(){var e=a&&a.apply(this,arguments);e&&C.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[i[0]+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?C.extend(e,r):r}},o={};return r.pipe=r.then,C.each(t,function(e,i){var a=i[2],c=i[3];r[i[1]]=a.add,c&&a.add(function(){n=c},t[1^e][2].disable,t[2][2].lock),o[i[0]]=function(){return o[i[0]+"With"](this===o?r:this,arguments),this},o[i[0]+"With"]=a.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,r,o=0,i=h.call(arguments),a=i.length,c=1!==a||e&&C.isFunction(e.promise)?a:0,s=1===c?e:C.Deferred(),l=function(e,n,r){return function(o){n[e]=this,r[e]=arguments.length>1?h.call(arguments):o,r===t?s.notifyWith(n,r):--c||s.resolveWith(n,r)}};if(a>1)for(t=new Array(a),n=new Array(a),r=new Array(a);o<a;o++)i[o]&&C.isFunction(i[o].promise)?i[o].promise().done(l(o,r,i)).fail(s.reject).progress(l(o,n,t)):--c;return c||s.resolveWith(r,i),s.promise()}}),C.fn.ready=function(e){return C.ready.promise().done(e),this},C.extend({isReady:!1,readyWait:1,holdReady:function(e){e?C.readyWait++:C.ready(!0)},ready:function(e){if(!(!0===e?--C.readyWait:C.isReady)){if(!A.body)return setTimeout(C.ready);C.isReady=!0,!0!==e&&--C.readyWait>0||(P.resolveWith(A,[C]),C.fn.triggerHandler&&(C(A).triggerHandler("ready"),C(A).off("ready")))}}}),C.ready.promise=function(e){if(!P)if(P=C.Deferred(),"complete"===A.readyState)setTimeout(C.ready);else if(A.addEventListener)A.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1);else{A.attachEvent("onreadystatechange",n),window.attachEvent("onload",n);var r=!1;try{r=null==window.frameElement&&A.documentElement}catch(e){}r&&r.doScroll&&function e(){if(!C.isReady){try{r.doScroll("left")}catch(t){return setTimeout(e,50)}t(),C.ready()}}()}return P.promise(e)};var B;for(B in C(x))break;x.ownLast="0"!==B,x.inlineBlockNeedsLayout=!1,C(function(){var e,t,n,r;(n=A.getElementsByTagName("body")[0])&&n.style&&(t=A.createElement("div"),(r=A.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),void 0!==t.style.zoom&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",x.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(r))}),function(){var e=A.createElement("div");if(null==x.deleteExpando){x.deleteExpando=!0;try{delete e.test}catch(e){x.deleteExpando=!1}}e=null}(),C.acceptData=function(e){var t=C.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||!0!==t&&e.getAttribute("classid")===t)};var N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,M=/([A-Z])/g;C.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?C.cache[e[C.expando]]:e[C.expando])&&!o(e)},data:function(e,t,n){return i(e,t,n)},removeData:function(e,t){return a(e,t)},_data:function(e,t,n){return i(e,t,n,!0)},_removeData:function(e,t){return a(e,t,!0)}}),C.fn.extend({data:function(e,t){var n,o,i,a=this[0],c=a&&a.attributes;if(void 0===e){if(this.length&&(i=C.data(a),1===a.nodeType&&!C._data(a,"parsedAttrs"))){for(n=c.length;n--;)c[n]&&0===(o=c[n].name).indexOf("data-")&&r(a,o=C.camelCase(o.slice(5)),i[o]);C._data(a,"parsedAttrs",!0)}return i}return"object"==("undefined"===typeof e?"undefined":_typeof(e))?this.each(function(){C.data(this,e)}):arguments.length>1?this.each(function(){C.data(this,e,t)}):a?r(a,e,C.data(a,e)):void 0},removeData:function(e){return this.each(function(){C.removeData(this,e)})}}),C.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=C._data(e,t),n&&(!r||C.isArray(n)?r=C._data(e,t,C.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=C.queue(e,t),r=n.length,o=n.shift(),i=C._queueHooks(e,t);"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete i.stop,o.call(e,function(){C.dequeue(e,t)},i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return C._data(e,n)||C._data(e,n,{empty:C.Callbacks("once memory").add(function(){C._removeData(e,t+"queue"),C._removeData(e,n)})})}}),C.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?C.queue(this[0],e):void 0===t?this:this.each(function(){var n=C.queue(this,e,t);C._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&C.dequeue(this,e)})},dequeue:function(e){return this.each(function(){C.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,o=C.Deferred(),i=this,a=this.length,c=function(){--r||o.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=C._data(i[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(c));return c(),o.promise(t)}}),C.event={global:{},add:function(e,t,n,r,o){var i,a,c,s,l,u,d,p,f,m,h,v=C._data(e);if(v){for(n.handler&&(n=(s=n).handler,o=s.selector),n.guid||(n.guid=C.guid++),(a=v.events)||(a=v.events={}),(u=v.handle)||((u=v.handle=function(e){return void 0===C||e&&C.event.triggered===e.type?void 0:C.event.dispatch.apply(u.elem,arguments)}).elem=e),c=(t=(t||"").match(D)||[""]).length;c--;)f=h=(i=H.exec(t[c])||[])[1],m=(i[2]||"").split(".").sort(),f&&(l=C.event.special[f]||{},f=(o?l.delegateType:l.bindType)||f,l=C.event.special[f]||{},d=C.extend({type:f,origType:h,data:r,handler:n,guid:n.guid,selector:o,needsContext:o&&C.expr.match.needsContext.test(o),namespace:m.join(".")},s),(p=a[f])||((p=a[f]=[]).delegateCount=0,l.setup&&!1!==l.setup.call(e,r,m,u)||(e.addEventListener?e.addEventListener(f,u,!1):e.attachEvent&&e.attachEvent("on"+f,u))),l.add&&(l.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),o?p.splice(p.delegateCount++,0,d):p.push(d),C.event.global[f]=!0);e=null}},remove:function(e,t,n,r,o){var i,a,c,s,l,u,d,p,f,m,h,v=C.hasData(e)&&C._data(e);if(v&&(u=v.events)){for(l=(t=(t||"").match(D)||[""]).length;l--;)if(f=h=(c=H.exec(t[l])||[])[1],m=(c[2]||"").split(".").sort(),f){for(d=C.event.special[f]||{},p=u[f=(r?d.delegateType:d.bindType)||f]||[],c=c[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=i=p.length;i--;)a=p[i],!o&&h!==a.origType||n&&n.guid!==a.guid||c&&!c.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(p.splice(i,1),a.selector&&p.delegateCount--,d.remove&&d.remove.call(e,a));s&&!p.length&&(d.teardown&&!1!==d.teardown.call(e,m,v.handle)||C.removeEvent(e,f,v.handle),delete u[f])}else for(f in u)C.event.remove(e,f+t[l],n,r,!0);C.isEmptyObject(u)&&(delete v.handle,C._removeData(e,"events"))}},trigger:function(e,t,n,r){var o,i,a,c,s,l,u,d=[n||A],p=_.call(e,"type")?e.type:e,f=_.call(e,"namespace")?e.namespace.split("."):[];if(a=l=n=n||A,3!==n.nodeType&&8!==n.nodeType&&!z.test(p+C.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),i=p.indexOf(":")<0&&"on"+p,(e=e[C.expando]?e:new C.Event(p,"object"==("undefined"===typeof e?"undefined":_typeof(e))&&e)).isTrigger=r?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:C.makeArray(t,[e]),s=C.event.special[p]||{},r||!s.trigger||!1!==s.trigger.apply(n,t))){if(!r&&!s.noBubble&&!C.isWindow(n)){for(c=s.delegateType||p,z.test(c+p)||(a=a.parentNode);a;a=a.parentNode)d.push(a),l=a;l===(n.ownerDocument||A)&&d.push(l.defaultView||l.parentWindow||window)}for(u=0;(a=d[u++])&&!e.isPropagationStopped();)e.type=u>1?c:s.bindType||p,(o=(C._data(a,"events")||{})[e.type]&&C._data(a,"handle"))&&o.apply(a,t),(o=i&&a[i])&&o.apply&&C.acceptData(a)&&(e.result=o.apply(a,t),!1===e.result&&e.preventDefault());if(e.type=p,!r&&!e.isDefaultPrevented()&&(!s._default||!1===s._default.apply(d.pop(),t))&&C.acceptData(n)&&i&&n[p]&&!C.isWindow(n)){(l=n[i])&&(n[i]=null),C.event.triggered=p;try{n[p]()}catch(e){}C.event.triggered=void 0,l&&(n[i]=l)}return e.result}},dispatch:function(e){e=C.event.fix(e);var t,n,r,o,i,a=[],c=h.call(arguments),s=(C._data(this,"events")||{})[e.type]||[],l=C.event.special[e.type]||{};if(c[0]=e,e.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,e)){for(a=C.event.handlers.call(this,e,s),t=0;(o=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,i=0;(r=o.handlers[i++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(r.namespace)||(e.handleObj=r,e.data=r.data,void 0!==(n=((C.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,c))&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,o,i,a=[],c=t.delegateCount,s=e.target;if(c&&s.nodeType&&(!e.button||"click"!==e.type))for(;s!=this;s=s.parentNode||this)if(1===s.nodeType&&(!0!==s.disabled||"click"!==e.type)){for(o=[],i=0;i<c;i++)void 0===o[n=(r=t[i]).selector+" "]&&(o[n]=r.needsContext?C(n,this).index(s)>=0:C.find(n,this,null,[s]).length),o[n]&&o.push(r);o.length&&a.push({elem:s,handlers:o})}return c<t.length&&a.push({elem:this,handlers:t.slice(c)}),a},fix:function(e){if(e[C.expando])return e;var t,n,r,o=e.type,i=e,a=this.fixHooks[o];for(a||(this.fixHooks[o]=a=F.test(o)?this.mouseHooks:L.test(o)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new C.Event(i),t=r.length;t--;)e[n=r[t]]=i[n];return e.target||(e.target=i.srcElement||A),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,i):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,o,i=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(o=(r=e.target.ownerDocument||A).documentElement,n=r.body,e.pageX=t.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||void 0===i||(e.which=1&i?1:2&i?3:4&i?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(C.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return C.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var o=C.extend(new C.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?C.event.trigger(o,null,t):C.event.dispatch.call(t,o),o.isDefaultPrevented()&&n.preventDefault()}},C.removeEvent=A.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(void 0===e[r]&&(e[r]=null),e.detachEvent(r,n))},C.Event=function(e,t){if(!(this instanceof C.Event))return new C.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?c:s):this.type=e,t&&C.extend(this,t),this.timeStamp=e&&e.timeStamp||C.now(),this[C.expando]=!0};var U=/^(?:input|select|textarea)$/i,L=/^key/,F=/^(?:mouse|pointer|contextmenu)|click/,z=/^(?:focusinfocus|focusoutblur)$/,H=/^([^.]*)(?:\.(.+)|)$/;C.Event.prototype={isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=c,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=c,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=c,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},x.submitBubbles||(C.event.special.submit={setup:function(){if(C.nodeName(this,"form"))return!1;C.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=C.nodeName(t,"input")||C.nodeName(t,"button")?t.form:void 0;n&&!C._data(n,"submitBubbles")&&(C.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),C._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&C.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(C.nodeName(this,"form"))return!1;C.event.remove(this,"._submit")}}),x.changeBubbles||(C.event.special.change={setup:function(){if(U.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(C.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),C.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),C.event.simulate("change",this,e,!0)})),!1;C.event.add(this,"beforeactivate._change",function(e){var t=e.target;U.test(t.nodeName)&&!C._data(t,"changeBubbles")&&(C.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||C.event.simulate("change",this.parentNode,e,!0)}),C._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return C.event.remove(this,"._change"),!U.test(this.nodeName)}}),x.focusinBubbles||C.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){C.event.simulate(t,e.target,C.event.fix(e),!0)};C.event.special[t]={setup:function(){var r=this.ownerDocument||this,o=C._data(r,t);o||r.addEventListener(e,n,!0),C._data(r,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this,o=C._data(r,t)-1;o?C._data(r,t,o):(r.removeEventListener(e,n,!0),C._removeData(r,t))}}}),C.fn.extend({on:function(e,t,n,r,o){var i,a;if("object"==("undefined"===typeof e?"undefined":_typeof(e))){for(i in"string"!=typeof t&&(n=n||t,t=void 0),e)this.on(i,t,n,e[i],o);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),!1===r)r=s;else if(!r)return this;return 1===o&&(a=r,(r=function(e){return C().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=C.guid++)),this.each(function(){C.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,C(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==("undefined"===typeof e?"undefined":_typeof(e))){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=s),this.each(function(){C.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){C.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return C.event.trigger(e,t,n,!0)}}),C.fn.delay=function(e,t){return e=C.fx&&C.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})};var V=C.now(),K=/\?/,q=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;C.parseJSON=function(e){if(window.JSON&&window.JSON.parse)return window.JSON.parse(e+"");var t,n=null,r=C.trim(e+"");return r&&!C.trim(r.replace(q,function(e,r,o,i){return t&&r&&(n=0),0===n?e:(t=o||r,n+=!i-!o,"")}))?Function("return "+r)():C.error("Invalid JSON: "+e)},C.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{window.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e))}catch(e){t=void 0}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||C.error("Invalid XML: "+e),t};var W,$,X=/#.*$/,G=/([?&])_=[^&]*/,Q=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Y=/^(?:GET|HEAD)$/,J=/^\/\//,Z=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ee={},te={},ne="*/".concat("*");try{$=location.href}catch(m){($=A.createElement("a")).href="",$=$.href}W=Z.exec($.toLowerCase())||[],C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:$,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(W[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ne,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":C.parseJSON,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?d(d(e,C.ajaxSettings),t):d(C.ajaxSettings,e)},ajaxPrefilter:l(ee),ajaxTransport:l(te),ajax:function(e,t){function n(e,t,n,r){var o,u,d,y,b,_=t;2!==w&&(w=2,c&&clearTimeout(c),l=void 0,a=r||"",x.readyState=e>0?4:0,o=e>=200&&e<300||304===e,n&&(y=function(e,t,n){for(var r,o,i,a,c=e.contents,s=e.dataTypes;"*"===s[0];)s.shift(),void 0===o&&(o=e.mimeType||t.getResponseHeader("Content-Type"));if(o)for(a in c)if(c[a]&&c[a].test(o)){s.unshift(a);break}if(s[0]in n)i=s[0];else{for(a in n){if(!s[0]||e.converters[a+" "+s[0]]){i=a;break}r||(r=a)}i=i||r}if(i)return i!==s[0]&&s.unshift(i),n[i]}(p,x,n)),y=function(e,t,n,r){var o,i,a,c,s,l={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(i=u.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!s&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),s=i,i=u.shift())if("*"===i)i=s;else if("*"!==s&&s!==i){if(!(a=l[s+" "+i]||l["* "+i]))for(o in l)if((c=o.split(" "))[1]===i&&(a=l[s+" "+c[0]]||l["* "+c[0]])){!0===a?a=l[o]:!0!==l[o]&&(i=c[0],u.unshift(c[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+s+" to "+i}}}return{state:"success",data:t}}(p,y,x,o),o?(p.ifModified&&((b=x.getResponseHeader("Last-Modified"))&&(C.lastModified[i]=b),(b=x.getResponseHeader("etag"))&&(C.etag[i]=b)),204===e||"HEAD"===p.type?_="nocontent":304===e?_="notmodified":(_=y.state,u=y.data,o=!(d=y.error))):(d=_,!e&&_||(_="error",e<0&&(e=0))),x.status=e,x.statusText=(t||_)+"",o?h.resolveWith(f,[u,_,x]):h.rejectWith(f,[x,_,d]),x.statusCode(g),g=void 0,s&&m.trigger(o?"ajaxSuccess":"ajaxError",[x,p,o?u:d]),v.fireWith(f,[x,_]),s&&(m.trigger("ajaxComplete",[x,p]),--C.active||C.event.trigger("ajaxStop")))}"object"==("undefined"===typeof e?"undefined":_typeof(e))&&(t=e,e=void 0),t=t||{};var r,o,i,a,c,s,l,d,p=C.ajaxSetup({},t),f=p.context||p,m=p.context&&(f.nodeType||f.jquery)?C(f):C.event,h=C.Deferred(),v=C.Callbacks("once memory"),g=p.statusCode||{},y={},b={},w=0,_="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!d)for(d={};t=Q.exec(a);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return w||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(w<2)for(t in e)g[t]=[g[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||_;return l&&l.abort(t),n(0,t),this}};if(h.promise(x).complete=v.add,x.success=x.done,x.error=x.fail,p.url=((e||p.url||$)+"").replace(X,"").replace(J,W[1]+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=C.trim(p.dataType||"*").toLowerCase().match(D)||[""],null==p.crossDomain&&(r=Z.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===W[1]&&r[2]===W[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(W[3]||("http:"===W[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=C.param(p.data,p.traditional)),u(ee,p,t,x),2===w)return x;for(o in(s=p.global)&&0==C.active++&&C.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Y.test(p.type),i=p.url,p.hasContent||(p.data&&(i=p.url+=(K.test(i)?"&":"?")+p.data,delete p.data),!1===p.cache&&(p.url=G.test(i)?i.replace(G,"$1_="+V++):i+(K.test(i)?"&":"?")+"_="+V++)),p.ifModified&&(C.lastModified[i]&&x.setRequestHeader("If-Modified-Since",C.lastModified[i]),C.etag[i]&&x.setRequestHeader("If-None-Match",C.etag[i])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&x.setRequestHeader("Content-Type",p.contentType),p.headers)x.setRequestHeader(o,p.headers[o]);if(p.beforeSend&&(!1===p.beforeSend.call(f,x,p)||2===w))return x.abort();for(o in _="abort",{success:1,error:1,complete:1})x[o](p[o]);if(l=u(te,p,t,x)){x.readyState=1,s&&m.trigger("ajaxSend",[x,p]),p.async&&p.timeout>0&&(c=setTimeout(function(){x.abort("timeout")},p.timeout));try{w=1,l.send(y,n)}catch(e){if(!(w<2))throw e;n(-1,e)}}else n(-1,"No Transport");return x},getJSON:function(e,t,n){return C.get(e,t,n,"json")},getScript:function(e,t){return C.get(e,void 0,t,"script")}}),C.each(["get","post"],function(e,t){C[t]=function(e,n,r,o){return C.isFunction(n)&&(o=o||r,r=n,n=void 0),C.ajax({url:e,type:t,dataType:o,data:n,success:r})}}),C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){C.fn[t]=function(e){return this.on(t,e)}}),C._evalUrl=function(e){return C.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})};var re=/%20/g,oe=/\[\]$/,ie=/\r?\n/g,ae=/^(?:submit|button|image|reset|file)$/i,ce=/^(?:input|select|textarea|keygen)/i;C.param=function(e,t){var n,r=[],o=function(e,t){t=C.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=C.ajaxSettings&&C.ajaxSettings.traditional),C.isArray(e)||e.jquery&&!C.isPlainObject(e))C.each(e,function(){o(this.name,this.value)});else for(n in e)p(n,e[n],t,o);return r.join("&").replace(re,"+")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=C.prop(this,"elements");return e?C.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!C(this).is(":disabled")&&ce.test(this.nodeName)&&!ae.test(e)&&(this.checked||!rcheckableType.test(e))}).map(function(e,t){var n=C(this).val();return null==n?null:C.isArray(n)?C.map(n,function(e){return{name:t.name,value:e.replace(ie,"\r\n")}}):{name:t.name,value:n.replace(ie,"\r\n")}}).get()}}),C.ajaxSettings.xhr=void 0!==window.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&f()||function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:f;var se=0,le={},ue=C.ajaxSettings.xhr();window.ActiveXObject&&C(window).on("unload",function(){for(var e in le)le[e](void 0,!0)}),x.cors=!!ue&&"withCredentials"in ue,(ue=x.ajax=!!ue)&&C.ajaxTransport(function(e){var t;if(!e.crossDomain||x.cors)return{send:function(n,r){var o,i=e.xhr(),a=++se;if(i.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)i[o]=e.xhrFields[o];for(o in e.mimeType&&i.overrideMimeType&&i.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)void 0!==n[o]&&i.setRequestHeader(o,n[o]+"");i.upload&&e.progress&&(i.upload.onprogress=e.progress),i.send(e.hasContent&&(e.body||e.data)||null),t=function(n,o){var c,s,l;if(t&&(o||4===i.readyState))if(delete le[a],t=void 0,i.onreadystatechange=C.noop,o)4!==i.readyState&&i.abort();else{l={},c=i.status,"string"==typeof i.responseText&&(l.text=i.responseText);try{s=i.statusText}catch(e){s=""}c||!e.isLocal||e.crossDomain?1223===c&&(c=204):c=l.text?200:404}l&&r(c,s,l,i.getAllResponseHeaders())},e.async?4===i.readyState?setTimeout(t):i.onreadystatechange=le[a]=t:t()},abort:function(){t&&t(void 0,!0)}}}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return C.globalEval(e),e}}}),C.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),C.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=A.head||C("head")[0]||A.documentElement;return{send:function(r,o){(t=A.createElement("script")).async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||o(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var de=[],pe=/(=)\?(?=&|$)|\?\?/;return C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=de.pop()||C.expando+"_"+V++;return this[e]=!0,e}}),C.ajaxPrefilter("json jsonp",function(e,t,n){var r,o,i,a=!1!==e.jsonp&&(pe.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&pe.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=C.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(pe,"$1"+r):!1!==e.jsonp&&(e.url+=(K.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return i||C.error(r+" was not called"),i[0]},e.dataTypes[0]="json",o=window[r],window[r]=function(){i=arguments},n.always(function(){window[r]=o,e[r]&&(e.jsonpCallback=t.jsonpCallback,de.push(r)),i&&C.isFunction(o)&&o(i[0]),i=o=void 0}),"script"}),C.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||A;var r=rsingleTag.exec(e),o=!n&&[];return r?[t.createElement(r[1])]:(r=C.buildFragment([e],t,o),o&&o.length&&C(o).remove(),C.merge([],r.childNodes))},C}(),r=function(e){switch("undefined"===typeof e?"undefined":_typeof(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t){if((e=n.extend(!0,{headers:{},qs:{}},e)).type=e.method,delete e.method,e.onProgress&&(e.progress=e.onProgress,delete e.onProgress),e.qs){var o=(i=e.qs,a=a||"&",c=c||"=",null===i&&(i=void 0),"object"==("undefined"===typeof i?"undefined":_typeof(i))?Object.keys(i).map(function(e){var t=encodeURIComponent(r(e))+c;return Array.isArray(i[e])?i[e].map(function(e){return t+encodeURIComponent(r(e))}).join(a):t+encodeURIComponent(r(i[e]))}).filter(Boolean).join(a):s?encodeURIComponent(r(s))+c+encodeURIComponent(r(i)):"");o&&(e.url+=(-1===e.url.indexOf("?")?"?":"&")+o),delete e.qs}var i,a,c,s;if(e.json&&(e.data=e.body,delete e.json,delete e.body,!e.headers&&(e.headers={}),e.headers["Content-Type"]="application/json"),e.body&&(e.body instanceof Blob||"[object File]"===e.body.toString()||"[object Blob]"===e.body.toString()||(e.data=e.body,delete e.body)),e.headers){var l=e.headers;delete e.headers,e.beforeSend=function(e){for(var t in l)l.hasOwnProperty(t)&&"content-length"!==t.toLowerCase()&&"user-agent"!==t.toLowerCase()&&"origin"!==t.toLowerCase()&&"host"!==t.toLowerCase()&&e.setRequestHeader(t,l[t])}}var u=function(e){var t={};return e.getAllResponseHeaders().trim().split("\n").forEach(function(e){if(e){var n=e.indexOf(":"),r=e.substr(0,n).trim().toLowerCase(),o=e.substr(n+1).trim();t[r]=o}}),{statusCode:e.status,statusMessage:e.statusText,headers:t}};return e.success=function(e,n,r){t(null,u(r),e)},e.error=function(e){e.responseText?t(null,u(e),e.responseText):t(e.statusText,u(e),e.responseText)},e.dataType="text",n.ajax(e)}},function(e,t,n){function r(e,t){var n=e.TaskId,r=e.Bucket,a=e.Region,c=e.Key,s=e.StorageClass,l=this,u={},h=e.FileSize,v=e.SliceSize,g=Math.ceil(h/v),y=0,b=m.throttleOnProgress.call(l,h,e.onHashProgress),w=function(t,n){var r=t.length;if(0===r)return n(null,!0);if(r>g)return n(null,!1);if(r>1&&Math.max(t[0].Size,t[1].Size)!==v)return n(null,!1);!function o(i){if(i<r){var a=t[i];!function(t,n){var r=v*(t-1),o=Math.min(r+v,h),i=o-r;u[t]?n(null,{PartNumber:t,ETag:u[t],Size:i}):m.fileSlice(e.Body,r,o,!1,function(e){m.getFileMd5(e,function(e,r){if(e)return n(e);var o='"'+r+'"';u[t]=o,y+=i,n(e,{PartNumber:t,ETag:o,Size:i}),b({loaded:y,total:h})})})}(a.PartNumber,function(e,t){t&&t.ETag===a.ETag&&t.Size===a.Size?o(i+1):n(null,!1)})}else n(null,!0)}(0)},_=new f;_.on("error",function(e){if(l._isRunningTask(n))return t(e)}),_.on("upload_id_available",function(e){var n={},r=[];m.each(e.PartList,function(e){n[e.PartNumber]=e});for(var o=1;o<=g;o++){var i=n[o];i?(i.PartNumber=o,i.Uploaded=!0):i={PartNumber:o,ETag:null,Uploaded:!1},r.push(i)}e.PartList=r,t(null,e)}),_.on("no_available_upload_id",function(){if(l._isRunningTask(n)){var o=m.extend({Bucket:r,Region:a,Key:c,Headers:m.clone(e.Headers),StorageClass:s,Body:e.Body},e),i=e.Headers["Content-Type"]||e.Body&&e.Body.type;i&&(o.Headers["Content-Type"]=i),l.multipartInit(o,function(e,r){if(l._isRunningTask(n)){if(e)return _.emit("error",e);var o=r.UploadId;if(!o)return t({Message:"no upload id"});_.emit("upload_id_available",{UploadId:o,PartList:[]})}})}}),_.on("has_and_check_upload_id",function(e){e=e.reverse(),p.eachLimit(e,1,function(e,t){l._isRunningTask(n)&&(d.using[e]?t():i.call(l,{Bucket:r,Region:a,Key:c,UploadId:e},function(r,o){if(l._isRunningTask(n)){if(r)return d.removeUsing(e),_.emit("error",r);var i=o.PartList;i.forEach(function(e){e.PartNumber*=1,e.Size*=1,e.ETag=e.ETag||""}),w(i,function(r,o){if(l._isRunningTask(n))return r?_.emit("error",r):void(o?t({UploadId:e,PartList:i}):t())})}}))},function(e){l._isRunningTask(n)&&(b(null,!0),e&&e.UploadId?_.emit("upload_id_available",e):_.emit("no_available_upload_id"))})}),_.on("seek_local_avail_upload_id",function(t){var o=d.getFileId(e.Body,e.ChunkSize,r,c),s=d.getUploadIdList(o);if(o&&s){!function e(o){if(o>=s.length)_.emit("has_and_check_upload_id",t);else{var u=s[o];if(!m.isInArray(t,u))return d.removeUploadId(u),void e(o+1);d.using[u]?e(o+1):i.call(l,{Bucket:r,Region:a,Key:c,UploadId:u},function(t,r){l._isRunningTask(n)&&(t?(d.removeUploadId(u),e(o+1)):_.emit("upload_id_available",{UploadId:u,PartList:r.PartList}))})}}(0)}else _.emit("has_and_check_upload_id",t)}),_.on("get_remote_upload_id_list",function(t){o.call(l,{Bucket:r,Region:a,Key:c},function(t,o){if(l._isRunningTask(n)){if(t)return _.emit("error",t);var i=m.filter(o.UploadList,function(e){return e.Key===c&&(!s||e.StorageClass.toUpperCase()===s.toUpperCase())}).reverse().map(function(e){return e.UploadId||e.UploadID});if(i.length)_.emit("seek_local_avail_upload_id",i);else{var a,u=d.getFileId(e.Body,e.ChunkSize,r,c);u&&(a=d.getUploadIdList(u))&&m.each(a,function(e){d.removeUploadId(e)}),_.emit("no_available_upload_id")}}})}),_.emit("get_remote_upload_id_list")}function o(e,t){var n=this,r=[],o={Bucket:e.Bucket,Region:e.Region,Prefix:e.Key};!function e(){n.multipartList(o,function(n,i){if(n)return t(n);r.push.apply(r,i.Upload||[]),"true"===i.IsTruncated?(o.KeyMarker=i.NextKeyMarker,o.UploadIdMarker=i.NextUploadIdMarker,e()):t(null,{UploadList:r})})}()}function i(e,t){var n=this,r=[],o={Bucket:e.Bucket,Region:e.Region,Key:e.Key,UploadId:e.UploadId};!function e(){n.multipartListPart(o,function(n,i){if(n)return t(n);r.push.apply(r,i.Part||[]),"true"===i.IsTruncated?(o.PartNumberMarker=i.NextPartNumberMarker,e()):t(null,{PartList:r})})}()}function a(e,t){var n=this,r=e.TaskId,o=e.Bucket,i=e.Region,a=e.Key,s=e.UploadData,l=e.FileSize,u=e.SliceSize,d=Math.min(e.AsyncLimit||n.options.ChunkParallelLimit||1,256),f=e.Body,h=Math.ceil(l/u),v=0,g=e.ServerSideEncryption,y=m.filter(s.PartList,function(e){return e.Uploaded&&(v+=e.PartNumber>=h&&l%u||u),!e.Uploaded}),b=e.onProgress;p.eachLimit(y,d,function(e,t){if(n._isRunningTask(r)){var d=e.PartNumber,p=Math.min(l,e.PartNumber*u)-(e.PartNumber-1)*u,h=0;c.call(n,{TaskId:r,Bucket:o,Region:i,Key:a,SliceSize:u,FileSize:l,PartNumber:d,ServerSideEncryption:g,Body:f,UploadData:s,onProgress:function(e){v+=e.loaded-h,h=e.loaded,b({loaded:v,total:l})}},function(o,i){n._isRunningTask(r)&&(!m.isBrowser||o||i.ETag||(o='get ETag error, please add "ETag" to CORS ExposeHeader setting.'),o?v-=h:(v+=p-h,e.ETag=i.ETag),t(o||null,i))})}},function(e){if(n._isRunningTask(r))return e?t(e):void t(null,{UploadId:s.UploadId,SliceList:s.PartList})})}function c(e,t){var n=this,r=e.TaskId,o=e.Bucket,i=e.Region,a=e.Key,c=e.FileSize,s=e.Body,l=1*e.PartNumber,u=e.SliceSize,d=e.ServerSideEncryption,f=e.UploadData,h=n.options.ChunkRetryTimes+1,v=u*(l-1),g=u,y=v+u;y>c&&(g=(y=c)-v);var b=f.PartList[l-1];p.retry(h,function(t){n._isRunningTask(r)&&m.fileSlice(s,v,y,!0,function(c){n.multipartUpload({TaskId:r,Bucket:o,Region:i,Key:a,ContentLength:g,PartNumber:l,UploadId:f.UploadId,ServerSideEncryption:d,Body:c,onProgress:e.onProgress},function(e,o){if(n._isRunningTask(r))return e?t(e):(b.Uploaded=!0,t(null,o))})})},function(e,o){if(n._isRunningTask(r))return t(e,o)})}function s(e,t){var n=e.Bucket,r=e.Region,o=e.Key,i=e.UploadId,a=e.SliceList,c=this,s=this.options.ChunkRetryTimes+1,l=a.map(function(e){return{PartNumber:e.PartNumber,ETag:e.ETag}});p.retry(s,function(e){c.multipartComplete({Bucket:n,Region:r,Key:o,UploadId:i,Parts:l},e)},function(e,n){t(e,n)})}function l(e,t){var n=e.Bucket,r=e.Region,o=e.Key,i=e.AbortArray,a=e.AsyncLimit||1,c=this,s=0,l=new Array(i.length);p.eachLimit(i,a,function(t,i){var a=s;if(o&&o!==t.Key)return l[a]={error:{KeyNotMatch:!0}},void i(null);var u=t.UploadId||t.UploadID;c.multipartAbort({Bucket:n,Region:r,Key:t.Key,Headers:e.Headers,UploadId:u},function(e,o){var c={Bucket:n,Region:r,Key:t.Key,UploadId:u};l[a]={error:e,task:c},i(null)}),s++},function(e){if(e)return t(e);for(var n=[],r=[],o=0,i=l.length;o<i;o++){var a=l[o];a.task&&(a.error?r.push(a.task):n.push(a.task))}return t(null,{successList:n,errorList:r})})}function u(e,t){var n=e.TaskId,r=e.Bucket,o=e.Region,i=e.Key,a=e.CopySource,c=e.UploadId,s=1*e.PartNumber,l=e.CopySourceRange,u=this.options.ChunkRetryTimes+1,d=this;p.retry(u,function(t){d.uploadPartCopy({TaskId:n,Bucket:r,Region:o,Key:i,CopySource:a,UploadId:c,PartNumber:s,CopySourceRange:l,onProgress:e.onProgress},function(e,n){t(e||null,n)})},function(e,n){return t(e,n)})}var d=n(18),p=n(22),f=n(16).EventProxy,m=n(8),h={sliceUploadFile:function(e,t){var n,o,i=this,c=new f,l=e.TaskId,u=e.Bucket,p=e.Region,h=e.Key,v=e.Body,g=e.ChunkSize||e.SliceSize||i.options.ChunkSize,y=e.AsyncLimit,b=e.StorageClass||"Standard",w=e.ServerSideEncryption,_=e.onHashProgress;c.on("error",function(e){if(i._isRunningTask(l))return t(e)}),c.on("upload_complete",function(e){t(null,e)}),c.on("upload_slice_complete",function(e){s.call(i,{Bucket:u,Region:p,Key:h,UploadId:e.UploadId,SliceList:e.SliceList},function(t,r){if(i._isRunningTask(l)){if(d.removeUsing(e.UploadId),t)return o(null,!0),c.emit("error",t);d.removeUploadId(e.UploadId),o({loaded:n,total:n},!0),c.emit("upload_complete",r)}})}),c.on("get_upload_data_finish",function(t){var r=d.getFileId(v,e.ChunkSize,u,h);r&&d.saveUploadId(r,t.UploadId,i.options.UploadIdCacheLimit),d.setUsing(t.UploadId),o(null,!0),a.call(i,{TaskId:l,Bucket:u,Region:p,Key:h,Body:v,FileSize:n,SliceSize:g,AsyncLimit:y,ServerSideEncryption:w,UploadData:t,onProgress:o},function(e,t){if(i._isRunningTask(l))return e?(o(null,!0),c.emit("error",e)):void c.emit("upload_slice_complete",t)})}),c.on("get_file_size_finish",function(){if(o=m.throttleOnProgress.call(i,n,e.onProgress),e.UploadData.UploadId)c.emit("get_upload_data_finish",e.UploadData);else{var t=m.extend({TaskId:l,Bucket:u,Region:p,Key:h,Headers:e.Headers,StorageClass:b,Body:v,FileSize:n,SliceSize:g,onHashProgress:_},e);r.call(i,t,function(t,n){if(i._isRunningTask(l)){if(t)return c.emit("error",t);e.UploadData.UploadId=n.UploadId,e.UploadData.PartList=n.PartList,c.emit("get_upload_data_finish",e.UploadData)}})}}),n=e.ContentLength,delete e.ContentLength,!e.Headers&&(e.Headers={}),m.each(e.Headers,function(t,n){"content-length"===n.toLowerCase()&&delete e.Headers[n]}),function(){for(var t=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],r=1048576,o=0;o<t.length&&!(n/(r=1024*t[o]*1024)<=i.options.MaxPartNumber);o++);e.ChunkSize=e.SliceSize=g=Math.max(g,r)}(),0===n?(e.Body="",e.ContentLength=0,e.SkipTask=!0,i.putObject(e,function(e,n){if(e)return t(e);t(null,n)})):c.emit("get_file_size_finish")},abortUploadTask:function(e,t){var n=e.Bucket,r=e.Region,i=e.Key,a=e.UploadId,c=e.Level||"task",s=e.AsyncLimit,u=this,d=new f;if(d.on("error",function(e){return t(e)}),d.on("get_abort_array",function(o){l.call(u,{Bucket:n,Region:r,Key:i,Headers:e.Headers,AsyncLimit:s,AbortArray:o},function(e,n){if(e)return t(e);t(null,n)})}),"bucket"===c)o.call(u,{Bucket:n,Region:r},function(e,n){if(e)return t(e);d.emit("get_abort_array",n.UploadList||[])});else if("file"===c){if(!i)return t({error:"abort_upload_task_no_key"});o.call(u,{Bucket:n,Region:r,Key:i},function(e,n){if(e)return t(e);d.emit("get_abort_array",n.UploadList||[])})}else{if("task"!==c)return t({error:"abort_unknown_level"});if(!a)return t({error:"abort_upload_task_no_id"});if(!i)return t({error:"abort_upload_task_no_key"});d.emit("get_abort_array",[{Key:i,UploadId:a}])}},uploadFiles:function(e,t){var n=void 0===e.SliceSize?this.options.SliceSize:e.SliceSize,r=0,o=0,i=m.throttleOnProgress.call(this,o,e.onProgress),a=e.files.length,c=e.onFileFinish,s=Array(a),l=function(e,n,r){i(null,!0),c&&c(e,n,r),s[r.Index]={options:r,error:e,data:n},--a<=0&&t&&t(null,{files:s})},u=[];m.each(e.files,function(e,t){!function(){var a=e.Body,c=a.size||a.length||0,s={Index:t,TaskId:""};r+=c,m.each(e,function(e,t){"object"!=("undefined"===typeof e?"undefined":_typeof(e))&&"function"!=typeof e&&(s[t]=e)});var d=e.onTaskReady;e.onTaskReady=function(e){s.TaskId=e,d&&d(e)};var p=0,f=e.onProgress;e.onProgress=function(e){o=o-p+e.loaded,p=e.loaded,f&&f(e),i({loaded:o,total:r})};var h=e.onFileFinish,v=c>=n?"sliceUploadFile":"putObject";u.push({api:v,params:e,callback:function(e,t){h&&h(e,t),l&&l(e,t,s)}})}()}),this._addTasks(u)},sliceCopyFile:function(e,t){var n=new f,r=this,o=e.Bucket,i=e.Region,a=e.Key,c=e.CopySource,s=c.match(/^([^.]+-\d+)\.cos(v6)?\.([^.]+)\.[^/]+\/(.+)$/);if(s){var l=s[1],d=s[3],h=decodeURIComponent(s[4]),v=void 0===e.CopySliceSize?r.options.CopySliceSize:e.CopySliceSize;v=Math.max(0,v);var g,y,b=e.CopyChunkSize||this.options.CopyChunkSize,w=this.options.CopyChunkParallelLimit,_=0;n.on("copy_slice_complete",function(e){r.multipartComplete({Bucket:o,Region:i,Key:a,UploadId:e.UploadId,Parts:e.PartList},function(e,n){if(e)return y(null,!0),t(e);y({loaded:g,total:g},!0),t(null,n)})}),n.on("get_copy_data_finish",function(e){p.eachLimit(e.PartList,w,function(t,n){var s=t.PartNumber,l=t.CopySourceRange,d=t.end-t.start,p=0;u.call(r,{Bucket:o,Region:i,Key:a,CopySource:c,UploadId:e.UploadId,PartNumber:s,CopySourceRange:l,onProgress:function(e){_+=e.loaded-p,p=e.loaded,y({loaded:_,total:g})}},function(e,r){if(e)return n(e);y({loaded:_,total:g}),_+=d-p,t.ETag=r.ETag,n(e||null,r)})},function(r){if(r)return y(null,!0),t(r);n.emit("copy_slice_complete",e)})}),n.on("get_file_size_finish",function(c){var s;if(function(){for(var t=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],n=1048576,o=0;o<t.length&&!(g/(n=1024*t[o]*1024)<=r.options.MaxPartNumber);o++);e.ChunkSize=b=Math.max(b,n);for(var i=Math.ceil(g/b),a=[],c=1;c<=i;c++){var s=(c-1)*b,l=c*b<g?c*b-1:g-1,u={PartNumber:c,start:s,end:l,CopySourceRange:"bytes="+s+"-"+l};a.push(u)}e.PartList=a}(),(s="Replaced"===e.Headers["x-cos-metadata-directive"]?e.Headers:c)["x-cos-storage-class"]=e.Headers["x-cos-storage-class"]||c["x-cos-storage-class"],s=m.clearKey(s),"ARCHIVE"===c["x-cos-storage-class"]){var l=c["x-cos-restore"];if(!l||'ongoing-request="true"'===l)return void t({error:"Unrestored archive object is not allowed to be copied"})}delete s["x-cos-copy-source"],delete s["x-cos-metadata-directive"],delete s["x-cos-copy-source-If-Modified-Since"],delete s["x-cos-copy-source-If-Unmodified-Since"],delete s["x-cos-copy-source-If-Match"],delete s["x-cos-copy-source-If-None-Match"],r.multipartInit({Bucket:o,Region:i,Key:a,Headers:s},function(r,o){if(r)return t(r);e.UploadId=o.UploadId,n.emit("get_copy_data_finish",e)})}),r.headObject({Bucket:l,Region:d,Key:h},function(o,i){if(o)t(o.statusCode&&404===o.statusCode?{ErrorStatus:h+" Not Exist"}:o);else if(void 0!==(g=e.FileSize=i.headers["content-length"])&&g)if(y=m.throttleOnProgress.call(r,g,e.onProgress),g<=v)e.Headers["x-cos-metadata-directive"]||(e.Headers["x-cos-metadata-directive"]="Copy"),r.putObjectCopy(e,function(e,n){if(e)return y(null,!0),t(e);y({loaded:g,total:g},!0),t(e,n)});else{var a=i.headers,c={"Cache-Control":a["cache-control"],"Content-Disposition":a["content-disposition"],"Content-Encoding":a["content-encoding"],"Content-Type":a["content-type"],Expires:a.expires,"x-cos-storage-class":a["x-cos-storage-class"]};m.each(a,function(e,t){0===t.indexOf("x-cos-meta-")&&t.length>"x-cos-meta-".length&&(c[t]=e)}),n.emit("get_file_size_finish",c)}else t({error:'get Content-Length error, please add "Content-Length" to CORS ExposeHeader setting.'})})}else t({error:"CopySource format error"})}};e.exports.init=function(e,t){t.transferToTaskMethod(h,"sliceUploadFile"),m.each(h,function(t,n){e.prototype[n]=m.apiWrapper(n,t)})}},function(e,t){var n={eachLimit:function(e,t,n,r){if(r=r||function(){},!e.length||t<=0)return r();var o=0,i=0,a=0;!function c(){if(o>=e.length)return r();for(;a<t&&i<e.length;)a+=1,n(e[(i+=1)-1],function(t){t?(r(t),r=function(){}):(a-=1,(o+=1)>=e.length?r():c())})}()},retry:function(e,t,n){e<1?n():function r(o){t(function(t,i){t&&o<e?r(o+1):n(t,i)})}(1)}};e.exports=n},function(e,t,n){"use strict";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new o(n,r||e,i),c=l?l+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function c(){this._events=new r,this._eventsCount=0}var s=Object.prototype.hasOwnProperty,l="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(l=!1)),c.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)s.call(e,t)&&n.push(l?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},c.prototype.listeners=function(e){var t=l?l+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,i=new Array(o);r<o;r++)i[r]=n[r].fn;return i},c.prototype.listenerCount=function(e){var t=l?l+e:e,n=this._events[t];return n?n.fn?1:n.length:0},c.prototype.emit=function(e,t,n,r,o,i){var a=l?l+e:e;if(!this._events[a])return!1;var c,s,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,r),!0;case 5:return u.fn.call(u.context,t,n,r,o),!0;case 6:return u.fn.call(u.context,t,n,r,o,i),!0}for(s=1,c=new Array(d-1);s<d;s++)c[s-1]=arguments[s];u.fn.apply(u.context,c)}else{var p,f=u.length;for(s=0;s<f;s++)switch(u[s].once&&this.removeListener(e,u[s].fn,void 0,!0),d){case 1:u[s].fn.call(u[s].context);break;case 2:u[s].fn.call(u[s].context,t);break;case 3:u[s].fn.call(u[s].context,t,n);break;case 4:u[s].fn.call(u[s].context,t,n,r);break;default:if(!c)for(p=1,c=new Array(d-1);p<d;p++)c[p-1]=arguments[p];u[s].fn.apply(u[s].context,c)}}return!0},c.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},c.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},c.prototype.removeListener=function(e,t,n,r){var o=l?l+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var i=this._events[o];if(i.fn)i.fn!==t||r&&!i.once||n&&i.context!==n||a(this,o);else{for(var c=0,s=[],u=i.length;c<u;c++)(i[c].fn!==t||r&&!i[c].once||n&&i[c].context!==n)&&s.push(i[c]);s.length?this._events[o]=1===s.length?s[0]:s:a(this,o)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=l?l+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=l,c.EventEmitter=c,e.exports=c},function(e,t,n){e.exports=n(25)},function(e,t,n){"use strict";function r(e){var t=new a(e),n=i(a.prototype.request,t);return o.extend(n,a.prototype,t),o.extend(n,t),n}var o=n(26),i=n(27),a=n(28),c=n(46),s=r(n(34));s.Axios=a,s.create=function(e){return r(c(s.defaults,e))},s.Cancel=n(47),s.CancelToken=n(48),s.isCancel=n(33),s.all=function(e){return Promise.all(e)},s.spread=n(49),s.isAxiosError=n(50),e.exports=s,e.exports.default=s},function(e,t,n){"use strict";function r(e){return"[object Array]"===u.call(e)}function o(e){return void 0===e}function i(e){return null!==e&&"object"==("undefined"===typeof e?"undefined":_typeof(e))}function a(e){if("[object Object]"!==u.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===u.call(e)}function s(e,t){if(null!=e)if("object"!=("undefined"===typeof e?"undefined":_typeof(e))&&(e=[e]),r(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var l=n(27),u=Object.prototype.toString;e.exports={isArray:r,isArrayBuffer:function(e){return"[object ArrayBuffer]"===u.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:i,isPlainObject:a,isUndefined:o,isDate:function(e){return"[object Date]"===u.call(e)},isFile:function(e){return"[object File]"===u.call(e)},isBlob:function(e){return"[object Blob]"===u.call(e)},isFunction:c,isStream:function(e){return i(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:s,merge:function e(){function t(t,o){a(n[o])&&a(t)?n[o]=e(n[o],t):a(t)?n[o]=e({},t):r(t)?n[o]=t.slice():n[o]=t}for(var n={},o=0,i=arguments.length;o<i;o++)s(arguments[o],t);return n},extend:function(e,t,n){return s(t,function(t,r){e[r]=n&&"function"==typeof t?l(t,n):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";function r(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var o=n(26),i=n(29),a=n(30),c=n(31),s=n(46);r.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[c,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},r.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},o.forEach(["delete","get","head","options"],function(e){r.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}}),o.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}}),e.exports=r},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=n(26);e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(o.isURLSearchParams(t))i=t.toString();else{var a=[];o.forEach(t,function(e,t){null!=e&&(o.isArray(e)?t+="[]":e=[e],o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))}))}),i=a.join("&")}if(i){var c=e.indexOf("#");-1!==c&&(e=e.slice(0,c)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},function(e,t,n){"use strict";function r(){this.handlers=[]}var o=n(26);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){o.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t,n){"use strict";function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var o=n(26),i=n(32),a=n(33),c=n(34);e.exports=function(e){return r(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),o.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||c.adapter)(e).then(function(t){return r(e),t.data=i(t.data,t.headers,e.transformResponse),t},function(t){return a(t)||(r(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var r=n(26);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";(function(t){function r(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o,i=n(26),a=n(35),c={"Content-Type":"application/x-www-form-urlencoded"},s={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(o=n(36)),o),transformRequest:[function(e,t){return a(t,"Accept"),a(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};s.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(e){s.headers[e]={}}),i.forEach(["post","put","patch"],function(e){s.headers[e]=i.merge(c)}),e.exports=s}).call(this,n(3))},function(e,t,n){"use strict";var r=n(26);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(26),o=n(37),i=n(40),a=n(29),c=n(41),s=n(44),l=n(45),u=n(38);e.exports=function(e){return new Promise(function(t,n){var d=e.data,p=e.headers;r.isFormData(d)&&delete p["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var m=e.auth.username||"",h=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";p.Authorization="Basic "+btoa(m+":"+h)}var v=c(e.baseURL,e.url);if(f.open(e.method.toUpperCase(),a(v,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in f?s(f.getAllResponseHeaders()):null,i={data:e.responseType&&"text"!==e.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:e,request:f};o(t,n,i),f=null}},f.onabort=function(){f&&(n(u("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){n(u("Network Error",e,null,f)),f=null},f.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(u(t,e,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var g=(e.withCredentials||l(v))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;g&&(p[e.xsrfHeaderName]=g)}if("setRequestHeader"in f&&r.forEach(p,function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete p[t]:f.setRequestHeader(t,e)}),r.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),e.responseType)try{f.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){f&&(f.abort(),n(e),f=null)}),d||(d=null),f.send(d)})}},function(e,t,n){"use strict";var r=n(38);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";var r=n(39);e.exports=function(e,t,n,o,i){var a=new Error(e);return r(a,t,n,o,i)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){"use strict";var r=n(26);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,i,a){var c=[];c.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&c.push("expires="+new Date(n).toGMTString()),r.isString(o)&&c.push("path="+o),r.isString(i)&&c.push("domain="+i),!0===a&&c.push("secure"),document.cookie=c.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(42),o=n(43);e.exports=function(e,t){return e&&!r(t)?o(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(26),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,a={};return e?(r.forEach(e.split("\n"),function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(a[t]&&o.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}}),a):a}},function(e,t,n){"use strict";var r=n(26);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(o.setAttribute("href",t),t=o.href),o.setAttribute("href",t),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");return t=e(window.location.href),function(n){var o=r.isString(n)?e(n):n;return o.protocol===t.protocol&&o.host===t.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(26);e.exports=function(e,t){function n(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function o(o){r.isUndefined(t[o])?r.isUndefined(e[o])||(i[o]=n(void 0,e[o])):i[o]=n(e[o],t[o])}t=t||{};var i={},a=["url","method","data"],c=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];r.forEach(a,function(e){r.isUndefined(t[e])||(i[e]=n(void 0,t[e]))}),r.forEach(c,o),r.forEach(s,function(o){r.isUndefined(t[o])?r.isUndefined(e[o])||(i[o]=n(void 0,e[o])):i[o]=n(void 0,t[o])}),r.forEach(l,function(r){r in t?i[r]=n(e[r],t[r]):r in e&&(i[r]=n(void 0,e[r]))});var u=a.concat(c).concat(s).concat(l),d=Object.keys(e).concat(Object.keys(t)).filter(function(e){return-1===u.indexOf(e)});return r.forEach(d,o),i}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new o(e),t(n.reason))})}var o=n(47);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";e.exports=function(e){return"object"==("undefined"===typeof e?"undefined":_typeof(e))&&!0===e.isAxiosError}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.HOST=void 0,function(e){e[e.UPLOAD_FAIL=1]="UPLOAD_FAIL"}(r||(r={})),function(e){e.MAIN="vod2.qcloud.com",e.BACKUP="vod2.dnsv1.com"}(t.HOST||(t.HOST={})),t.default={isFile:function(e){return"[object File]"==Object.prototype.toString.call(e)},isFunction:function(e){return"function"==typeof e},isString:function(e){return"string"==typeof e},noop:function(){},delay:function(e){return new Promise(function(t){setTimeout(function(){t()},e)})},getUnix:function(){return Math.floor(Date.now()/1e3)},isTest:!1,isDev:!1,CLIENT_ERROR_CODE:r}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.VodReporter=t.VodReportEvent=void 0;var o,i,a=n(1),c=n(53),s=n(51);!function(e){e.report_apply="report_apply",e.report_cos_upload="report_cos_upload",e.report_commit="report_commit",e.report_done="report_done"}(o=t.VodReportEvent||(t.VodReportEvent={})),function(e){e[e.apply=10001]="apply",e[e.cos_upload=20001]="cos_upload",e[e.commit=10002]="commit",e[e.done=40001]="done"}(i||(i={}));var l=function(){function e(e,t){this.baseReportData={version:c.version,platform:3e3,device:navigator.userAgent},this.reportUrl="https://vodreport.qcloud.com/ugcupload_new",this.uploader=e,this.options=t,this.init()}return e.prototype.init=function(){this.uploader.on(o.report_apply,this.onApply.bind(this)),this.uploader.on(o.report_cos_upload,this.onCosUpload.bind(this)),this.uploader.on(o.report_commit,this.onCommit.bind(this)),this.uploader.on(o.report_done,this.onDone.bind(this))},e.prototype.onApply=function(e){try{var t=this.uploader;if(!t.videoFile)return;Object.assign(this.baseReportData,{appId:t.appId,fileSize:t.videoFile.size,fileName:t.videoFile.name,fileType:t.videoFile.type,vodSessionKey:t.vodSessionKey,reqKey:t.reqKey,reportId:t.reportId});var n={reqType:i.apply,errCode:0,vodErrCode:0,errMsg:"",reqTimeCost:Number(new Date)-Number(e.requestStartTime),reqTime:Number(e.requestStartTime)};e.err&&(n.errCode=1,n.vodErrCode=e.err.code,n.errMsg=e.err.message),e.data&&(this.baseReportData.cosRegion=e.data.storageRegionV5),this.report(n)}catch(e){if(console.error("onApply",e),s.default.isTest)throw e}},e.prototype.onCosUpload=function(e){try{var t={reqType:i.cos_upload,errCode:0,cosErrCode:"",errMsg:"",reqTimeCost:Number(new Date)-Number(e.requestStartTime),reqTime:Number(e.requestStartTime)};e.err&&(t.errCode=1,t.cosErrCode=e.err.error?e.err.error.Code:e.err,e.err&&"error"===e.err.error&&(t.cosErrCode="cors error"),t.errMsg=JSON.stringify(e.err)),this.report(t)}catch(e){if(console.error("onCosUpload",e),s.default.isTest)throw e}},e.prototype.onCommit=function(e){try{var t={reqType:i.commit,errCode:0,vodErrCode:0,errMsg:"",reqTimeCost:Number(new Date)-Number(e.requestStartTime),reqTime:Number(e.requestStartTime)};e.err&&(t.errCode=1,t.vodErrCode=e.err.code,t.errMsg=e.err.message),e.data&&(this.baseReportData.fileId=e.data.fileId),this.report(t)}catch(e){if(console.error("onCommit",e),s.default.isTest)throw e}},e.prototype.onDone=function(e){try{var t={reqType:i.done,errCode:e.err&&e.err.code,reqTimeCost:Number(new Date)-Number(e.requestStartTime),reqTime:Number(e.requestStartTime)};this.report(t)}catch(e){if(console.error("onDone",e),s.default.isTest)throw e}},e.prototype.report=function(e){e=r(r({},this.baseReportData),e),this.send(e)},e.prototype.send=function(e){s.default.isDev||s.default.isTest?console.log("send reportData",e):a.vodAxios.post(this.reportUrl,e)},e}();t.VodReporter=l},function(e){e.exports=JSON.parse('{"name":"vod-js-sdk-v6","version":"1.4.12","description":"tencent cloud vod js sdk v6","main":"lib/src/tc_vod.js","unpkg":"dist/vod-js-sdk-v6.js","typings":"lib/src/tc_vod.d.ts","scripts":{"test":"cross-env NODE_ENV=test mocha -r espower-typescript/guess -r jsdom-global/register -r test/env test/**/*.test.ts","cover":"cross-env NODE_ENV=test nyc mocha -r espower-typescript/guess -r jsdom-global/register -r test/env test/**/*.test.ts","dev":"webpack --config webpack.dev.config.js --watch","dist":"webpack --config webpack.config.js","build":"npm run test && npm run dist && npm run compile","compile":"tsc -p tsconfig.json","prepublish":"npm run build","lint":"tsc --noEmit && eslint \'src/**/*.{js,ts,tsx}\' --quiet --fix"},"repository":{"type":"git","url":"git+https://github.com/tencentyun/vod-js-sdk-v6.git"},"keywords":["tencentcloud","sdk","vod"],"author":"alsotang <alsotang@gmail.com>","license":"MIT","bugs":{"url":"https://github.com/tencentyun/vod-js-sdk-v6/issues"},"homepage":"https://github.com/tencentyun/vod-js-sdk-v6#readme","dependencies":{"axios":"^0.21.1","cos-js-sdk-v5":"0.5.27","eventemitter3":"^4.0.7","js-sha1":"^0.6.0","uuid":"^3.3.2"},"devDependencies":{"@types/mocha":"^5.2.5","@types/semver":"^6.0.0","@types/sha1":"^1.1.1","@types/uuid":"^3.4.4","@typescript-eslint/eslint-plugin":"^1.9.0","@typescript-eslint/parser":"^1.9.0","cross-env":"^6.0.3","eslint":"^5.16.0","eslint-config-prettier":"^4.3.0","eslint-plugin-prettier":"^3.1.0","espower-typescript":"^9.0.1","jsdom":"^13.1.0","jsdom-global":"^3.0.2","mm":"^2.4.1","mocha":"^5.2.0","nyc":"^13.1.0","power-assert":"^1.6.1","prettier":"^1.17.1","semver":"^6.1.1","ts-loader":"^5.3.3","typescript":"^3.5.3","webpack":"^4.28.1","webpack-cli":"^3.2.1"},"nyc":{"extension":[".ts",".tsx"],"include":["src"],"reporter":["html"],"all":true}}')},function(e,t,n){var r=n(55),o=n(56);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var c=0;c<16;++c)t[i+c]=a[c];return t||o(a)}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,o=n;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}}])})}).call(exports,__webpack_require__(29)(module))},function(module,__webpack_exports__,__webpack_require__){"use strict";function _taggedTemplateLiteral(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__),__WEBPACK_IMPORTED_MODULE_1__emotion_react__=__webpack_require__(0),__WEBPACK_IMPORTED_MODULE_2__share_post_upload__=__webpack_require__(23),__WEBPACK_IMPORTED_MODULE_3__COSSidebar__=__webpack_require__(86),__WEBPACK_IMPORTED_MODULE_4__video_COSVideos__=__webpack_require__(87),__WEBPACK_IMPORTED_MODULE_5__COSHeader__=__webpack_require__(89),__WEBPACK_IMPORTED_MODULE_6__Footer__=__webpack_require__(28),__WEBPACK_IMPORTED_MODULE_7__upload_COSUploads__=__webpack_require__(90),__WEBPACK_IMPORTED_MODULE_8__MediaPopupTemplate__=__webpack_require__(30),__WEBPACK_IMPORTED_MODULE_9__cos_cos_auth__=__webpack_require__(91),__WEBPACK_IMPORTED_MODULE_9__cos_cos_auth___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9__cos_cos_auth__),_this=this,_slicedToArray=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_templateObject=_taggedTemplateLiteral(["\n          overflow: auto;\n          display: flex;\n          flex-direction: column;\n        "],["\n          overflow: auto;\n          display: flex;\n          flex-direction: column;\n        "]),_templateObject2=_taggedTemplateLiteral(["\n            padding: 12px 24px;\n            overflow: auto;\n            display: flex;\n            flex-direction: column;\n          "],["\n            padding: 12px 24px;\n            overflow: auto;\n            display: flex;\n            flex-direction: column;\n          "]),_templateObject3=_taggedTemplateLiteral(["\n                    margin: 0 0 20px 0;\n                  "],["\n                    margin: 0 0 20px 0;\n                  "]),_templateObject4=_taggedTemplateLiteral(["\n              display: flex;\n              align-items: stretch;\n            "],["\n              display: flex;\n              align-items: stretch;\n            "]),__=wp.i18n.__,_wp$components=wp.components,Button=_wp$components.Button,DropZone=_wp$components.DropZone,DropZoneProvider=_wp$components.DropZoneProvider,Notice=_wp$components.Notice,_wp$element=wp.element,useState=_wp$element.useState,useEffect=_wp$element.useEffect,Fragment=_wp$element.Fragment,_wp$data=wp.data,dispatch=_wp$data.dispatch,useSelect=_wp$data.useSelect;__webpack_exports__.a=function(_ref){function onChooseOss(e){e.videoId=e.key,onChoose(e)}var onClose=_ref.onClose,onChoose=_ref.onChoose,noticeOperations=_ref.noticeOperations,_useState=useState(""),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1],_useState3=useState(0),_useState4=_slicedToArray(_useState3,2),progress=_useState4[0],setProgress=_useState4[1],curBucket=useSelect(function(e){return e("mine-cloudvod/vod").ui("curBucket")}),uploads=useSelect(function(e){return e("mine-cloudvod/vod").uploads()}),errors=useSelect(function(e){return e("mine-cloudvod/vod").errors()});useEffect(function(){dispatch("mine-cloudvod/vod").setVideosFetched(!1),dispatch("mine-cloudvod/vod").setVideos([]),dispatch("mine-cloudvod/vod").setBucketsFetched(!1),dispatch("mine-cloudvod/vod").setBuckets([])},[]);var buckets=useSelect(function(e){return e("mine-cloudvod/vod").buckets()}),bucketsFetched=useSelect(function(e){return e("mine-cloudvod/vod").bucketsFetched()});useEffect(function(){bucketsFetched||bucketsfetch()},[bucketsFetched]);var bucketsfetch=function(){var e=_asyncToGenerator(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sync:!1},r=n.sync;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wp.apiFetch({path:wp.url.addQueryArgs("mine-cloudvod/v1/qcloud/cos/buckets")});case 3:t=e.sent,dispatch("mine-cloudvod/vod").setBuckets(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r||dispatch("mine-cloudvod/vod").addError(e.t0.message);case 10:return e.prev=10,dispatch("mine-cloudvod/vod").setBucketsFetched(!0),e.finish(10);case 13:case"end":return e.stop()}},e,_this,[[0,7,10,13]])}));return function(){return e.apply(this,arguments)}}(),uploadFile=function(){var _ref4=_asyncToGenerator(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee2(files){var xmlhttp,formData,path,serverUrl,postData,credentials;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:dispatch("mine-cloudvod/vod").addUploads(files),xmlhttp=null,window.XMLHttpRequest?xmlhttp=new XMLHttpRequest:window.ActiveXObject&&(xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")),formData=[],path="",null!=xmlhttp&&(serverUrl=wp.url.addQueryArgs("/wp-json/mine-cloudvod/v1/qcloud/cos/uploadauth",{bucket:curBucket}),xmlhttp.open("GET",serverUrl,!1),xmlhttp.send(null),postData=xmlhttp.responseText,postData=eval("("+postData+")"),credentials=postData.credentials,path=postData.host,formData.push({name:"success_action_status",value:"200"}),formData.push({name:"key",value:postData.dir+files[0].name}),formData.push({name:"Signature",value:__WEBPACK_IMPORTED_MODULE_9__cos_cos_auth___default()({SecretId:credentials.tmpSecretId,SecretKey:credentials.tmpSecretKey,Method:"POST",Pathname:"/"})}),formData.push({name:"x-cos-security-token",value:credentials.sessionToken})),Object(__WEBPACK_IMPORTED_MODULE_2__share_post_upload__.a)({file:files[0],path:path,onProgress:function(e){setProgress(e)},onComplete:function(e){dispatch("mine-cloudvod/vod").removeUpload(e),dispatch("mine-cloudvod/vod").setVideosFetched(!1)},onError:function(e){dispatch("mine-cloudvod/vod").addError(e.message)},formData:formData});case 7:case"end":return _context2.stop()}},_callee2,_this)}));return function(e){return _ref4.apply(this,arguments)}}(),onCloseConfirm=function(){if(uploads.length){return void(confirm("Discard your uploads?")&&(onClose(),dispatch("mine-cloudvod/vod").setUploads([])))}onClose()},title=__("Select or Upload Tencent COS Video","mine-cloudvod"),mainContent=function(){return Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.b)(DropZoneProvider,{css:Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.a)(_templateObject)},Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.b)("div",{css:Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.a)(_templateObject2)},!!errors.length&&errors.map(function(e){return Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.b)(Notice,{css:Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.a)(_templateObject3),status:"error",onRemove:function(){return dispatch("mine-cloudvod/vod").removeError(e)}},e)}),Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.b)("div",{css:Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.a)(_templateObject4)},Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.b)(__WEBPACK_IMPORTED_MODULE_4__video_COSVideos__.a,{bucketsFetched:bucketsFetched,curBucket:curBucket})),Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.b)(DropZone,{label:"Drop files",onFilesDrop:uploadFile})))},header=Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.b)(__WEBPACK_IMPORTED_MODULE_5__COSHeader__.a,{onUpload:uploadFile,buckets:buckets,afterUpload:Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.b)(__WEBPACK_IMPORTED_MODULE_7__upload_COSUploads__.a,{uploads:uploads,error:error,progress:progress})}),sidebar=Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.b)(__WEBPACK_IMPORTED_MODULE_3__COSSidebar__.a,null),footer=Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.b)(__WEBPACK_IMPORTED_MODULE_6__Footer__.a,{onChoose:onChooseOss});return Object(__WEBPACK_IMPORTED_MODULE_1__emotion_react__.b)(__WEBPACK_IMPORTED_MODULE_8__MediaPopupTemplate__.a,{title:title,header:header,mainContent:mainContent(),onClose:onCloseConfirm,footer:footer,sidebar:sidebar})}},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}var i=n(1),a=n.n(i),c=n(2),s=n(0),l=this,u=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=r(["\n    margin-top: 5px;\n  "],["\n    margin-top: 5px;\n  "]),p=r(["\n            position: relative;\n          "],["\n            position: relative;\n          "]),f=r(["\n              ","\n              top: 8px;\n              right: 8px;\n              font-size: 11px;\n              color: #ffffff;\n              padding: 2px 10px;\n              border-radius: 9999px;\n            "],["\n              ","\n              top: 8px;\n              right: 8px;\n              font-size: 11px;\n              color: #ffffff;\n              padding: 2px 10px;\n              border-radius: 9999px;\n            "]),__=wp.i18n.__,m=wp.components,h=m.Button,v=m.BaseControl,g=m.Disabled,y=m.Card,b=m.CardBody,w=wp.element,_=w.useState,x=(w.useContext,w.useEffect),O=wp.data,C=O.dispatch,E=O.useSelect;t.a=function(){var e=_(!1),t=u(e,2),n=t[0],r=t[1],i=_(!1),m=u(i,2),w=m[0],O=m[1],k=_(null),j=u(k,2),S=j[0],T=j[1],A=E(function(e){return e("mine-cloudvod/vod").ui("selectedId")}),R=E(function(e){return e("mine-cloudvod/vod").videos()});x(function(){T(A?R.find(function(e){return e.Vid===A}):null)},[R,A]);var P=function(){var e=o(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wp.apiFetch({path:"mine-cloudvod/v1/qcloud/cos/delvideo",method:"DELETE",data:{object:S.Key,bucket:S.bucket}});case 2:C("mine-cloudvod/vod").removeVideo(S),C("mine-cloudvod/vod").setUI("selectedId",null),O(!1),r(!1);case 6:case"end":return e.stop()}},e,l)}));return function(){return e.apply(this,arguments)}}(),D=Object(s.a)(d);if(!S)return"";var I=function(e){return e.coverURL};return S&&Object(s.b)("div",{className:"mine-cloudvod__media-modal-sidebar-content"},Object(s.b)(v,{css:Object(s.a)(p)},Object(s.b)(g,{key:S.videoId},Object(c.e)(S)&&I(S)&&Object(s.b)("img",{src:I(S),css:{maxWidth:"100%"}})),Object(s.b)(h,{isSmall:!0,isPrimary:!0,isBusy:!Object(c.e)(S),css:Object(s.a)(f,Object(c.e)(S)?"position: absolute;":"")},Object(c.d)(S))),Object(s.b)(v,null,Object(s.b)(v.VisualLabel,null,__("Name","mine-cloudvod")),Object(s.b)("h3",{css:D},S.title)),Object(s.b)(v,null,Object(s.b)(v.VisualLabel,null,__("Size","mine-cloudvod")),Object(s.b)("h3",{css:D},Object(c.a)(S.Size||0))),Object(s.b)(v,null,Object(s.b)(v.VisualLabel,null,__("Storage Class","mine-cloudvod")),Object(s.b)("h3",{css:D},S.StorageClass)),Object(s.b)(v,null,Object(s.b)(v.VisualLabel,null,__("Created","mine-cloudvod")),Object(s.b)("h3",{css:D},Object(c.f)(S.creationTime))),Object(s.b)(v,null,n?Object(s.b)(y,null,Object(s.b)(b,null,Object(s.b)("p",null,Object(s.b)("strong",null,__("Are you sure?","mine-cloudvod"))),Object(s.b)("p",null,__("Are you sure you want to delete this video?","mine-cloudvod")),Object(s.b)(h,{isDestructive:!0,disabled:w,isBusy:w,onClick:function(e){e.preventDefault(),P(),O(!0)}},__("Yes","mine-cloudvod")),Object(s.b)(h,{onClick:function(){return r(!1)}},__("Cancel","mine-cloudvod")))):Object(s.b)(h,{isDestructive:!0,onClick:function(){r(!n)}},__("Delete video","mine-cloudvod"))))}},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),c=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}var o=n(1),i=n.n(o),a=n(0),c=n(88),s=n(27),l=this,u=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n          height: 100%;\n          text-align: center;\n        "],["\n          height: 100%;\n          text-align: center;\n        "]),__=wp.i18n.__,p=wp.element,f=p.useState,m=p.useEffect,h=p.Fragment,v=wp.components,g=v.Flex,y=v.FormFileUpload,b=v.Notice,w=wp.data,_=w.dispatch,x=w.useSelect;t.a=function(e){var t=e.bucketsFetched,n=e.curBucket,o=f(!1),p=u(o,2),v=p[0],w=p[1],O=f(""),C=u(O,2),E=C[0],k=C[1],j=x(function(e){return e("mine-cloudvod/vod").videosFetched()}),S=x(function(e){return e("mine-cloudvod/vod").videos()}),T=x(function(e){return e("mine-cloudvod/vod").uploads()});m(function(){!j&&t&&A()},[j,t]);var A=function(){var e=r(i.a.mark(function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sync:!1},o=r.sync;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=n){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,wp.apiFetch({path:wp.url.addQueryArgs("mine-cloudvod/v1/qcloud/cos/videos",{bucket:n})});case 5:t=e.sent,_("mine-cloudvod/vod").setVideos(t.items),k(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),o||_("mine-cloudvod/vod").addError(e.t0.message);case 13:return e.prev=13,_("mine-cloudvod/vod").setVideosFetched(!0),e.finish(13);case 16:case"end":return e.stop()}},e,l,[[2,10,13,16]])}));return function(){return e.apply(this,arguments)}}();return E?Object(a.b)(b,{status:"warning",isDismissible:!1},Object(a.b)("div",{css:{display:"flex",alignItems:"center"}},Object(a.b)(s.a,{css:{flex:1}}),E)):j?Object(a.b)(h,null,S&&S.length?Object(a.b)("div",null,Object(a.b)("h2",null,__("Videos","mine-cloudvod")),S.map(function(e){return Object(a.b)(c.a,{key:e.Key,video:e,onClick:function(){e.Vid=e.Key,e.title=e.Key,e.Status="Normal",e.creationTime=e.LastModified,_("mine-cloudvod/vod").setUI("selectedId",e.Vid),w(v.Key===e.Key?{}:e)},isSelected:v.Key===e.Key})})):function(){return Object(a.b)(g,{align:"center",justify:"center",css:Object(a.a)(d)},Object(a.b)("div",null,Object(a.b)("h2",null,__("Drop video files here to upload","mine-cloudvod")),Object(a.b)("p",null,__("or browse for a video","mine-cloudvod")),Object(a.b)(y,{isSecondary:!0,accept:"video/mp4,video/x-m4v,video/*",onChange:function(e){if(e.target.files){for(var t=0;t<e.target.files.length;t++)e.target.files[t].id=t+T.length;_("mine-cloudvod/vod").addUploads(e.target.files),jQuery(e.target).val(null)}}},__("Upload New Video","mine-cloudvod"))))}()):Object(a.b)(s.a,{css:{flex:1}})}},function(e,t,n){"use strict";var r=n(0),o=n(2),i=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=wp.components,c=(a.Icon,a.Button,wp.element),s=c.useEffect,l=c.useState,u=wp.data,d=u.useSelect;u.dispatch;t.a=function(e){var t=e.video,n=e.onClick,a=e.isSelected,c=l(),u=i(c,2),p=(u[0],u[1]),f=d(function(e){return e("mine-cloudvod/vod").ui("selectedId")});s(function(){p(f?f===t.Key:null)},[f]);var m=a?"is-selected":"";return Object(r.b)("div",{className:"mcv-media-list-item "+m,onClick:n},Object(r.b)("div",{className:"presto-player__media-list-item-icon"},Object(r.b)("svg",{class:"mcv-block-icon",width:"28px",height:"28px",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",fill:"none"},Object(r.b)("path",{d:"M917.792 229.088c-22.208-30.304-53.184-65.696-87.168-99.712s-69.408-64.96-99.712-87.168C679.328 4.384 654.304 0 640 0H144A80.096 80.096 0 0 0 64 80v864C64 988.096 99.872 1024 144 1024h736c44.096 0 80-35.904 80-80V320c0-14.336-4.384-39.36-42.208-90.912z m-132.416-54.464A874.688 874.688 0 0 1 857.952 256H704V102.048a874.688 874.688 0 0 1 81.376 72.576zM896 944c0 8.672-7.328 16-16 16h-736a16.224 16.224 0 0 1-16-16v-864c0-8.672 7.328-16 16-16H640v224a32 32 0 0 0 32 32h224v624zM256 512h320v320H256V512zM576 640l192-128v320l-192-128z"}))),Object(r.b)("div",{className:"presto-player__media-list-item-title"},decodeURI(t.Key)),Object(r.b)("div",{className:"presto-player__media-list-item-size"},Object(o.a)(t.Size)),Object(r.b)("div",{className:"presto-player__media-list-item-modified"},Object(o.f)(t.LastModified)))}},function(e,t,n){"use strict";var r=n(0),o=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),__=wp.i18n.__,i=wp.components,a=i.Flex,c=i.FlexBlock,s=i.FlexItem,l=i.SelectControl,u=i.FormFileUpload,d=wp.data,p=d.dispatch,f=d.useSelect,m=wp.element,h=m.useState,v=m.useEffect;m.Fragment;t.a=function(e){var t=e.onUpload,n=e.afterUpload,i=e.buckets,d=f(function(e){return e("mine-cloudvod/vod").ui("curBucket")}),m=h(!1),g=o(m,2),y=g[0],b=g[1],w=i.map(function(e){return 1==e[1]&&p("mine-cloudvod/vod").setUI("curBucket",e[0]),{label:e[0],value:e[0]}});return w.unshift({label:__("-- Select a bucket, please --","mine-cloudvod"),value:""}),v(function(){!1===y&&d&&b(d)},[d]),Object(r.b)(a,null,Object(r.b)(c,null,Object(r.b)(a,{justify:"flex-start"},Object(r.b)(u,{multiple:!1,isPrimary:!0,accept:"video/mp4,video/x-m4v,video/*",onChange:function(e){e.target.files&&(t(e.target.files),jQuery(e.target).val(null))}},__("Upload Videos","mine-cloudvod")),n)),Object(r.b)(s,null,Object(r.b)(a,null,Object(r.b)("div",{className:"mcv-select-bucket"},Object(r.b)(l,{value:y,options:w,onChange:function(e){""!=e&&(p("mine-cloudvod/vod").setUI("curBucket",e),p("mine-cloudvod/vod").setVideosFetched(!1)),p("mine-cloudvod/vod").setVideos([]),b(e)}})))))}},function(e,t,n){"use strict";function r(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=n(0),i=n(7),a=r(["\n        overflow: auto;\n        display: flex;\n        align-items: center;\n        position: relative;\n      "],["\n        overflow: auto;\n        display: flex;\n        align-items: center;\n        position: relative;\n      "]),c=r(["\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                animation: components-button__busy-animation 2500ms infinite linear;\n                opacity: 1;\n                padding: 6px 12px;\n                border-radius: 99999px;\n                border: 1px solid #dddddd;\n                background-size: 100px 100%;\n                background-image: linear-gradient(\n                  -45deg,\n                  #ffffff 33%,\n                  #f3f3f3 33%,\n                  #f3f3f3 70%,\n                  #ffffff 70%\n                );\n              "],["\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                animation: components-button__busy-animation 2500ms infinite linear;\n                opacity: 1;\n                padding: 6px 12px;\n                border-radius: 99999px;\n                border: 1px solid #dddddd;\n                background-size: 100px 100%;\n                background-image: linear-gradient(\n                  -45deg,\n                  #ffffff 33%,\n                  #f3f3f3 33%,\n                  #f3f3f3 70%,\n                  #ffffff 70%\n                );\n              "]),s=r(["\n                  flex: 1;\n                  white-space: nowrap;\n                  overflow: hidden;\n                  max-width: 150px;\n                  text-overflow: ellipsis;\n                  font-weight: bold;\n                "],["\n                  flex: 1;\n                  white-space: nowrap;\n                  overflow: hidden;\n                  max-width: 150px;\n                  text-overflow: ellipsis;\n                  font-weight: bold;\n                "]),l=r(["\n                  display: flex;\n                  align-items: center;\n                "],["\n                  display: flex;\n                  align-items: center;\n                "]),u=r(["\n                    width: 100px;\n                    height: 3px;\n                    margin: 0 5px;\n                    background: #e3e3e3;\n                    border-radius: 9999px;\n                    overflow: hidden;\n                  "],["\n                    width: 100px;\n                    height: 3px;\n                    margin: 0 5px;\n                    background: #e3e3e3;\n                    border-radius: 9999px;\n                    overflow: hidden;\n                  "]),d=wp.element,p=(d.useEffect,d.useRef,d.useMemo,d.useState,wp.data);p.dispatch,p.useSelect;t.a=function(e){var t=e.uploads,n=e.error,r=e.progress;return t.length?Object(o.b)("div",{css:Object(o.a)(a)},t.length&&t.map(function(e){return Object(o.b)("div",{css:Object(o.a)(c)},Object(o.b)("div",{css:Object(o.a)(s)},!!n&&n,e.name,"..."),Object(o.b)("div",{css:Object(o.a)(l)},Object(o.b)(i.a,{css:Object(o.a)(u),progress:r})))})):""}},function(e,t,n){(function(e){var t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){"use strict";function n(e){return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}var r=r||function(e,t){var n={},r=n.lib={},o=function(){},i=r.Base={extend:function(e){o.prototype=this;var t=new o;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=r.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var o=0;o<e;o++)t[r+o>>>2]|=(n[o>>>2]>>>24-o%4*8&255)<<24-(r+o)%4*8;else if(65535<n.length)for(o=0;o<e;o+=4)t[r+o>>>2]=n[o>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new a.init(n,t)}}),c=n.enc={},s=c.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var o=t[r>>>2]>>>24-r%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new a.init(n,t/2)}},l=c.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new a.init(n,t)}},u=c.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},d=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,o=n.sigBytes,i=this.blockSize,c=o/(4*i),c=t?e.ceil(c):e.max((0|c)-this._minBufferSize,0);if(t=c*i,o=e.min(4*t,o),t){for(var s=0;s<t;s+=i)this._doProcessBlock(r,s);s=r.splice(0,t),n.sigBytes-=o}return new a.init(s,o)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=d.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}});var p=n.algo={};return n}(Math);!function(){var e=r,t=e.lib,n=t.WordArray,o=t.Hasher,i=[],t=e.algo.SHA1=o.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],a=n[2],c=n[3],s=n[4],l=0;80>l;l++){if(16>l)i[l]=0|e[t+l];else{var u=i[l-3]^i[l-8]^i[l-14]^i[l-16];i[l]=u<<1|u>>>31}u=(r<<5|r>>>27)+s+i[l],u=20>l?u+(1518500249+(o&a|~o&c)):40>l?u+(1859775393+(o^a^c)):60>l?u+((o&a|o&c|a&c)-1894007588):u+((o^a^c)-899497514),s=c,c=a,a=o<<30|o>>>2,o=r,r=u}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+a|0,n[3]=n[3]+c|0,n[4]=n[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=o._createHelper(t),e.HmacSHA1=o._createHmacHelper(t)}(),function(){var e=r,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,o=4*r;n.sigBytes>o&&(n=e.finalize(n)),n.clamp();for(var i=this._oKey=n.clone(),a=this._iKey=n.clone(),c=i.words,s=a.words,l=0;l<r;l++)c[l]^=1549556828,s[l]^=909522486;i.sigBytes=a.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e=r,t=e.lib,n=t.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var o=[],i=0;i<n;i+=3)for(var a=t[i>>>2]>>>24-i%4*8&255,c=t[i+1>>>2]>>>24-(i+1)%4*8&255,s=t[i+2>>>2]>>>24-(i+2)%4*8&255,l=a<<16|c<<8|s,u=0;u<4&&i+.75*u<n;u++)o.push(r.charAt(l>>>6*(3-u)&63));var d=r.charAt(64);if(d)for(;o.length%4;)o.push(d);return o.join("")},parse:function(e){var t=e.length,r=this._map,o=r.charAt(64);if(o){var i=e.indexOf(o);-1!=i&&(t=i)}for(var a=[],c=0,s=0;s<t;s++)if(s%4){var l=r.indexOf(e.charAt(s-1))<<s%4*2,u=r.indexOf(e.charAt(s))>>>6-s%4*2;a[c>>>2]|=(l|u)<<24-c%4*8,c++}return n.create(a,c)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}();var o=function(e){var t=e.Pathname||"/",n=e.Expires,o="",i="",a=e.Bucket.match(/^(.+)-(\d+)$/);a&&(o=a[1],i=a[2]);var c=parseInt(Math.random()*Math.pow(2,32)),s=parseInt(Date.now()/1e3),l=s+(void 0===n?900:1*n||0),u="/"+i+"/"+o+encodeURIComponent(t).replace(/%2F/g,"/"),d="a="+i+"&b="+o+"&k="+e.SecretId+"&e="+l+"&t="+s+"&r="+c+"&f="+u,p=r.HmacSHA1(d,e.SecretKey),f=r.enc.Utf8.parse(d);return p.concat(f).toString(r.enc.Base64)},i=function(e){if(!e.SecretId)return console.error("missing param SecretId");if(!e.SecretKey)return console.error("missing param SecretKey");if("4.0"===e.Version)return o(e);e=e||{};var t=e.SecretId,i=e.SecretKey,a=(e.Method||"get").toLowerCase(),c=e.Query||{},s=e.Headers||{},l=e.Pathname||"/",u=e.Expires,d=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t.sort(function(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),e===t?0:e>t?1:-1})},p=function(e){var t,r,o,i=[],a=d(e);for(t=0;t<a.length;t++)r=a[t],o=void 0===e[r]||null===e[r]?"":""+e[r],r=r.toLowerCase(),r=n(r),o=n(o)||"",i.push(r+"="+o);return i.join("&")},f=parseInt((new Date).getTime()/1e3)-1,m=f+(void 0===u?900:1*u||0),h=t,v=f+";"+m,g=f+";"+m,y=d(s).join(";").toLowerCase(),b=d(c).join(";").toLowerCase(),w=r.HmacSHA1(g,i).toString(),_=[a,l,p(c),p(s),""].join("\n"),x=["sha1",v,r.SHA1(_).toString(),""].join("\n");return["q-sign-algorithm=sha1","q-ak="+h,"q-sign-time="+v,"q-key-time="+g,"q-header-list="+y,"q-url-param-list="+b,"q-signature="+r.HmacSHA1(x,w).toString()].join("&")};"object"===t(e)?e.exports=i:window.CosAuth=i}()}).call(t,n(29)(e))},function(e,t,n){"use strict";var r=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},o.apply(this,arguments)},__=wp.i18n.__,i=wp.element,a=i.useEffect,c=i.useRef,s=i.useMemo,l=i.useState,u=wp.components,d=u.Spinner,p=u.Placeholder;t.a=function(e){var t=e.width,n=e.height;if(!e)throw new Error("Missing Aliplayer config");e=e.config;var o=l(!0),i=r(o,2),u=i[0],f=i[1],m=s(function(){return"tcplayer-"+Math.floor(1e6*Math.random())},[]),h=c(null);return a(function(){m&&!h.current&&(f(!0),wp.apiFetch({path:wp.url.addQueryArgs("mine-cloudvod/v1/qcloud/vod/psign",{fileId:e.fileID,appId:e.appID})}).then(function(n){f(!1),e.psign=n.psign,h.current=window.TCPlayer(m,e),jQuery("#"+m).css("width",t||"100%")}))},[m,e]),u?wp.element.createElement(p,{className:"mine-cloudvod__placeholder is-loading"},wp.element.createElement(d,null)," ",__("TCPlayer is initializing, please wait...","mine-cloudvod")):wp.element.createElement("video",{id:m,height:n||"500"})}},function(e,t,n){"use strict";var r=n(94),__=wp.i18n.__,o=wp.blocks,i=o.registerBlockType,a=(o.unregisterBlockType,wp.blockEditor),c=(a.InnerBlocks,a.useBlockProps,wp.data),s=(c.useSelect,c.dispatch,wp.components),l=(s.Button,s.Placeholder,wp.plugins);l.getPlugins,l.unregisterPlugin,wp.element.useEffect;i("mine-cloudvod/embed-video",{attributes:{video_url:{type:String},src:{type:String},type:{type:String},width:{type:"string",default:"100%"},height:{type:"string",default:"500px"},thumbnail:{type:"string"},autoplay:{type:Boolean},danmaku:{type:Boolean}},title:__("Embed Video","mine-cloudvod"),description:__("Embed video from Youku, Bilibili, iQiyi, Tencent, and other URLs that support iframe embedding.","mine-cloudvod"),category:"mine",keywords:[__("youku","mine-cloudvod"),__("bilibili","mine-cloudvod"),__("iqiyi","mine-cloudvod"),__("tencent","mine-cloudvod"),__("mine cloudvod","mine-cloudvod"),__("embed video","mine-cloudvod")],icon:wp.element.createElement("svg",function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({class:"icon",width:"28px",height:"28px",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",fill:"none"},"class","mine-block-icon"),wp.element.createElement("path",{d:"M433.792 768c-20.896 73.888-81.216 120.704-161.792 120.704-87.84 0-154.656-57.056-167.872-141.184C102.752 744 96 716.48 96 712.416V174.72C96 157.12 125.28 128 142.976 128h736.16C896.8 128 928 157.088 928 174.752V720c0 17.664-31.2 48-48.864 48H433.792z",fill:"#FFFFFF"}),wp.element.createElement("path",{d:"M672 864v-32h32v32h128v32h-128v32h-32v-32h-224v-32h224z m-192.608-128H896V160H128v409.92a208.96 208.96 0 0 0-32 39.168V160a32 32 0 0 1 32-32h768a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H474.432a207.68 207.68 0 0 0 4.96-32z m-71.616 96a176 176 0 1 1 0-224l1.824 2.24c24 30.08 38.4 68.256 38.4 109.76 0 41.504-14.4 79.68-38.4 109.76l-1.824 2.24z m-207.04-32a347.264 347.264 0 0 1-8.416-64H128.864c2.624 23.488 10.88 45.312 23.36 64h48.512z m19.648 54.464A184.32 184.32 0 0 1 210.272 832h-28.8c11.616 9.408 24.736 17.024 38.912 22.464zM415.136 736H351.68c-0.96 22.88-3.84 44.48-8.416 64h48.48c12.512-18.688 20.8-40.512 23.36-64z m-81.408 96a184.32 184.32 0 0 1-10.112 22.464c14.176-5.44 27.296-13.056 38.912-22.464h-28.8z m-23.36-32c4.736-18.56 8.192-40.288 9.28-64H224.32c1.088 23.712 4.544 45.44 9.28 64h76.704z m-65.92 32c8.8 20.16 19.008 32 27.552 32s18.752-11.84 27.584-32H244.416z m-115.584-128H192.32c0.96-22.88 3.84-44.48 8.416-64H152.256a143.168 143.168 0 0 0-23.36 64z m81.408-96a184.32 184.32 0 0 1 10.112-22.464c-14.176 5.44-27.296 13.056-38.912 22.464h28.8z m132.992 32c4.544 19.52 7.488 41.12 8.416 64h63.456a143.168 143.168 0 0 0-23.36-64h-48.512z m-19.648-54.464c3.648 6.816 7.04 14.336 10.112 22.464h28.8a143.84 143.84 0 0 0-38.912-22.464zM224.352 704H319.68a317.952 317.952 0 0 0-9.28-64H233.632a317.952 317.952 0 0 0-9.28 64z m20.064-96h55.168c-8.832-20.16-19.04-32-27.584-32s-18.752 11.84-27.584 32z",fill:"#5D6D7E"}),wp.element.createElement("path",{d:"M653.76 461.024l-180.48 128.896a16 16 0 0 1-25.28-13.024V319.104a16 16 0 0 1 25.28-13.024l180.48 128.896a16 16 0 0 1 0 26.048z",fill:"#27A2DF"})),edit:r.a})},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(95),i=n(2),a=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=wp.components,s=c.Button,l=c.Disabled,u=(c.DropdownMenu,c.Spinner),d=c.Toolbar,p=c.withNotices,f=(c.Notice,c.BaseControl,c.Placeholder),m=c.ToggleControl,h=c.PanelBody,v=c.TextControl,g=wp.blockEditor,y=g.BlockControls,b=g.InspectorControls,__=(g.BlockAlignmentToolbar,g.MediaPlaceholder,g.MediaReplaceFlow,g.MediaUpload,g.MediaUploadCheck,g.AlignmentToolbar,g.RichText,wp.i18n.__),w=wp.element,_=w.useState,x=w.Fragment;t.a=p(function(e){function t(){confirm(__("Replace this video?","mine-cloudvod"))&&p({video_url:"",src:""})}function n(e){if(e!==g){var t=Object(i.b)(e);p({video_url:e,src:t[1],type:t[0]})}}var c=e.attributes,p=e.setAttributes,g=(e.noticeOperations,c.video_url),w=c.src,O=(c.type,c.width),C=c.height,E=(c.thumbnail,c.autoplay,c.danmaku),k=_(!1),j=a(k,2),S=j[0],T=(j[1],function(e){return p({width:e})}),A=function(e){return p({height:e})},R=wp.element.createElement(x,null,wp.element.createElement(y,null,wp.element.createElement(d,null,wp.element.createElement(s,{onClick:function(){return t()}},__("Replace")))),!!w&&wp.element.createElement(b,null,wp.element.createElement(h,{title:__("Embedded Video Setting","mine-cloudvod")},wp.element.createElement(m,{label:__("Danmaku","mine-cloudvod"),onChange:function(e){return function(t){p(r({},e,t))}}("danmaku"),checked:void 0==E||E,help:__("Only valid for Bilibili","mine-cloudvod")}),wp.element.createElement(v,{type:"string",label:__("Width"),value:void 0!==O?O:"",placeholder:"100%",onChange:T}),wp.element.createElement(v,{type:"string",label:__("Height"),value:void 0!==C?C:"",placeholder:"500px",onChange:A}))));return w?(S&&wp.element.createElement(f,{className:"mine-cloudvod__placeholder is-loading"},wp.element.createElement(u,null)),wp.element.createElement(x,null,R,wp.element.createElement("figure",{className:"wp-block-video"},wp.element.createElement(l,null,wp.element.createElement("iframe",{src:w,width:O,height:C,scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true",sandbox:"allow-top-navigation allow-same-origin allow-forms allow-scripts"}))))):wp.element.createElement("div",null,wp.element.createElement(o.a,{icon:wp.element.createElement("svg",{width:"28px",height:"28px",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",fill:"none",class:"mine-block-icon"},wp.element.createElement("path",{d:"M433.792 768c-20.896 73.888-81.216 120.704-161.792 120.704-87.84 0-154.656-57.056-167.872-141.184C102.752 744 96 716.48 96 712.416V174.72C96 157.12 125.28 128 142.976 128h736.16C896.8 128 928 157.088 928 174.752V720c0 17.664-31.2 48-48.864 48H433.792z",fill:"#FFFFFF"}),wp.element.createElement("path",{d:"M672 864v-32h32v32h128v32h-128v32h-32v-32h-224v-32h224z m-192.608-128H896V160H128v409.92a208.96 208.96 0 0 0-32 39.168V160a32 32 0 0 1 32-32h768a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H474.432a207.68 207.68 0 0 0 4.96-32z m-71.616 96a176 176 0 1 1 0-224l1.824 2.24c24 30.08 38.4 68.256 38.4 109.76 0 41.504-14.4 79.68-38.4 109.76l-1.824 2.24z m-207.04-32a347.264 347.264 0 0 1-8.416-64H128.864c2.624 23.488 10.88 45.312 23.36 64h48.512z m19.648 54.464A184.32 184.32 0 0 1 210.272 832h-28.8c11.616 9.408 24.736 17.024 38.912 22.464zM415.136 736H351.68c-0.96 22.88-3.84 44.48-8.416 64h48.48c12.512-18.688 20.8-40.512 23.36-64z m-81.408 96a184.32 184.32 0 0 1-10.112 22.464c14.176-5.44 27.296-13.056 38.912-22.464h-28.8z m-23.36-32c4.736-18.56 8.192-40.288 9.28-64H224.32c1.088 23.712 4.544 45.44 9.28 64h76.704z m-65.92 32c8.8 20.16 19.008 32 27.552 32s18.752-11.84 27.584-32H244.416z m-115.584-128H192.32c0.96-22.88 3.84-44.48 8.416-64H152.256a143.168 143.168 0 0 0-23.36 64z m81.408-96a184.32 184.32 0 0 1 10.112-22.464c-14.176 5.44-27.296 13.056-38.912 22.464h28.8z m132.992 32c4.544 19.52 7.488 41.12 8.416 64h63.456a143.168 143.168 0 0 0-23.36-64h-48.512z m-19.648-54.464c3.648 6.816 7.04 14.336 10.112 22.464h28.8a143.84 143.84 0 0 0-38.912-22.464zM224.352 704H319.68a317.952 317.952 0 0 0-9.28-64H233.632a317.952 317.952 0 0 0-9.28 64z m20.064-96h55.168c-8.832-20.16-19.04-32-27.584-32s-18.752 11.84-27.584 32z",fill:"#5D6D7E"}),wp.element.createElement("path",{d:"M653.76 461.024l-180.48 128.896a16 16 0 0 1-25.28-13.024V319.104a16 16 0 0 1 25.28-13.024l180.48 128.896a16 16 0 0 1 0 26.048z",fill:"#27A2DF"})),label:__("Embed Video","mine-cloudvod"),instructions:__("Enter the Video URL","mine-cloudvod"),placeholder:__("Video URL","mine-cloudvod"),attributes:c,setAttributes:p,onSelectURL:n}))})},function(e,t,n){"use strict";var r=(n(0),function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),o=wp.components,i=o.Button,a=o.Placeholder,c=o.TextControl,s=o.Flex,l=o.FlexItem,u=o.FlexBlock,d=o.BaseControl,p=o.Icon,f=wp.element.useState,__=wp.i18n.__;t.a=function(e){var t=e.attributes,n=(e.setAttributes,e.icon),o=e.onSelectURL,m=e.label,h=e.instructions,v=e.placeholder,g=t.src,y=f({src:g}),b=r(y,2),w=b[0],_=b[1];return wp.element.createElement(a,{icon:n,label:m||__("Embedded Video","mine-cloudvod"),instructions:h||__("Enter video URL","mine-cloudvod")},wp.element.createElement("form",{onSubmit:function(e){e.preventDefault(),o(w.url)}},wp.element.createElement("div",{style:{width:"100%"}},wp.element.createElement(d,{className:"mcv-embed-desc"},wp.element.createElement(p,{icon:function(){return wp.element.createElement("svg",{class:"mcv-embed-icon",width:"45px",height:"45px",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},wp.element.createElement("path",{fill:"#1296db",d:"M777.514667 131.669333a53.333333 53.333333 0 0 1 0 75.434667L728.746667 255.829333h49.92A160 160 0 0 1 938.666667 415.872v320a160 160 0 0 1-160 160H245.333333A160 160 0 0 1 85.333333 735.872v-320a160 160 0 0 1 160-160h49.749334L246.4 207.146667a53.333333 53.333333 0 1 1 75.392-75.434667l113.152 113.152c3.370667 3.370667 6.186667 7.04 8.448 10.965333h137.088c2.261333-3.925333 5.12-7.68 8.490667-11.008l113.109333-113.152a53.333333 53.333333 0 0 1 75.434667 0z m1.152 231.253334H245.333333a53.333333 53.333333 0 0 0-53.205333 49.365333l-0.128 4.010667v320c0 28.117333 21.76 51.157333 49.365333 53.162666l3.968 0.170667h533.333334a53.333333 53.333333 0 0 0 53.205333-49.365333l0.128-3.968v-320c0-29.44-23.893333-53.333333-53.333333-53.333334z m-426.666667 106.666666c29.44 0 53.333333 23.893333 53.333333 53.333334v53.333333a53.333333 53.333333 0 1 1-106.666666 0v-53.333333c0-29.44 23.893333-53.333333 53.333333-53.333334z m320 0c29.44 0 53.333333 23.893333 53.333333 53.333334v53.333333a53.333333 53.333333 0 1 1-106.666666 0v-53.333333c0-29.44 23.893333-53.333333 53.333333-53.333334z"}))}}),wp.element.createElement(p,{icon:function(){return wp.element.createElement("svg",{class:"mcv-embed-icon",width:"45px",height:"45px",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},wp.element.createElement("path",{fill:"#1296db",d:"M512 85.333333c235.637333 0 426.666667 191.029333 426.666667 426.666667S747.637333 938.666667 512 938.666667 85.333333 747.637333 85.333333 512 276.362667 85.333333 512 85.333333z m0 64c-200.298667 0-362.666667 162.368-362.666667 362.666667s162.368 362.666667 362.666667 362.666667 362.666667-162.368 362.666667-362.666667-162.368-362.666667-362.666667-362.666667z m182.933333 503.328l1.141334 0.074667a9.173333 9.173333 0 0 1 7.850666 8.032l0.074667 1.152v37.045333l-0.053333 2.026667c-0.992 18.837333-15.765333 33.930667-34.208 34.954667L667.733333 736l-1.984-0.053333c-18.442667-1.024-33.205333-16.106667-34.208-34.954667l-0.053333-2.026667v-37.045333l0.074667-1.152a9.173333 9.173333 0 0 1 7.850666-8.032l1.130667-0.074667 1.141333 0.074667a9.173333 9.173333 0 0 1 7.861334 8.032l0.064 1.152v37.045333l0.064 1.6c0.746667 8.949333 7.733333 16.074667 16.501333 16.853334l1.557333 0.064 1.568-0.074667c8.757333-0.768 15.744-7.893333 16.490667-16.853333l0.074667-1.6v-37.034667c0-5.109333 4.053333-9.258667 9.066666-9.258667z m-157.472-0.021333l1.141334 0.074667a9.173333 9.173333 0 0 1 7.861333 8.032l0.064 1.162666v37.034667l-0.053333 2.026667c-0.992 18.837333-15.765333 33.930667-34.208 34.954666l-1.984 0.053334-1.994667-0.053334c-18.432-1.024-33.216-16.117333-34.208-34.954666l-0.053333-2.026667v-37.034667l0.064-1.173333a9.173333 9.173333 0 0 1 7.861333-8.021333l1.141333-0.074667 1.141334 0.074667a9.173333 9.173333 0 0 1 7.850666 8.032l0.064 1.162666v37.034667l0.064 1.6c0.746667 8.949333 7.744 16.085333 16.501334 16.853333l1.568 0.064 1.557333-0.064c8.768-0.768 15.754667-7.904 16.501333-16.853333l0.064-1.6v-37.034667c0-5.12 4.053333-9.269333 9.066667-9.269333z m-208.394666 0l1.184 0.074667c1.568 0.213333 3.061333 0.832 4.341333 1.834666l0.906667 0.810667 23.008 23.573333 23.008-23.573333 0.928-0.821333a8.917333 8.917333 0 0 1 10.976 0l0.928 0.842666 0.810666 0.949334c2.432 3.274667 2.453333 7.818667 0.053334 11.104l-0.885334 1.045333-26.709333 27.370667v30.869333l-0.074667 1.162667a9.173333 9.173333 0 0 1-7.850666 8.021333l-1.141334 0.074667-1.130666-0.074667a9.162667 9.162667 0 0 1-7.861334-8.021333l-0.064-1.162667v-30.784l-26.805333-27.456-0.8-0.917333a9.418667 9.418667 0 0 1-1.813333-6.826667l0.234666-1.216 0.384-1.173333a9.098667 9.098667 0 0 1 8.373334-5.717334z m104.181333 0l1.984 0.064c18.442667 1.013333 33.216 16.106667 34.218667 34.944l0.053333 2.037333v9.258667l-0.053333 2.026667c-1.002667 18.837333-15.776 33.930667-34.218667 34.954666l-1.984 0.053334-1.994667-0.053334c-18.432-1.024-33.216-16.117333-34.208-34.954666l-0.053333-2.026667v-9.258667c0-20.458667 16.234667-37.045333 36.256-37.045333z m131.413333 0l1.130667 0.074667a9.173333 9.173333 0 0 1 7.861333 8.032l0.064 1.162666v64.810667l-0.064 1.162667a9.162667 9.162667 0 0 1-7.861333 8.021333l-1.130667 0.074667-1.141333-0.074667a9.162667 9.162667 0 0 1-7.850667-8.021333l-0.074666-1.162667v-64.810667c0-5.12 4.053333-9.269333 9.066666-9.269333z m51.850667-0.010667l1.109333 0.064c1.770667 0.213333 3.488 0.970667 4.906667 2.261334l0.992 1.066666 0.736 1.056a9.728 9.728 0 0 1-0.768 10.656l-0.842667 0.981334-25.002666 25.546666 25.258666 25.802667 0.64 0.704 0.554667 0.768 0.48 0.832 0.522667 1.28a9.429333 9.429333 0 0 1-1.354667 8.565333l-0.821333 0.96-0.949334 0.853334a8.938667 8.938667 0 0 1-8.394666 1.376l-1.248-0.533334-0.810667-0.48-0.746667-0.586666-0.693333-0.64-28.672-29.301334-0.970667-1.098666a13.802667 13.802667 0 0 1 0-17.002667l0.970667-1.098667 28.693333-29.333333a8.938667 8.938667 0 0 1 6.410667-2.698667z m-183.264 18.538667l-1.568 0.064c-8.757333 0.768-15.754667 7.893333-16.501333 16.853333l-0.064 1.6v9.258667c0 9.685333 7.285333 17.642667 16.565333 18.453333l1.568 0.064 1.557333-0.064c8.768-0.768 15.744-7.904 16.490667-16.853333l0.074667-1.6v-9.258667l-0.074667-1.6c-0.789333-9.482667-8.565333-16.917333-18.048-16.917333z m48.672-375.733333l2.176 1.226666L620.586667 377.173333c55.317333 32.629333 56.170667 113.450667 2.56 147.562667l-2.56 1.557333-5.44-3.2 5.44 3.210667-136.48 80.512c-30.229333 17.834667-68.885333 7.242667-86.346667-23.637333-17.034667-30.154667-7.573333-68.512 21.013333-86.912l2.133334-1.312 56.672-33.429334 111.168 45.994667-94.581334-55.786667-73.28-43.221333c-30.218667-17.834667-40.586667-57.301333-23.125333-88.202667 17.045333-30.144 54.282667-40.96 84.16-24.853333z"}))}}),wp.element.createElement(p,{icon:function(){return wp.element.createElement("svg",{class:"mcv-embed-icon mcv-embed-icon-qq",width:"38px",height:"38px",viewBox:"0 0 1107 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},wp.element.createElement("path",{fill:"#1296db",d:"M587.7685 475.803L379.2985 317.52c-27.023-23.163-50.187-11.581-50.187 27.024v347.45c0 34.744 23.164 46.326 50.187 23.162l208.47-158.282c23.163-15.442 27.024-42.466 15.442-61.769-3.86-11.581-7.721-15.442-15.442-19.302zM1058.7555 406.313C842.5635 197.843 560.7455 74.306 390.8795 8.677c-73.35-27.024-154.422 11.581-181.446 81.071-3.86 7.721-3.86 15.442-7.72 23.163v15.442c158.282 50.188 413.078 146.701 609.966 301.123 42.466 30.884 54.047 92.653 23.163 135.12-7.721 11.58-15.442 19.302-27.024 23.162-185.306 131.259-389.915 235.494-606.106 304.983l3.86 11.582c11.583 77.211 84.933 127.398 162.144 115.816 11.581 0 19.303-3.86 30.884-7.72 239.354-96.514 463.266-231.633 660.153-401.497 57.909-50.187 65.63-138.98 15.443-196.888-7.721 0-11.582-3.86-15.443-7.721zM205.5745 128.353h-3.86c-77.212-23.163-158.283 15.443-169.865 81.072-42.466 200.748-42.466 405.357 0 606.106C47.2925 881.16 132.2255 923.626 205.5755 896.602h3.86c-46.326-254.796-46.326-513.453-3.86-768.249z"}))}}),wp.element.createElement(p,{icon:function(){return wp.element.createElement("svg",{class:"mcv-embed-icon",width:"45px",height:"45px",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},wp.element.createElement("path",{fill:"#1296db",d:"M266.622942 667.807578c27.710109 13.487176 57.219189 16.874319 87.606267 14.361079 3.733021-0.306992 6.67605-0.838088 7.754614 4.311189 3.403516 16.222473 12.164041 23.613814 28.613688 25.535583 13.706163 1.599428 27.431769 0.787946 41.148166 0.86367 5.618974 0.030699 8.289804-2.774183 8.454556-8.41567 0.191358-6.5246 0.158612-13.063527 0.035816-19.593244-0.127913-6.817266-2.659573-9.188266-9.642614-9.233292-7.870248-0.053212-15.742543 0.032746-23.613814-0.050142-2.616594-0.026606-5.378497 0.301875-7.952112-1.766226 1.147126-1.983167 2.982938-2.094708 4.430916-2.828418 17.404392-8.836249 29.739325-21.457708 29.777187-42.283012 0.141216-76.876901 0.089028-153.754826 0.028653-230.632751-0.01228-14.887059-6.311753-26.730805-18.033725-35.892465-8.949836-7.001461-19.396769-10.413164-30.125111-13.234419-25.838482-6.794753-52.074006-6.429433-78.314647-3.6399-14.059204 1.496074-27.7756 5.201465-39.98876 12.573363-15.971763 9.640568-25.858948 22.906709-25.775037 42.854017 0.311085 75.368548 0.183172 150.740166 0.082888 226.110761C241.086335 645.965108 249.746576 659.592476 266.622942 667.807578zM313.779961 404.813792c0-2.670829-0.01228-5.395894 0.49221-7.997138 1.063215-5.489014 4.231371-9.435906 9.671267-11.190877 8.673543-2.794649 17.47807-2.920516 26.214035-0.479931 6.592139 1.842974 9.333576 5.430686 9.66615 12.408611 0.265036 5.513574 0.13917 11.045567 0.13917 16.569374 0.010233 32.981159 0.004093 65.963341 0.004093 98.9445-0.002047 36.665061 0.008186 73.329099-0.004093 109.99416-0.00614 13.960966-3.62762 18.144242-17.579377 19.789719-7.395434 0.87288-14.721283 0.500397-21.370727-3.52222-4.330632-2.620687-6.600325-6.55223-7.063883-11.522428-0.200568-2.161223-0.182149-4.348028-0.182149-6.522554C313.759495 549.129642 313.757448 476.971206 313.779961 404.813792zM132.619972 328.946894c20.436448-0.042979 40.871873-0.106424 61.309344 0.048095 4.427846 0.033769 6.071276-1.570775 6.644327-5.987365 2.451842-18.8493 11.310603-33.082466 30.011524-39.767725 5.856381-2.093684 11.895935-3.470031 18.029632-4.412496 62.11264-9.54233 124.627439-14.725376 187.399087-16.923438 22.750143-0.797156 45.533033-0.268106 68.302619-0.923022 17.721617-0.506537 35.483142 0.292666 53.226249 0.649799 11.039427 0.222057 22.086018 0.403183 33.128515 0.733711 36.82879 1.102101 73.535807 3.761674 110.172215 7.500834 25.478278 2.600221 50.918693 5.624091 76.157517 10.037611 25.308409 4.426823 38.588877 18.193361 42.085514 43.597961 0.604774 4.39203 2.541893 5.502317 6.551206 5.478781 20.436448-0.112564 40.871873-0.150426 61.309344 0.023536 4.767584 0.040932 6.210445-1.824555 5.776563-6.311753-1.102101-11.338233-2.335185-22.644743-5.14109-33.719986-8.612145-33.965579-28.610618-56.087413-63.819514-64.039525-32.906457-7.43125-66.165955-12.093433-99.615788-15.773242-24.452925-2.690272-48.972365-4.572132-73.510224-6.345522-28.882817-2.088568-57.789171-3.635807-86.71906-4.539386-18.071587-0.565888-36.178991-0.106424-54.270021-0.106424-30.302143-0.068562-60.609403-0.38374-90.876754 1.77032-19.693528 1.400906-39.446407 1.977028-59.134819 3.432169-30.202882 2.233877-60.373019 4.915963-90.411149 8.834202-27.393907 3.573385-54.67832 7.66968-81.412195 15.032368-24.543999 6.759961-40.532135 22.579251-50.29243 45.382607-7.013741 16.385179-9.210779 33.831526-10.595312 51.414997C126.582465 328.366679 129.181663 328.95508 132.619972 328.946894zM887.342062 698.827059c-20.258393 0.324388-40.520879 0.659009-60.775178 0.592494-4.7727-0.01535-6.133697 1.476631-6.825452 6.076392-2.188852 14.548344-7.433296 27.493168-21.264303 35.157731-7.576559 4.197602-15.69854 6.753821-24.180725 8.080026-46.667879 7.294127-93.612051 12.165064-140.742465 15.021112-25.723871 1.557472-51.498908 2.617617-77.260641 2.948145-30.970362 0.399089-61.948911 0.210801-92.934622-0.343831-41.199331-0.737804-82.296331-2.639107-123.32784-6.330172-31.351032-2.820232-62.61406-6.411013-93.684706-11.437493-10.603499-1.715061-20.857027-4.861728-29.420053-12.034081-10.220782-8.56098-13.870916-20.214391-15.760962-32.691563-0.448208-2.957355-1.191128-4.544503-4.586458-4.403287-14.234189 0.599657-28.442796-1.280156-40.901549-0.567935-8.986675 0-16.187681 0.033769-23.390733-0.014326-3.434216-0.022513-4.814656 1.570775-4.581342 4.975315 1.130753 16.607236 3.39226 33.024138 9.461489 48.622394 9.41237 24.194028 25.675776 41.062208 51.387367 48.202838 23.473621 6.520507 47.39852 10.467399 71.448262 13.755282 47.444569 6.486738 95.17771 9.93221 142.937456 13.021571 33.42732 2.162246 66.919109 2.483564 100.382245 2.787486 34.640961 0.315178 69.301366-0.215918 103.902418-2.51631 19.200294-1.277086 38.442544-1.984191 57.628512-3.433192 29.363771-2.220574 58.690704-4.937452 87.902002-8.738012 27.243481-3.544733 54.333466-7.751544 80.871889-15.168468 23.989367-6.705726 39.436174-22.560832 49.134047-44.646849 7.095605-16.150842 9.215896-33.477462 10.764158-50.879807C893.950574 700.04684 891.710556 698.755428 887.342062 698.827059zM736.938564 509.999436c17.520025-48.677653 35.057447-97.351212 52.524261-146.049331 2.910283-8.110725 0.245593-11.875468-8.311293-11.911284-17.919115-0.070608-35.83823-0.061398-53.760414 0.005117-6.867408 0.024559-8.366551 1.14508-10.451026 7.762801-6.592139 20.920472-13.170974 41.84606-19.62292 62.811558-4.418636 14.366196-8.614192 28.800953-13.265118 44.397163-0.754177-2.601244-1.13894-3.867074-1.493004-5.14109-9.462512-34.220383-20.275789-68.031443-30.944779-101.884458-2.089591-6.628978-3.789303-7.906064-10.413164-7.934716-18.253736-0.080841-36.509519-0.106424-54.765301 0.008186-7.816013 0.049119-10.589173 4.246721-7.964392 11.501962 2.506077 6.928806 5.021364 13.852496 7.519254 20.784372 16.96437 47.104831 33.507138 94.369298 51.092655 141.241838 7.158027 19.071358 11.564383 37.96773 10.707876 58.560744-1.101077 26.414603-0.300852 52.912094-0.243547 79.373769 0.01842 9.104355 2.288113 11.293207 11.235902 11.299347 16.916275 0.011256 33.833573 0.011256 50.747801 0 9.090029-0.00614 10.541077-1.440815 10.543124-10.457166 0.010233-33.830503 0.013303-67.662029-0.008186-101.493555-0.002047-3.365654 0.174985-6.655584 1.350764-9.881045C726.634894 538.679639 731.779054 524.33698 736.938564 509.999436zM537.833877 352.018356c-16.417925-0.013303-32.833803-0.01228-49.251727 0-10.070356 0.00614-12.033058 1.969864-12.036128 12.05557-0.008186 49.755194-0.002047 99.510388-0.002047 149.265582 0.002047 50.258661-0.01228 100.516298 0.013303 150.774959 0.005117 8.498558 2.267647 10.697643 10.760065 10.708899 16.918321 0.01842 33.838689 0.010233 50.760081 0.002047 9.859555-0.002047 11.799744-1.90028 11.80486-11.689227 0.016373-31.327496 0.008186-62.656015 0.008186-93.982488-0.00307-68.350714 0.005117-136.702452-0.011256-205.053166C549.877167 354.037339 547.832601 352.024495 537.833877 352.018356zM883.827005 352.023472c-16.914228-0.030699-33.82948-0.021489-50.743708-0.005117-9.078773 0.00921-10.911514 1.826602-10.914584 10.847046-0.008186 50.242288-0.00307 100.484575-0.00307 150.726863 0 50.41011-0.005117 100.818173 0.00614 151.228283 0.002047 8.209986 1.771343 9.981329 10.066263 9.996678 17.247826 0.031722 34.498722 0.021489 51.749618 0.00614 8.5487-0.008186 10.667967-2.073218 10.667967-10.706853 0.021489-100.483552 0.021489-200.969151 0.00307-301.452703C894.655631 354.217441 892.406404 352.040868 883.827005 352.023472zM134.55095 674.761967c18.925025 0.115634 37.85005 0.044002 56.776098 0.039909 4.668323-0.002047 7.105838-2.518357 7.603165-6.992251 0.223081-1.988284 0.166799-4.01443 0.166799-6.021134 0.008186-33.330106 0.00614-66.659189 0.00614-99.988272 0-34.166147 0.016373-68.332295-0.013303-102.499465-0.005117-8.292873-1.730411-9.959839-10.069333-9.969049-17.417695-0.017396-34.836413-0.016373-52.254108 0-8.673543 0.00921-10.1645 1.51961-10.1645 10.3006-0.007163 39.86187-0.005117 79.722716-0.002047 119.583562 0 28.806069-0.01842 57.613162 0.01842 86.421278C126.626467 672.235424 128.66694 674.725128 134.55095 674.761967zM126.644887 417.044348c0.062422 5.426593 2.654456 8.195659 7.976672 8.227382 18.591427 0.113587 37.181831 0.115634 55.773258 0 5.990434-0.037862 8.612145-2.683109 8.647961-8.694009 0.109494-18.591427 0.109494-37.182854 0-55.774281-0.033769-6.0416-2.622734-8.68173-8.613168-8.719592-18.424628-0.11768-36.848233-0.125867-55.270814 0.014326-6.16235 0.046049-8.478092 2.577708-8.53335 8.673543-0.080841 9.210779-0.021489 18.423605-0.01842 27.635407C126.610094 397.951501 126.530276 407.498948 126.644887 417.044348z"}))}}),__("And other URLs that support iframe embedding","mine-cloudvod"))),wp.element.createElement(s,{style:{width:"100%",maxWidth:"400px"}},wp.element.createElement(u,null,wp.element.createElement(c,{type:"url",placeholder:v||__("Embedded URL","mine-cloudvod"),value:w.url,onChange:function(e){return _({url:e})}})),wp.element.createElement(l,null,wp.element.createElement(i,{isPrimary:!0,style:{marginBottom:"8px"},type:"submit"},__("Add Video","mine-cloudvod"))))))}},function(e,t){var __=wp.i18n.__,n=wp.blocks,r=n.registerBlockType,o=(n.unregisterBlockType,wp.blockEditor),i=o.InnerBlocks,a=o.useBlockProps,c=wp.data,s=c.useSelect,l=c.dispatch,u=wp.components,d=u.Button,p=u.Placeholder,f=wp.plugins,m=(f.getPlugins,f.unregisterPlugin,wp.element.useEffect);r("mine-cloudvod/block-container",{title:__("Mine Block Container","mine-cloudvod"),category:"mine",supports:{inserter:!1,reusable:!1,html:!1},icon:"screenoptions mcv-block-icon",edit:function(e){var t=a(),n=e.clientId,r=e.isSelected,o=s(function(e){return e("core/block-editor").getBlock(n).innerBlocks});m(function(){r&&wp.data.dispatch("core/edit-post").openGeneralSidebar("edit-post/block")},[r]),l("core/block-editor").setTemplateValidity(!0);var c=function(e){var t=wp.blocks.createBlock(e);return l("core/block-editor").insertBlock(t,0,n)},u=function(){return 0===o.length&&wp.element.createElement(i.ButtonBlockAppender,null)};return o.length?wp.element.createElement("div",null,wp.element.createElement("div",t,wp.element.createElement(i,{templateLock:!1,renderAppender:function(){return u()}}))):wp.element.createElement("div",null,wp.element.createElement("div",t,wp.element.createElement(p,{icon:"format-video mcv-block-icon",instructions:__("Choose a video type to get started.","mine-cloudvod"),label:__("Choose a Video Type","mine-cloudvod")},wp.element.createElement(d,{isPrimary:!0,onClick:function(){c("mine-cloudvod/embed-video")}},__("Embed Video","mine-cloudvod")),wp.element.createElement(d,{isPrimary:!0,onClick:function(){c("mine-cloudvod/aliplayer")}},__("Aliplayer","mine-cloudvod")),wp.element.createElement(d,{isPrimary:!0,onClick:function(){c("mine-cloudvod/aliyun-vod")}},__("Aliyun Vod","mine-cloudvod")),wp.element.createElement(d,{isPrimary:!0,onClick:function(){c("mine-cloudvod/tc-vod")}},__("TC Vod","mine-cloudvod")),wp.element.createElement(d,{isPrimary:!0,onClick:function(){c("mine-cloudvod/video-playlist")}},__("Video Playlist","mine-cloudvod"))),wp.element.createElement(i,{templateLock:!1,renderAppender:function(){return!1}})))},save:function(){var e=a.save();return wp.element.createElement("div",e,wp.element.createElement(i.Content,null))}})},function(e,t,n){"use strict";var r=n(98),__=wp.i18n.__,o=wp.blocks,i=o.registerBlockType,a=(o.unregisterBlockType,wp.plugins),c=(a.registerPlugin,a.unregisterPlugin,wp.data),s=(c.select,c.dispatch,wp.element.render,{title:{type:"array",source:"children",selector:"p"},source:{type:"string"},oss:{type:Object,default:{key:!1,bucket:!1}},width:{type:"string",default:"100%"},height:{type:"string",default:"500px"},videoId:{type:"string"},thumbnail:{type:"string"},autoplay:{type:Boolean},live:{type:Boolean,default:!1},slide:{type:Boolean,default:void 0},slidetext:{type:"string"},markers:{type:Array,default:[]},captions:{type:Array,items:{type:"object"},default:[]},countdown:{type:Date,default:!1},countdowntips:{type:"string"},textLiveEnd:{type:"string"}});i("mine-cloudvod/aliplayer",{title:__("Aliplayer","mine-cloudvod"),description:__("Add video via video url.","mine-cloudvod"),icon:wp.element.createElement("svg",{version:"1.1",id:"Layer_1",x:"0px",y:"0px",width:"28px",height:"28px",viewBox:"0 0 156 162","enable-background":"new 0 0 156 162"},wp.element.createElement("image",{id:"image0",width:"156",height:"162",x:"0",y:"0",href:"http://gtms02.alicdn.com/tps/i2/TB1riKkHpXXXXXYXVXXvgomOXXX-156-162.png"})),category:"mine",keywords:[__("ApsaraVideo VOD","mine-cloudvod"),__("mine cloudvod","mine-cloudvod"),__("VOD","mine-cloudvod")],attributes:s,edit:r.a,save:function(){return null}})},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(4),i=n(24),a=n(25),c=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=wp.components,l=s.Button,u=s.Disabled,d=(s.DropdownMenu,s.Spinner),p=s.Toolbar,f=s.withNotices,m=(s.Notice,s.BaseControl),h=s.Placeholder,v=s.ToggleControl,g=s.PanelBody,y=s.TextControl,b=s.DateTimePicker,w=s.Flex,_=s.FlexItem,x=s.FlexBlock,O=wp.blockEditor,C=O.BlockControls,E=O.InspectorControls,k=O.MediaUpload,j=O.MediaUploadCheck,__=wp.i18n.__,S=wp.element,T=S.useState,A=S.Fragment,R=wp.element.useEffect;t.a=f(function(e){function t(){confirm(__("Replace this video?","mine-cloudvod"))&&O({videoId:"",oss:"",source:""})}function n(e){O({thumbnail:e.url})}function s(){O({thumbnail:""})}var f=e.attributes,O=e.setAttributes,S=(e.noticeOperations,f.source),P=f.width,D=f.height,I=(f.videoId,f.thumbnail),B=f.autoplay,N=f.captions,M=f.slide,U=f.live,L=f.countdown,F=f.slidetext,z=f.countdowntips,H=f.textLiveEnd,V=T(!1),K=c(V,2),q=K[0],W=(K[1],T(!!L)),$=c(W,2),X=$[0],G=$[1],Q=T({source:S}),Y=c(Q,2),J=Y[0],Z=Y[1],ee=T({source:S,width:P||"100%",height:"500px",autoplay:B||!1,isLive:U,rePlay:!1,playsinline:!0,preload:!0,controlBarVisibility:"hover",useH5Prism:!0,components:[{name:"RateComponent",type:AliPlayerComponent.RateComponent}]}),te=c(ee,2),ne=te[0],re=te[1];R(function(){void 0==M&&O({slide:!!window.mcv_aliplayer_config.slide})},[]),R(function(){S&&re({source:S,width:P||"100%",height:"500px",autoplay:B||!1,isLive:U,rePlay:!1,playsinline:!0,preload:!0,controlBarVisibility:"hover",useH5Prism:!0,cover:I,components:[{name:"RateComponent",type:AliPlayerComponent.RateComponent}]})},[S,I,B,P,D,N,M,F]);var oe=function(e){return O({width:e})},ie=function(e){return O({height:e})},ae=function(e){return function(t){O(r({},e,t))}},ce=wp.element.createElement(A,null,wp.element.createElement(C,null,wp.element.createElement(a.a,{captions:N,onChange:function(e){O({captions:e})}}),wp.element.createElement(p,null,wp.element.createElement(l,{onClick:function(){return t()}},__("Replace")))),!!S&&wp.element.createElement(E,null,wp.element.createElement(g,{title:__("Video Markers","mine-cloudvod"),initialOpen:!1},wp.element.createElement(i.a,{setAttributes:O,attributes:f})),wp.element.createElement(g,{title:__("Aliplayer Settings","mine-cloudvod")},wp.element.createElement(v,{label:__("Autoplay","mine-cloudvod"),onChange:ae("autoplay"),checked:B}),wp.element.createElement(v,{label:__("Live","mine-cloudvod"),onChange:ae("live"),checked:U}),U&&wp.element.createElement(y,{type:"string",label:__("Text of Live Ends","mine-cloudvod"),value:void 0!==H?H:"",onChange:function(e){return O({textLiveEnd:e})},help:__("Enter the text of the live ends.","mine-cloudvod")}),wp.element.createElement(y,{type:"string",label:__("Video URL","mine-cloudvod"),value:S,onChange:function(e){return O({source:e})},help:__("Attention, make sure the URL prefix(http or https) is same with the site, otherwise video will not play.","mine-cloudvod")}),wp.element.createElement(y,{type:"string",label:__("Width"),value:void 0!==P?P:"",placeholder:"100%",onChange:oe}),wp.element.createElement(y,{type:"string",label:__("Height"),value:void 0!==D?D:"",placeholder:"500px or auto",help:__("The auto will be adaptive height.","mine-cloudvod"),onChange:ie}),wp.element.createElement(j,null,wp.element.createElement(m,{className:"editor-video-poster-control"},wp.element.createElement(m.VisualLabel,null,wp.element.createElement("p",null,__("Cover image","mine-cloudvod"))),wp.element.createElement("p",null,I?wp.element.createElement("img",{src:I}):""),wp.element.createElement(k,{title:__("Select cover image","mine-cloudvod"),onSelect:n,allowedTypes:["image"],render:function(e){var t=e.open;return wp.element.createElement(l,{isPrimary:!0,onClick:t},I?__("Replace","mine-cloudvod"):__("Select","mine-cloudvod"))}}),!!I&&wp.element.createElement(l,{onClick:s,isTertiary:!0},__("Remove","mine-cloudvod"))))),wp.element.createElement(g,{title:__("Slide","mine-cloudvod"),initialOpen:M},wp.element.createElement(v,{label:__("Enable","mine-cloudvod"),onChange:ae("slide"),checked:M,help:__("The global configuration is used by default and can be turned off individually.","mine-cloudvod")}),M&&wp.element.createElement(y,{type:"string",label:__("Scroll Text","mine-cloudvod"),value:void 0!==F?F:"",placeholder:__("Empty means to use global configuration.","mine-cloudvod"),onChange:function(e){return O({slidetext:e})},help:__("Can be dynamically replaced with these labels: {username} {userid} {userip} {useremail} {usernickname}","mine-cloudvod")})),wp.element.createElement(g,{title:__("Countdown Timer","mine-cloudvod"),initialOpen:!1},wp.element.createElement(v,{label:__("Enable","mine-cloudvod"),onChange:function(e){return G(e)},checked:X}),X&&wp.element.createElement(y,{type:"string",label:__("Text","mine-cloudvod"),value:void 0!==z?z:"",onChange:function(e){return O({countdowntips:e})},help:__("Enter the text you want to appear on the countdown page","mine-cloudvod")}),X&&wp.element.createElement(b,{currentDate:L,onChange:function(e){return O({countdown:e})}}))));return S?(q&&wp.element.createElement(h,{className:"mine-cloudvod__placeholder is-loading"},wp.element.createElement(d,null)),wp.element.createElement(A,null,ce,wp.element.createElement("figure",{className:"wp-block-video"},wp.element.createElement(u,null,wp.element.createElement(o.a,{config:ne}))))):wp.element.createElement("div",null,wp.element.createElement(h,{label:__("Aliplayer","mine-cloudvod"),instructions:__("Aliplayer is a very useful player, which supports live streaming and recorded video, E.g: mp4 or m3u8 url.","mine-cloudvod")+__("Attention, make sure the URL prefix(http or https) is same with the site, otherwise video will not play.","mine-cloudvod"),icon:wp.element.createElement("svg",{version:"1.1",id:"Layer_1",x:"0px",y:"0px",width:"28px",height:"28px",viewBox:"0 0 156 162","enable-background":"new 0 0 156 162"},wp.element.createElement("image",{id:"image0",width:"156",height:"162",x:"0",y:"0",href:"http://gtms02.alicdn.com/tps/i2/TB1riKkHpXXXXXYXVXXvgomOXXX-156-162.png"}))},wp.element.createElement("form",{onSubmit:function(e){e.preventDefault(),O({source:J.source})}},wp.element.createElement(w,{style:{width:"100%",maxWidth:"400px"}},wp.element.createElement(x,null,wp.element.createElement(y,{type:"url",placeholder:__("Video URL","mine-cloudvod"),value:J.source,onChange:function(e){return Z({source:e})}})),wp.element.createElement(_,null,wp.element.createElement(l,{isPrimary:!0,style:{marginBottom:"8px"},type:"submit"},__("Add Video","mine-cloudvod")))))))})},function(e,t,n){"use strict";var r=n(100),__=wp.i18n.__,o=wp.blocks,i=o.registerBlockType,a=(o.unregisterBlockType,wp.plugins),c=(a.registerPlugin,a.unregisterPlugin,wp.data),s=(c.select,c.dispatch,wp.element.render,{plName:{type:"string"},mcvTag:{type:Number,default:0},show:{type:Boolean,default:!0},markers:{type:Array,default:[]},captions:{type:Array,items:{type:"object"},default:[]},countdown:{type:Date,default:!1}});i("mine-cloudvod/video-playlist",{title:__("Video Playlist","mine-cloudvod"),description:__("Video Playlist of Cloud VoD.","mine-cloudvod"),icon:wp.element.createElement("svg",{fill:"none",class:"mine-block-icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28"},wp.element.createElement("path",{d:"M921.6 204.8H102.4a68.288 68.288 0 0 1 68.288-68.288h682.624A68.288 68.288 0 0 1 921.6 204.8zM819.2 68.288H204.8A68.288 68.288 0 0 1 273.088 0h477.888A68.288 68.288 0 0 1 819.2 68.288zM955.712 273.088H68.288A68.288 68.288 0 0 0 0 341.376v614.4a68.288 68.288 0 0 0 68.288 68.288h887.424A68.288 68.288 0 0 0 1024 955.776v-614.4a68.288 68.288 0 0 0-68.288-68.288zM409.6 819.2V477.888l273.088 170.688z"})),category:"mine",keywords:[__("Playlist","mine-cloudvod"),__("ApsaraVideo VOD","mine-cloudvod"),__("Aliyun OSS","mine-cloudvod"),__("Tencent Cloud Vod","mine-cloudvod"),__("Tencent COS","mine-cloudvod"),__("mine cloudvod","mine-cloudvod"),__("VOD","mine-cloudvod")],attributes:s,edit:r.a,save:function(){return null}})},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(4),i=function(){function e(e,t){var n=[],_n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(_n=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);_n=!0);}catch(e){r=!0,o=e}finally{try{!_n&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=wp.components,c=(a.Button,a.Disabled),s=(a.DropdownMenu,a.Spinner),l=(a.Toolbar,a.withNotices),u=(a.Notice,a.BaseControl,a.Placeholder),d=a.ToggleControl,p=a.PanelBody,f=a.TextControl,m=a.ComboboxControl,h=(a.Card,a.CardBody,a.CardHeader,a.CardDivider,wp.blockEditor),v=(h.BlockControls,h.InspectorControls),__=(h.MediaUpload,h.MediaUploadCheck,wp.i18n.__),g=wp.element,y=g.useState,b=g.Fragment,w=g.useEffect,_=g.useRef,x=wp.data,O=x.dispatch;x.useSelect;t.a=l(function(e){var t=e.attributes,n=e.setAttributes,a=t.plName,l=t.mcvTag,h=t.show,g=y(!0),x=i(g,2),C=x[0],E=x[1],k=y([]),j=i(k,2),S=j[0],T=j[1];mcv_nonce.endtime<Date.parse(new Date)/1e3&&O("mine-cloudvod/vod").setUI("proFeature",!0);var A=_(!0);w(function(){return wp.apiFetch({path:wp.url.addQueryArgs("/wp/v2/mcv_video_tag",{per_page:-1,orderby:"count",order:"desc",_fields:["id","name","count"],hide_empty:!0})}).then(function(e){A&&T(e.map(function(e){return{value:e.id,label:e.name}}))}).catch(function(){A&&T([])}),function(){A=!1}},[]);var R=y([]),P=i(R,2),D=P[0],I=P[1];w(function(){l>0&&(E(!0),wp.apiFetch({path:wp.url.addQueryArgs("/wp/v2/mcv_video",{per_page:-1,mcv_video_tag:l})}).then(function(e){E(!1),I(e)}).catch(function(){I([])}))},[l]);var B=wp.element.createElement(b,null,wp.element.createElement(v,null,wp.element.createElement(p,{title:__("Video Playlist","mine-cloudvod"),initialOpen:!0},wp.element.createElement(d,{label:__("Display Playlist","mine-cloudvod"),onChange:function(e){return function(t){n(r({},e,t))}}("show"),checked:h,help:__("Display the playlist or not.","mine-cloudvod")}),wp.element.createElement(f,{type:"string",label:__("Playlist Name","mine-cloudvod"),value:void 0!==a?a:"",onChange:function(e){return n({plName:e})}}),wp.element.createElement(m,{label:__("Video Tag","mine-cloudvod"),value:l,onChange:function(e){return n({mcvTag:e})},options:S,onInputChange:function(e){return T(options.filter(function(t){return t.label.toLowerCase().startsWith(e.toLowerCase())}))}})))),N={source:"//player.alicdn.com/video/editor.mp4",width:"100%",height:"500px",autoplay:!1,rePlay:!1,playsinline:!0,preload:!0,controlBarVisibility:"hover",useH5Prism:!0};return wp.element.createElement(b,null,B,wp.element.createElement("div",{class:"mcv-videos"},wp.element.createElement("div",{class:"mcv-player"},wp.element.createElement("figure",{className:"wp-block-video"},wp.element.createElement(c,null,wp.element.createElement(o.a,{config:N}))),wp.element.createElement("div",{class:"wide-switch"},wp.element.createElement("span",{class:"btn_switch_bg"},wp.element.createElement("svg",{viewBox:"0 0 9 59",width:"9",height:"59"},wp.element.createElement("path",{d:"M3.8,5.1C1.7,4.3,0.2,2.4,0,0h0v5v4v41v5v3.9c0.6-1.9,2.1-3.4,4-4v0c2.9-0.7,5-3.2,5-6.3v-37  C9,8.4,6.8,5.7,3.8,5.1z"}))),wp.element.createElement("i",{class:"icon_sm icon_left_sm"},wp.element.createElement("svg",{id:"svg_icon_left_sm",viewBox:"0 0 16 16"},wp.element.createElement("path",{d:"M6.427 8l3.284 3.284a1.01 1.01 0 0 1-1.427 1.427L4.29 8.716A1.003 1.003 0 0 1 3.995 8a1.005 1.005 0 0 1 .295-.717l3.994-3.994a1.01 1.01 0 0 1 1.427 1.427L6.427 8z",fill:"#e6e6e6"}))),wp.element.createElement("i",{class:"icon_sm icon_right_sm"},wp.element.createElement("svg",{id:"svg_icon_right_sm",viewBox:"0 0 16 16"},wp.element.createElement("path",{d:"M11.71 8.716L7.716 12.71a1.01 1.01 0 0 1-1.427-1.427L9.573 8 6.289 4.716a1.01 1.01 0 0 1 1.427-1.427l3.994 3.994c.198.198.296.458.295.717.001.259-.097.518-.295.716z",fill:"#e6e6e6"}))))),wp.element.createElement("div",{class:"mcv-playlist"},C?wp.element.createElement(u,{className:"mine-cloudvod__placeholder is-loading"},wp.element.createElement(s,null)):wp.element.createElement("div",null,wp.element.createElement("div",{class:"mcv-title"},a,wp.element.createElement("span",null,"\u5171",wp.element.createElement("b",null,D.length),"\u8282")),wp.element.createElement("div",{class:"mcv-playlist-ul"},wp.element.createElement("ul",null,D.map(function(e){return wp.element.createElement("li",null,wp.element.createElement("span",null,e.title.raw))})))))))})}]);